<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>sge.dsp &mdash; SGE Game Engine 1.5 documentation</title>
    
    <link rel="stylesheet" href="../../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1.5',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="top" title="SGE Game Engine 1.5 documentation" href="../../index.html" />
    <link rel="up" title="Module code" href="../index.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">SGE Game Engine 1.5 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" accesskey="U">Module code</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for sge.dsp</h1><div class="highlight"><pre>
<span class="c1"># Copyright (C) 2012-2017 Julie Marchant &lt;onpon4@riseup.net&gt;</span>
<span class="c1"># </span>
<span class="c1"># This file is part of the Pygame SGE.</span>
<span class="c1"># </span>
<span class="c1"># The Pygame SGE is free software: you can redistribute it and/or modify</span>
<span class="c1"># it under the terms of the GNU Lesser General Public License as published by</span>
<span class="c1"># the Free Software Foundation, either version 3 of the License, or</span>
<span class="c1"># (at your option) any later version.</span>
<span class="c1"># </span>
<span class="c1"># The Pygame SGE is distributed in the hope that it will be useful,</span>
<span class="c1"># but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="c1"># MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="c1"># GNU Lesser General Public License for more details.</span>
<span class="c1"># </span>
<span class="c1"># You should have received a copy of the GNU Lesser General Public License</span>
<span class="c1"># along with the Pygame SGE.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">This module provides classes related to the graphical display.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">division</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">absolute_import</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">print_function</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">unicode_literals</span>

<span class="kn">import</span> <span class="nn">math</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">traceback</span>
<span class="kn">import</span> <span class="nn">warnings</span>

<span class="kn">import</span> <span class="nn">pygame</span>
<span class="kn">import</span> <span class="nn">six</span>

<span class="kn">import</span> <span class="nn">sge</span>
<span class="kn">from</span> <span class="nn">sge</span> <span class="kn">import</span> <span class="n">gfx</span><span class="p">,</span> <span class="n">r</span>
<span class="kn">from</span> <span class="nn">sge.r</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">_check_color</span><span class="p">,</span> <span class="n">_scale</span><span class="p">,</span> <span class="n">_get_blend_flags</span><span class="p">,</span> <span class="n">_screen_blend</span><span class="p">,</span> <span class="n">_set_mode</span><span class="p">,</span>
    <span class="n">_handle_music</span><span class="p">,</span> <span class="n">_get_dot_sprite</span><span class="p">,</span> <span class="n">_get_line_sprite</span><span class="p">,</span> <span class="n">_get_rectangle_sprite</span><span class="p">,</span>
    <span class="n">_get_ellipse_sprite</span><span class="p">,</span> <span class="n">_get_circle_sprite</span><span class="p">,</span> <span class="n">_get_polygon_sprite</span><span class="p">,</span> <span class="n">bl_update</span><span class="p">,</span>
    <span class="n">bl_get_image</span><span class="p">,</span> <span class="n">o_update</span><span class="p">,</span> <span class="n">o_detect_collisions</span><span class="p">,</span> <span class="n">o_update_collision_lists</span><span class="p">,</span>
    <span class="n">o_update_object_areas</span><span class="p">,</span> <span class="n">o_is_other</span><span class="p">,</span> <span class="n">o_get_origin_offset</span><span class="p">,</span> <span class="n">o_set_speed</span><span class="p">,</span>
    <span class="n">s_get_image</span><span class="p">,</span> <span class="n">s_get_precise_mask</span><span class="p">,</span> <span class="n">s_from_text</span><span class="p">,</span> <span class="n">tg_blit</span><span class="p">,</span>
    <span class="n">r_get_rectangle_object_areas</span><span class="p">,</span> <span class="n">r_set_object_areas</span><span class="p">,</span> <span class="n">r_update_fade</span><span class="p">,</span>
    <span class="n">r_update_dissolve</span><span class="p">,</span> <span class="n">r_update_pixelate</span><span class="p">,</span> <span class="n">r_update_wipe_left</span><span class="p">,</span>
    <span class="n">r_update_wipe_right</span><span class="p">,</span> <span class="n">r_update_wipe_up</span><span class="p">,</span> <span class="n">r_update_wipe_down</span><span class="p">,</span>
    <span class="n">r_update_wipe_upleft</span><span class="p">,</span> <span class="n">r_update_wipe_upright</span><span class="p">,</span> <span class="n">r_update_wipe_downleft</span><span class="p">,</span>
    <span class="n">r_update_wipe_downright</span><span class="p">,</span> <span class="n">r_update_wipe_matrix</span><span class="p">,</span> <span class="n">r_update_iris_in</span><span class="p">,</span>
    <span class="n">r_update_iris_out</span><span class="p">,</span> <span class="n">v_limit</span><span class="p">)</span>


<span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Game&quot;</span><span class="p">,</span> <span class="s2">&quot;Room&quot;</span><span class="p">,</span> <span class="s2">&quot;View&quot;</span><span class="p">,</span> <span class="s2">&quot;Object&quot;</span><span class="p">]</span>


<div class="viewcode-block" id="Game"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Game">[docs]</a><span class="k">class</span> <span class="nc">Game</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This class handles most parts of the game which operate on a global</span>
<span class="sd">    scale, such as global game events.  Before anything else is done</span>
<span class="sd">    with the SGE, an object either of this class or of a class derived</span>
<span class="sd">    from it must be created.</span>

<span class="sd">    When an object of this class is created, it is automatically</span>
<span class="sd">    assigned to :data:`sge.game`.</span>

<span class="sd">    .. note::</span>

<span class="sd">       This class is designed to be used as a singleton.  Do not create</span>
<span class="sd">       multiple :class:`sge.dsp.Game` objects.  Doing so is unsupported</span>
<span class="sd">       and may cause errors.</span>

<span class="sd">    .. attribute:: width</span>

<span class="sd">       The width of the game&#39;s display.</span>

<span class="sd">    .. attribute:: height</span>

<span class="sd">       The height of the game&#39;s display.</span>

<span class="sd">    .. attribute:: fullscreen</span>

<span class="sd">       Whether or not the game should be in fullscreen mode.</span>

<span class="sd">    .. attribute:: scale</span>

<span class="sd">       A number indicating a fixed scale factor (e.g. ``1`` for no</span>
<span class="sd">       scaling, ``2`` for doubled size).  If set to :const:`None` or</span>
<span class="sd">       ``0``, scaling is automatic (causes the game to fit the window or</span>
<span class="sd">       screen).</span>

<span class="sd">       If a fixed scale factor is defined and the game is in fullscreen</span>
<span class="sd">       mode, the scale factor multiplied by :attr:`width` and</span>
<span class="sd">       :attr:`height` is used to suggest what resolution to use.</span>

<span class="sd">    .. attribute:: scale_proportional</span>

<span class="sd">       If set to :const:`True`, scaling is always proportional.  If set</span>
<span class="sd">       to :const:`False`, the image will be distorted to completely fill</span>
<span class="sd">       the game window or screen.  This has no effect unless</span>
<span class="sd">       :attr:`scale` is :const:`None` or ``0``.</span>

<span class="sd">    .. attribute:: scale_method</span>

<span class="sd">       A string indicating the type of scaling method to use.  Can be</span>
<span class="sd">       one of the following:</span>

<span class="sd">       - ``&quot;noblur&quot;`` -- Request a non-blurry scale method, generally</span>
<span class="sd">         optimal for pixel art.</span>
<span class="sd">       - ``&quot;smooth&quot;`` -- Request a smooth scale method, generally</span>
<span class="sd">         optimal for images other than pixel art.</span>

<span class="sd">       Alternatively, this attribute can be set to one of the values in</span>
<span class="sd">       :data:`sge.SCALE_METHODS` to request an exact scale method to</span>
<span class="sd">       use.</span>

<span class="sd">       The value of this attribute is only a request.  If this value is</span>
<span class="sd">       either an unsupported value or :const:`None`, the fastest</span>
<span class="sd">       available scale method is chosen.</span>

<span class="sd">    .. attribute:: fps</span>

<span class="sd">       The rate the game should run in frames per second.</span>

<span class="sd">       .. note::</span>

<span class="sd">          This is only the maximum; if the computer is not fast enough,</span>
<span class="sd">          the game may run more slowly.</span>

<span class="sd">    .. attribute:: delta</span>

<span class="sd">       Whether or not delta timing should be used.  Delta timing affects</span>
<span class="sd">       object speeds, animation rates, and alarms.</span>

<span class="sd">    .. attribute:: delta_min</span>

<span class="sd">       Delta timing can cause the game to be choppy.  This attribute</span>
<span class="sd">       limits this by pretending that the frame rate is never lower than</span>
<span class="sd">       this amount, resulting in the game slowing down like normal if it</span>
<span class="sd">       is.</span>

<span class="sd">    .. attribute:: delta_max</span>

<span class="sd">       Indicates a higher frame rate cap than :attr:`fps` to allow the</span>
<span class="sd">       game to reach by using delta timing to slow object speeds,</span>
<span class="sd">       animation rates, and alarms down.  If set to :const:`None`, this</span>
<span class="sd">       feature is disabled and the game will not be permitted to run</span>
<span class="sd">       faster than :attr:`fps`.</span>

<span class="sd">       This attribute has no effect unless :attr:`delta` is</span>
<span class="sd">       :const:`True`.</span>

<span class="sd">    .. attribute:: grab_input</span>

<span class="sd">       Whether or not all input should be forcibly grabbed by the game.</span>
<span class="sd">       If this is :const:`True` and :attr:`sge.mouse.visible` is</span>
<span class="sd">       :const:`False`, the mouse will be in relative mode.  Otherwise,</span>
<span class="sd">       the mouse will be in absolute mode.</span>

<span class="sd">    .. attribute:: window_text</span>

<span class="sd">       The text for the OS to display as the window title, e.g. in the</span>
<span class="sd">       frame of the window.  If set to :const:`None`, the SGE chooses</span>
<span class="sd">       the text.</span>

<span class="sd">    .. attribute:: window_icon</span>

<span class="sd">       The path to the image file to use as the window icon.  If set</span>
<span class="sd">       to :const:`None`, the SGE chooses the icon.  If the file</span>
<span class="sd">       specified does not exist, :exc:`OSError` is raised.</span>

<span class="sd">    .. attribute:: collision_events_enabled</span>

<span class="sd">       Whether or not collision events should be executed.  Setting this</span>
<span class="sd">       to :const:`False` will improve performence if collision events</span>
<span class="sd">       are not needed.</span>

<span class="sd">    .. attribute:: alarms</span>

<span class="sd">       A dictionary containing the global alarms of the game.  Each</span>
<span class="sd">       value decreases by 1 each frame (adjusted for delta timing if it</span>
<span class="sd">       is enabled).  When a value is at or below 0,</span>
<span class="sd">       :meth:`sge.dsp.Game.event_alarm` is executed with ``alarm_id``</span>
<span class="sd">       set to the respective key, and the item is deleted from this</span>
<span class="sd">       dictionary.</span>

<span class="sd">    .. attribute:: input_events</span>

<span class="sd">       A list containing all input event objects which have not yet been</span>
<span class="sd">       handled, in the order in which they occurred.</span>

<span class="sd">       .. note::</span>

<span class="sd">          If you handle input events manually, be sure to delete them</span>
<span class="sd">          from this list, preferably by getting them with</span>
<span class="sd">          :meth:`list.pop`.  Otherwise, the event will be handled more</span>
<span class="sd">          than once, which is usually not what you want.</span>

<span class="sd">    .. attribute:: start_room</span>

<span class="sd">       The room which becomes active when the game first starts and when</span>
<span class="sd">       it restarts.  Must be set exactly once, before the game first</span>
<span class="sd">       starts, and should not be set again afterwards.</span>

<span class="sd">    .. attribute:: current_room</span>

<span class="sd">       The room which is currently active.  (Read-only)</span>

<span class="sd">    .. attribute:: mouse</span>

<span class="sd">       A :class:`sge.dsp.Object` object which represents the mouse</span>
<span class="sd">       cursor.  Its bounding box is a one-pixel square.  It is</span>
<span class="sd">       automatically added to every room&#39;s default list of objects.</span>

<span class="sd">       Some of this object&#39;s attributes control properties of the mouse.</span>
<span class="sd">       See the documentation for :mod:`sge.mouse` for more information.</span>

<span class="sd">       (Read-only)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">width</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">r</span><span class="o">.</span><span class="n">game_width</span>

    <span class="nd">@width.setter</span>
    <span class="k">def</span> <span class="nf">width</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">value</span> <span class="o">!=</span> <span class="n">r</span><span class="o">.</span><span class="n">game_width</span><span class="p">:</span>
            <span class="n">r</span><span class="o">.</span><span class="n">game_width</span> <span class="o">=</span> <span class="n">value</span>
            <span class="n">_set_mode</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">height</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">r</span><span class="o">.</span><span class="n">game_height</span>

    <span class="nd">@height.setter</span>
    <span class="k">def</span> <span class="nf">height</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">value</span> <span class="o">!=</span> <span class="n">r</span><span class="o">.</span><span class="n">game_height</span><span class="p">:</span>
            <span class="n">r</span><span class="o">.</span><span class="n">game_height</span> <span class="o">=</span> <span class="n">value</span>
            <span class="n">_set_mode</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">fullscreen</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">r</span><span class="o">.</span><span class="n">game_fullscreen</span>

    <span class="nd">@fullscreen.setter</span>
    <span class="k">def</span> <span class="nf">fullscreen</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">value</span> <span class="o">!=</span> <span class="n">r</span><span class="o">.</span><span class="n">game_fullscreen</span><span class="p">:</span>
            <span class="n">r</span><span class="o">.</span><span class="n">game_fullscreen</span> <span class="o">=</span> <span class="n">value</span>
            <span class="n">_set_mode</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">fullscreen</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">:</span>
                <span class="n">old_scale</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scale</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">scale</span> <span class="o">=</span> <span class="mi">1</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">scale</span> <span class="o">=</span> <span class="n">old_scale</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">scale</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">r</span><span class="o">.</span><span class="n">game_scale</span>

    <span class="nd">@scale.setter</span>
    <span class="k">def</span> <span class="nf">scale</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">value</span> <span class="o">!=</span> <span class="n">r</span><span class="o">.</span><span class="n">game_scale</span><span class="p">:</span>
            <span class="n">r</span><span class="o">.</span><span class="n">game_scale</span> <span class="o">=</span> <span class="n">value</span>
            <span class="n">_set_mode</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">scale_proportional</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">r</span><span class="o">.</span><span class="n">game_scale_proportional</span>

    <span class="nd">@scale_proportional.setter</span>
    <span class="k">def</span> <span class="nf">scale_proportional</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">value</span> <span class="o">!=</span> <span class="n">r</span><span class="o">.</span><span class="n">game_scale_proportional</span><span class="p">:</span>
            <span class="n">r</span><span class="o">.</span><span class="n">game_scale_proportional</span> <span class="o">=</span> <span class="n">value</span>
            <span class="n">_set_mode</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">scale_method</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">r</span><span class="o">.</span><span class="n">game_scale_method</span>

    <span class="nd">@scale_method.setter</span>
    <span class="k">def</span> <span class="nf">scale_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">value</span> <span class="o">!=</span> <span class="n">r</span><span class="o">.</span><span class="n">game_scale_method</span><span class="p">:</span>
            <span class="n">r</span><span class="o">.</span><span class="n">game_scale_method</span> <span class="o">=</span> <span class="n">value</span>
            <span class="n">_set_mode</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">grab_input</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">pygame</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">get_grab</span><span class="p">()</span>

    <span class="nd">@grab_input.setter</span>
    <span class="k">def</span> <span class="nf">grab_input</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="n">pygame</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">set_grab</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">window_text</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">get_caption</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>

    <span class="nd">@window_text.setter</span>
    <span class="k">def</span> <span class="nf">window_text</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">set_caption</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">window_icon</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">r</span><span class="o">.</span><span class="n">game_window_icon</span>

    <span class="nd">@window_icon.setter</span>
    <span class="k">def</span> <span class="nf">window_icon</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="n">r</span><span class="o">.</span><span class="n">game_window_icon</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">image</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="k">except</span> <span class="n">pygame</span><span class="o">.</span><span class="n">error</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">OSError</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">set_icon</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>

<div class="viewcode-block" id="Game.__init__"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Game.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">640</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">480</span><span class="p">,</span> <span class="n">fullscreen</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="n">scale_proportional</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">scale_method</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">fps</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span>
                 <span class="n">delta</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">delta_min</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">delta_max</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">grab_input</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                 <span class="n">window_text</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">window_icon</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="n">collision_events_enabled</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Arguments set the respective initial attributes of the game.</span>
<span class="sd">        See the documentation for :class:`sge.dsp.Game` for more</span>
<span class="sd">        information.</span>

<span class="sd">        The created :class:`sge.dsp.Game` object is automatically</span>
<span class="sd">        assigned to :data:`sge.game`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Settings use a smaller buffer size for less lag.</span>
        <span class="n">pygame</span><span class="o">.</span><span class="n">mixer</span><span class="o">.</span><span class="n">pre_init</span><span class="p">(</span><span class="mi">22050</span><span class="p">,</span> <span class="o">-</span><span class="mi">16</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1024</span><span class="p">)</span>
        <span class="n">pygame</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>

        <span class="n">pygame</span><span class="o">.</span><span class="n">mixer</span><span class="o">.</span><span class="n">music</span><span class="o">.</span><span class="n">set_endevent</span><span class="p">(</span><span class="n">sge</span><span class="o">.</span><span class="n">MUSIC_END_EVENT</span><span class="p">)</span>

        <span class="n">r</span><span class="o">.</span><span class="n">_display_info</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">Info</span><span class="p">()</span>

        <span class="n">sge</span><span class="o">.</span><span class="n">game</span> <span class="o">=</span> <span class="bp">self</span>

        <span class="n">r</span><span class="o">.</span><span class="n">game_width</span> <span class="o">=</span> <span class="n">width</span>
        <span class="n">r</span><span class="o">.</span><span class="n">game_height</span> <span class="o">=</span> <span class="n">height</span>
        <span class="n">r</span><span class="o">.</span><span class="n">game_window_width</span> <span class="o">=</span> <span class="n">width</span>
        <span class="n">r</span><span class="o">.</span><span class="n">game_window_height</span> <span class="o">=</span> <span class="n">height</span>
        <span class="n">r</span><span class="o">.</span><span class="n">game_fullscreen</span> <span class="o">=</span> <span class="n">fullscreen</span>
        <span class="n">r</span><span class="o">.</span><span class="n">game_scale</span> <span class="o">=</span> <span class="n">scale</span>
        <span class="n">r</span><span class="o">.</span><span class="n">game_scale_proportional</span> <span class="o">=</span> <span class="n">scale_proportional</span>
        <span class="n">r</span><span class="o">.</span><span class="n">game_scale_method</span> <span class="o">=</span> <span class="n">scale_method</span>
        <span class="n">r</span><span class="o">.</span><span class="n">game_new_room</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fps</span> <span class="o">=</span> <span class="n">fps</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">delta</span> <span class="o">=</span> <span class="n">delta</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">delta_min</span> <span class="o">=</span> <span class="n">delta_min</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">delta_max</span> <span class="o">=</span> <span class="n">delta_max</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">window_text</span> <span class="o">=</span> <span class="n">window_text</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">window_icon</span> <span class="o">=</span> <span class="n">window_icon</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">collision_events_enabled</span> <span class="o">=</span> <span class="n">collision_events_enabled</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">alarms</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">start_room</span> <span class="o">=</span> <span class="bp">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">input_events</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">current_room</span> <span class="o">=</span> <span class="bp">None</span>

        <span class="n">r</span><span class="o">.</span><span class="n">game_display_surface</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Surface</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span><span class="p">))</span>
        <span class="n">_set_mode</span><span class="p">()</span>

        <span class="n">r</span><span class="o">.</span><span class="n">music</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="n">r</span><span class="o">.</span><span class="n">music_queue</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">r</span><span class="o">.</span><span class="n">game_running</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="n">r</span><span class="o">.</span><span class="n">game_clock</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">Clock</span><span class="p">()</span>
        <span class="n">r</span><span class="o">.</span><span class="n">game_window_projections</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mouse</span> <span class="o">=</span> <span class="n">Mouse</span><span class="p">()</span>

        <span class="c1"># Setup sound channels</span>
        <span class="n">r</span><span class="o">.</span><span class="n">game_available_channels</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">pygame</span><span class="o">.</span><span class="n">mixer</span><span class="o">.</span><span class="n">get_init</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">six</span><span class="o">.</span><span class="n">moves</span><span class="o">.</span><span class="n">range</span><span class="p">(</span><span class="n">pygame</span><span class="o">.</span><span class="n">mixer</span><span class="o">.</span><span class="n">get_num_channels</span><span class="p">()):</span>
                <span class="n">r</span><span class="o">.</span><span class="n">game_available_channels</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pygame</span><span class="o">.</span><span class="n">mixer</span><span class="o">.</span><span class="n">Channel</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">w</span> <span class="o">=</span> <span class="s2">&quot;pygame.mixer module not initialized! Are you missing SDL_mixer?&quot;</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>

        <span class="c1"># Setup joysticks</span>
        <span class="n">sge</span><span class="o">.</span><span class="n">joystick</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">pygame</span><span class="o">.</span><span class="n">font</span><span class="o">.</span><span class="n">get_init</span><span class="p">():</span>
            <span class="n">w</span> <span class="o">=</span> <span class="s2">&quot;pygame.font module not initialized! Are you missing SDL_ttf?&quot;</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">window_icon</span> <span class="o">=</span> <span class="bp">None</span></div>

<div class="viewcode-block" id="Game.start"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Game.start">[docs]</a>    <span class="k">def</span> <span class="nf">start</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Start the game.  Should only be called once; the effect of any</span>
<span class="sd">        further calls is undefined.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">start_room</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">r</span><span class="o">.</span><span class="n">game_running</span> <span class="o">=</span> <span class="bp">True</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">start_room</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
            <span class="n">r</span><span class="o">.</span><span class="n">game_clock</span><span class="o">.</span><span class="n">tick</span><span class="p">()</span>

            <span class="k">while</span> <span class="n">r</span><span class="o">.</span><span class="n">game_running</span><span class="p">:</span>
                <span class="c1"># Switch to new room (if one has been started)</span>
                <span class="n">new_room</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">game_new_room</span>
                <span class="k">if</span> <span class="n">new_room</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                    <span class="n">r</span><span class="o">.</span><span class="n">game_new_room</span> <span class="o">=</span> <span class="bp">None</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">unpause</span><span class="p">()</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">current_room</span> <span class="o">=</span> <span class="n">new_room</span>

                    <span class="n">r</span><span class="o">.</span><span class="n">_colliders</span> <span class="o">=</span> <span class="p">[]</span>
                    <span class="n">r</span><span class="o">.</span><span class="n">_collision_checkers</span> <span class="o">=</span> <span class="p">[]</span>
                    <span class="n">r</span><span class="o">.</span><span class="n">_active_objects</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>

                    <span class="n">r_set_object_areas</span><span class="p">(</span><span class="n">new_room</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">new_room</span><span class="o">.</span><span class="n">objects</span><span class="p">:</span>
                        <span class="n">obj</span><span class="o">.</span><span class="n">rd</span><span class="p">[</span><span class="s2">&quot;object_areas&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
                        <span class="n">o_update_object_areas</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
                        <span class="n">o_update_collision_lists</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
                        <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">active</span><span class="p">:</span>
                            <span class="n">r</span><span class="o">.</span><span class="n">_active_objects</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>

                    <span class="c1"># This is stored in a variable to prevent problems</span>
                    <span class="c1"># with rd[&quot;started&quot;] being False during the</span>
                    <span class="c1"># start/create events.</span>
                    <span class="n">started</span> <span class="o">=</span> <span class="n">new_room</span><span class="o">.</span><span class="n">rd</span><span class="p">[</span><span class="s2">&quot;started&quot;</span><span class="p">]</span>
                    <span class="n">new_room</span><span class="o">.</span><span class="n">rd</span><span class="p">[</span><span class="s2">&quot;started&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">started</span><span class="p">:</span>
                        <span class="n">new_room</span><span class="o">.</span><span class="n">event_room_start</span><span class="p">()</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">new_room</span><span class="o">.</span><span class="n">event_room_resume</span><span class="p">()</span>

                    <span class="k">while</span> <span class="n">new_room</span><span class="o">.</span><span class="n">rd</span><span class="p">[</span><span class="s2">&quot;new_objects&quot;</span><span class="p">]:</span>
                        <span class="n">new_room</span><span class="o">.</span><span class="n">rd</span><span class="p">[</span><span class="s2">&quot;new_objects&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">event_create</span><span class="p">()</span>

                    <span class="c1"># Prevent sudden movements from happening at the</span>
                    <span class="c1"># start of a room due to delta timing, and make sure</span>
                    <span class="c1"># transitions happen fully.</span>
                    <span class="n">r</span><span class="o">.</span><span class="n">game_clock</span><span class="o">.</span><span class="n">tick</span><span class="p">()</span>

                <span class="c1"># Input events</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">pump_input</span><span class="p">()</span>
                <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">input_events</span><span class="p">:</span>
                    <span class="n">event</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">input_events</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="n">sge</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">KeyPress</span><span class="p">):</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">event_key_press</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">key</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">char</span><span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">current_room</span><span class="o">.</span><span class="n">event_key_press</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">key</span><span class="p">,</span>
                                                          <span class="n">event</span><span class="o">.</span><span class="n">char</span><span class="p">)</span>
                        <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">r</span><span class="o">.</span><span class="n">_active_objects</span><span class="o">.</span><span class="n">copy</span><span class="p">():</span>
                            <span class="n">obj</span><span class="o">.</span><span class="n">event_key_press</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">key</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">char</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="n">sge</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">KeyRelease</span><span class="p">):</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">event_key_release</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">key</span><span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">current_room</span><span class="o">.</span><span class="n">event_key_release</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">key</span><span class="p">)</span>
                        <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">r</span><span class="o">.</span><span class="n">_active_objects</span><span class="o">.</span><span class="n">copy</span><span class="p">():</span>
                            <span class="n">obj</span><span class="o">.</span><span class="n">event_key_release</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">key</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="n">sge</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">MouseMove</span><span class="p">):</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">event_mouse_move</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">current_room</span><span class="o">.</span><span class="n">event_mouse_move</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
                        <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">r</span><span class="o">.</span><span class="n">_active_objects</span><span class="o">.</span><span class="n">copy</span><span class="p">():</span>
                            <span class="n">obj</span><span class="o">.</span><span class="n">event_mouse_move</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="n">sge</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">MouseButtonPress</span><span class="p">):</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">event_mouse_button_press</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">button</span><span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">current_room</span><span class="o">.</span><span class="n">event_mouse_button_press</span><span class="p">(</span>
                            <span class="n">event</span><span class="o">.</span><span class="n">button</span><span class="p">)</span>
                        <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">r</span><span class="o">.</span><span class="n">_active_objects</span><span class="o">.</span><span class="n">copy</span><span class="p">():</span>
                            <span class="n">obj</span><span class="o">.</span><span class="n">event_mouse_button_press</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">button</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="n">sge</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">MouseButtonRelease</span><span class="p">):</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">event_mouse_button_release</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">button</span><span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">current_room</span><span class="o">.</span><span class="n">event_mouse_button_release</span><span class="p">(</span>
                            <span class="n">event</span><span class="o">.</span><span class="n">button</span><span class="p">)</span>
                        <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">r</span><span class="o">.</span><span class="n">_active_objects</span><span class="o">.</span><span class="n">copy</span><span class="p">():</span>
                            <span class="n">obj</span><span class="o">.</span><span class="n">event_mouse_button_release</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">button</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="n">sge</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">JoystickAxisMove</span><span class="p">):</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">event_joystick_axis_move</span><span class="p">(</span>
                            <span class="n">event</span><span class="o">.</span><span class="n">js_name</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">js_id</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">axis</span><span class="p">,</span>
                            <span class="n">event</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">current_room</span><span class="o">.</span><span class="n">event_joystick_axis_move</span><span class="p">(</span>
                            <span class="n">event</span><span class="o">.</span><span class="n">js_name</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">js_id</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">axis</span><span class="p">,</span>
                            <span class="n">event</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
                        <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">r</span><span class="o">.</span><span class="n">_active_objects</span><span class="o">.</span><span class="n">copy</span><span class="p">():</span>
                            <span class="n">obj</span><span class="o">.</span><span class="n">event_joystick_axis_move</span><span class="p">(</span>
                                <span class="n">event</span><span class="o">.</span><span class="n">js_name</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">js_id</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">axis</span><span class="p">,</span>
                                <span class="n">event</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="n">sge</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">JoystickHatMove</span><span class="p">):</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">event_joystick_hat_move</span><span class="p">(</span>
                            <span class="n">event</span><span class="o">.</span><span class="n">js_name</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">js_id</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">hat</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">x</span><span class="p">,</span>
                            <span class="n">event</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">current_room</span><span class="o">.</span><span class="n">event_joystick_hat_move</span><span class="p">(</span>
                            <span class="n">event</span><span class="o">.</span><span class="n">js_name</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">js_id</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">hat</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">x</span><span class="p">,</span>
                            <span class="n">event</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
                        <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">r</span><span class="o">.</span><span class="n">_active_objects</span><span class="o">.</span><span class="n">copy</span><span class="p">():</span>
                            <span class="n">obj</span><span class="o">.</span><span class="n">event_joystick_hat_move</span><span class="p">(</span>
                                <span class="n">event</span><span class="o">.</span><span class="n">js_name</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">js_id</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">hat</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">x</span><span class="p">,</span>
                                <span class="n">event</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="n">sge</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">JoystickTrackballMove</span><span class="p">):</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">event_joystick_trackball_move</span><span class="p">(</span>
                            <span class="n">event</span><span class="o">.</span><span class="n">js_name</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">js_id</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">ball</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">x</span><span class="p">,</span>
                            <span class="n">event</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">current_room</span><span class="o">.</span><span class="n">event_joystick_trackball_move</span><span class="p">(</span>
                            <span class="n">event</span><span class="o">.</span><span class="n">js_name</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">js_id</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">ball</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">x</span><span class="p">,</span>
                            <span class="n">event</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
                        <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">r</span><span class="o">.</span><span class="n">_active_objects</span><span class="o">.</span><span class="n">copy</span><span class="p">():</span>
                            <span class="n">obj</span><span class="o">.</span><span class="n">event_joystick_trackball_move</span><span class="p">(</span>
                                <span class="n">event</span><span class="o">.</span><span class="n">js_name</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">js_id</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">ball</span><span class="p">,</span>
                                <span class="n">event</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="n">sge</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">JoystickButtonPress</span><span class="p">):</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">event_joystick_button_press</span><span class="p">(</span>
                            <span class="n">event</span><span class="o">.</span><span class="n">js_name</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">js_id</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">button</span><span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">current_room</span><span class="o">.</span><span class="n">event_joystick_button_press</span><span class="p">(</span>
                            <span class="n">event</span><span class="o">.</span><span class="n">js_name</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">js_id</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">button</span><span class="p">)</span>
                        <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">r</span><span class="o">.</span><span class="n">_active_objects</span><span class="o">.</span><span class="n">copy</span><span class="p">():</span>
                            <span class="n">obj</span><span class="o">.</span><span class="n">event_joystick_button_press</span><span class="p">(</span>
                                <span class="n">event</span><span class="o">.</span><span class="n">js_name</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">js_id</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">button</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="n">sge</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">JoystickButtonRelease</span><span class="p">):</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">event_joystick_button_release</span><span class="p">(</span>
                            <span class="n">event</span><span class="o">.</span><span class="n">js_name</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">js_id</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">button</span><span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">current_room</span><span class="o">.</span><span class="n">event_joystick_button_release</span><span class="p">(</span>
                            <span class="n">event</span><span class="o">.</span><span class="n">js_name</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">js_id</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">button</span><span class="p">)</span>
                        <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">r</span><span class="o">.</span><span class="n">_active_objects</span><span class="o">.</span><span class="n">copy</span><span class="p">():</span>
                            <span class="n">obj</span><span class="o">.</span><span class="n">event_joystick_button_release</span><span class="p">(</span>
                                <span class="n">event</span><span class="o">.</span><span class="n">js_name</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">js_id</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">button</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="n">sge</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">JoystickEvent</span><span class="p">):</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">event_joystick</span><span class="p">(</span>
                            <span class="n">event</span><span class="o">.</span><span class="n">js_name</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">js_id</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">input_type</span><span class="p">,</span>
                            <span class="n">event</span><span class="o">.</span><span class="n">input_id</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">current_room</span><span class="o">.</span><span class="n">event_joystick</span><span class="p">(</span>
                            <span class="n">event</span><span class="o">.</span><span class="n">js_name</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">js_id</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">input_type</span><span class="p">,</span>
                            <span class="n">event</span><span class="o">.</span><span class="n">input_id</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
                        <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">r</span><span class="o">.</span><span class="n">_active_objects</span><span class="o">.</span><span class="n">copy</span><span class="p">():</span>
                            <span class="n">obj</span><span class="o">.</span><span class="n">event_joystick</span><span class="p">(</span>
                                <span class="n">event</span><span class="o">.</span><span class="n">js_name</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">js_id</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">input_type</span><span class="p">,</span>
                                <span class="n">event</span><span class="o">.</span><span class="n">input_id</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="n">sge</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">KeyboardFocusGain</span><span class="p">):</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">event_gain_keyboard_focus</span><span class="p">()</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">current_room</span><span class="o">.</span><span class="n">event_gain_keyboard_focus</span><span class="p">()</span>
                    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="n">sge</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">KeyboardFocusLose</span><span class="p">):</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">event_lose_keyboard_focus</span><span class="p">()</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">current_room</span><span class="o">.</span><span class="n">event_lose_keyboard_focus</span><span class="p">()</span>
                    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="n">sge</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">MouseFocusGain</span><span class="p">):</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">event_gain_mouse_focus</span><span class="p">()</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">current_room</span><span class="o">.</span><span class="n">event_gain_mouse_focus</span><span class="p">()</span>
                    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="n">sge</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">MouseFocusLose</span><span class="p">):</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">event_lose_mouse_focus</span><span class="p">()</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">current_room</span><span class="o">.</span><span class="n">event_lose_mouse_focus</span><span class="p">()</span>
                    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="n">sge</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">QuitRequest</span><span class="p">):</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">current_room</span><span class="o">.</span><span class="n">event_close</span><span class="p">()</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">event_close</span><span class="p">()</span>

                <span class="c1"># Regulate speed</span>
                <span class="n">real_time_passed</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">regulate_speed</span><span class="p">()</span>

                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">delta</span><span class="p">:</span>
                    <span class="n">time_passed</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">real_time_passed</span><span class="p">,</span> <span class="mi">1000</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">delta_min</span><span class="p">)</span>
                    <span class="n">delta_mult</span> <span class="o">=</span> <span class="n">time_passed</span> <span class="o">/</span> <span class="p">(</span><span class="mi">1000</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">fps</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">time_passed</span> <span class="o">=</span> <span class="mi">1000</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">fps</span>
                    <span class="n">delta_mult</span> <span class="o">=</span> <span class="mi">1</span>

                <span class="c1"># Alarms</span>
                <span class="n">activated_alarms</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">alarms</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">alarms</span><span class="p">[</span><span class="n">a</span><span class="p">]</span> <span class="o">-=</span> <span class="n">delta_mult</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">alarms</span><span class="p">[</span><span class="n">a</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="n">activated_alarms</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">activated_alarms</span><span class="p">:</span>
                    <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">alarms</span><span class="p">[</span><span class="n">a</span><span class="p">]</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">event_alarm</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>

                <span class="n">activated_alarms</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_room</span><span class="o">.</span><span class="n">alarms</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">current_room</span><span class="o">.</span><span class="n">alarms</span><span class="p">[</span><span class="n">a</span><span class="p">]</span> <span class="o">-=</span> <span class="n">delta_mult</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_room</span><span class="o">.</span><span class="n">alarms</span><span class="p">[</span><span class="n">a</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="n">activated_alarms</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">activated_alarms</span><span class="p">:</span>
                    <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_room</span><span class="o">.</span><span class="n">alarms</span><span class="p">[</span><span class="n">a</span><span class="p">]</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">current_room</span><span class="o">.</span><span class="n">event_alarm</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>

                <span class="c1"># Step events</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">event_step</span><span class="p">(</span><span class="n">real_time_passed</span><span class="p">,</span> <span class="n">delta_mult</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">current_room</span><span class="o">.</span><span class="n">event_step</span><span class="p">(</span><span class="n">real_time_passed</span><span class="p">,</span> <span class="n">delta_mult</span><span class="p">)</span>

                <span class="c1"># Update background layers</span>
                <span class="k">for</span> <span class="n">layer</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_room</span><span class="o">.</span><span class="n">background</span><span class="o">.</span><span class="n">layers</span><span class="p">:</span>
                    <span class="n">bl_update</span><span class="p">(</span><span class="n">layer</span><span class="p">,</span> <span class="n">time_passed</span><span class="p">)</span>

                <span class="c1"># Update objects (including mouse)</span>
                <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">r</span><span class="o">.</span><span class="n">_active_objects</span><span class="o">.</span><span class="n">copy</span><span class="p">():</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">event_begin_step</span><span class="p">(</span><span class="n">real_time_passed</span><span class="p">,</span> <span class="n">delta_mult</span><span class="p">)</span>
                    <span class="n">o_update</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">time_passed</span><span class="p">,</span> <span class="n">delta_mult</span><span class="p">)</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">event_step</span><span class="p">(</span><span class="n">real_time_passed</span><span class="p">,</span> <span class="n">delta_mult</span><span class="p">)</span>

                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">collision_events_enabled</span><span class="p">:</span>
                    <span class="c1"># Set objects&#39; colliders</span>
                    <span class="n">room</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_room</span>
                    <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">r</span><span class="o">.</span><span class="n">_colliders</span><span class="p">:</span>
                        <span class="n">obj</span><span class="o">.</span><span class="n">rd</span><span class="p">[</span><span class="s2">&quot;colliders&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
                        <span class="k">for</span> <span class="n">area</span> <span class="ow">in</span> <span class="n">obj</span><span class="o">.</span><span class="n">rd</span><span class="p">[</span><span class="s2">&quot;object_areas&quot;</span><span class="p">]:</span>
                            <span class="k">if</span> <span class="n">area</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                                <span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="o">=</span> <span class="n">area</span>
                                <span class="n">room_area</span> <span class="o">=</span> <span class="n">room</span><span class="o">.</span><span class="n">object_areas</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">room_area</span> <span class="o">=</span> <span class="n">room</span><span class="o">.</span><span class="n">object_area_void</span>

                            <span class="k">for</span> <span class="n">other</span> <span class="ow">in</span> <span class="n">room_area</span><span class="p">:</span>
                                <span class="k">if</span> <span class="p">(</span><span class="n">other</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">obj</span> <span class="ow">and</span> <span class="n">other</span><span class="o">.</span><span class="n">tangible</span> <span class="ow">and</span>
                                        <span class="n">other</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">obj</span><span class="o">.</span><span class="n">rd</span><span class="p">[</span><span class="s2">&quot;colliders&quot;</span><span class="p">]):</span>
                                    <span class="n">obj</span><span class="o">.</span><span class="n">rd</span><span class="p">[</span><span class="s2">&quot;colliders&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>

                    <span class="c1"># Detect collisions</span>
                    <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">r</span><span class="o">.</span><span class="n">_collision_checkers</span><span class="p">:</span>
                        <span class="n">o_detect_collisions</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>

                <span class="c1"># End step event</span>
                <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">r</span><span class="o">.</span><span class="n">_active_objects</span><span class="o">.</span><span class="n">copy</span><span class="p">():</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">event_end_step</span><span class="p">(</span><span class="n">real_time_passed</span><span class="p">,</span> <span class="n">delta_mult</span><span class="p">)</span>

                <span class="c1"># Set xprevious and yprevious</span>
                <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_room</span><span class="o">.</span><span class="n">objects</span><span class="p">:</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">xprevious</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">x</span>
                    <span class="n">obj</span><span class="o">.</span><span class="n">yprevious</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">y</span>

                <span class="c1"># Transition</span>
                <span class="n">rd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_room</span><span class="o">.</span><span class="n">rd</span>
                <span class="k">if</span> <span class="n">rd</span><span class="p">[</span><span class="s2">&quot;t_update&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                    <span class="n">rd</span><span class="p">[</span><span class="s2">&quot;t_time_passed&quot;</span><span class="p">]</span> <span class="o">+=</span> <span class="n">real_time_passed</span>

                    <span class="k">if</span> <span class="n">rd</span><span class="p">[</span><span class="s2">&quot;t_time_passed&quot;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">rd</span><span class="p">[</span><span class="s2">&quot;t_duration&quot;</span><span class="p">]:</span>
                        <span class="n">complete</span> <span class="o">=</span> <span class="n">rd</span><span class="p">[</span><span class="s2">&quot;t_time_passed&quot;</span><span class="p">]</span> <span class="o">/</span> <span class="n">rd</span><span class="p">[</span><span class="s2">&quot;t_duration&quot;</span><span class="p">]</span>
                        <span class="n">rd</span><span class="p">[</span><span class="s2">&quot;t_update&quot;</span><span class="p">](</span><span class="bp">self</span><span class="o">.</span><span class="n">current_room</span><span class="p">,</span> <span class="n">complete</span><span class="p">)</span>
                        <span class="n">rd</span><span class="p">[</span><span class="s2">&quot;t_complete_last&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">complete</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">project_sprite</span><span class="p">(</span><span class="n">rd</span><span class="p">[</span><span class="s2">&quot;t_sprite&quot;</span><span class="p">],</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">rd</span><span class="p">[</span><span class="s2">&quot;t_update&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span>

                <span class="c1"># Refresh</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">pygame</span><span class="o">.</span><span class="n">quit</span><span class="p">()</span>
                <span class="n">sge</span><span class="o">.</span><span class="n">game</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="s2">&quot;sge.game.start_room is undefined.&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Game.end"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Game.end">[docs]</a>    <span class="k">def</span> <span class="nf">end</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Properly end the game.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_room</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">current_room</span><span class="o">.</span><span class="n">event_room_end</span><span class="p">()</span>
        <span class="n">r</span><span class="o">.</span><span class="n">game_running</span> <span class="o">=</span> <span class="bp">False</span></div>

<div class="viewcode-block" id="Game.pause"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Game.pause">[docs]</a>    <span class="k">def</span> <span class="nf">pause</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sprite</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Pause the game.</span>

<span class="sd">        Arguments:</span>

<span class="sd">        - ``sprite`` -- The sprite to show in the center of the screen</span>
<span class="sd">          while the game is paused.  If set to :const:`None`, the SGE</span>
<span class="sd">          chooses the image.</span>

<span class="sd">        Normal events are not executed while the game is paused.</span>
<span class="sd">        Instead, events with the same name, but prefixed with</span>
<span class="sd">        ``event_paused_`` instead of ``event_`` are executed.  Note that</span>
<span class="sd">        not all events have these alternative &quot;paused&quot; events associated</span>
<span class="sd">        with them.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">sprite</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">font</span> <span class="o">=</span> <span class="n">gfx</span><span class="o">.</span><span class="n">Font</span><span class="p">(</span><span class="s2">&quot;Droid Sans&quot;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">64</span><span class="p">)</span>
            <span class="n">sprite</span> <span class="o">=</span> <span class="n">gfx</span><span class="o">.</span><span class="n">Sprite</span><span class="o">.</span><span class="n">from_text</span><span class="p">(</span><span class="n">font</span><span class="p">,</span> <span class="s2">&quot;Paused&quot;</span><span class="p">)</span>

        <span class="n">r</span><span class="o">.</span><span class="n">game_paused</span> <span class="o">=</span> <span class="bp">True</span>

        <span class="k">while</span> <span class="n">r</span><span class="o">.</span><span class="n">game_paused</span> <span class="ow">and</span> <span class="n">r</span><span class="o">.</span><span class="n">game_running</span><span class="p">:</span>
            <span class="c1"># Input events</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pump_input</span><span class="p">()</span>
            <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">input_events</span><span class="p">:</span>
                <span class="n">event</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">input_events</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="n">sge</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">KeyPress</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">event_paused_key_press</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">key</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">char</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">current_room</span><span class="o">.</span><span class="n">event_paused_key_press</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">key</span><span class="p">,</span>
                                                             <span class="n">event</span><span class="o">.</span><span class="n">char</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_room</span><span class="o">.</span><span class="n">objects</span><span class="p">:</span>
                        <span class="n">obj</span><span class="o">.</span><span class="n">event_paused_key_press</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">key</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">char</span><span class="p">)</span>
                <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="n">sge</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">KeyRelease</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">event_paused_key_release</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">key</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">current_room</span><span class="o">.</span><span class="n">event_paused_key_release</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">key</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_room</span><span class="o">.</span><span class="n">objects</span><span class="p">:</span>
                        <span class="n">obj</span><span class="o">.</span><span class="n">event_paused_key_release</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">key</span><span class="p">)</span>
                <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="n">sge</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">MouseMove</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">event_paused_mouse_move</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">current_room</span><span class="o">.</span><span class="n">event_paused_mouse_move</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_room</span><span class="o">.</span><span class="n">objects</span><span class="p">:</span>
                        <span class="n">obj</span><span class="o">.</span><span class="n">event_paused_mouse_move</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
                <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="n">sge</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">MouseButtonPress</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">event_paused_mouse_button_press</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">button</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">current_room</span><span class="o">.</span><span class="n">event_paused_mouse_button_press</span><span class="p">(</span>
                        <span class="n">event</span><span class="o">.</span><span class="n">button</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_room</span><span class="o">.</span><span class="n">objects</span><span class="p">:</span>
                        <span class="n">obj</span><span class="o">.</span><span class="n">event_paused_mouse_button_press</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">button</span><span class="p">)</span>
                <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="n">sge</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">MouseButtonRelease</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">event_paused_mouse_button_release</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">button</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">current_room</span><span class="o">.</span><span class="n">event_paused_mouse_button_release</span><span class="p">(</span>
                        <span class="n">event</span><span class="o">.</span><span class="n">button</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_room</span><span class="o">.</span><span class="n">objects</span><span class="p">:</span>
                        <span class="n">obj</span><span class="o">.</span><span class="n">event_paused_mouse_button_release</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">button</span><span class="p">)</span>
                <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="n">sge</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">JoystickAxisMove</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">event_paused_joystick_axis_move</span><span class="p">(</span>
                        <span class="n">event</span><span class="o">.</span><span class="n">js_name</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">js_id</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">axis</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">current_room</span><span class="o">.</span><span class="n">event_paused_joystick_axis_move</span><span class="p">(</span>
                        <span class="n">event</span><span class="o">.</span><span class="n">js_name</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">js_id</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">axis</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_room</span><span class="o">.</span><span class="n">objects</span><span class="p">:</span>
                        <span class="n">obj</span><span class="o">.</span><span class="n">event_paused_joystick_axis_move</span><span class="p">(</span>
                            <span class="n">event</span><span class="o">.</span><span class="n">js_name</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">js_id</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">axis</span><span class="p">,</span>
                            <span class="n">event</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
                <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="n">sge</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">JoystickHatMove</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">event_paused_joystick_hat_move</span><span class="p">(</span>
                        <span class="n">event</span><span class="o">.</span><span class="n">js_name</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">js_id</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">hat</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">x</span><span class="p">,</span>
                        <span class="n">event</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">current_room</span><span class="o">.</span><span class="n">event_paused_joystick_hat_move</span><span class="p">(</span>
                        <span class="n">event</span><span class="o">.</span><span class="n">js_name</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">js_id</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">hat</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">x</span><span class="p">,</span>
                        <span class="n">event</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_room</span><span class="o">.</span><span class="n">objects</span><span class="p">:</span>
                        <span class="n">obj</span><span class="o">.</span><span class="n">event_paused_joystick_hat_move</span><span class="p">(</span>
                            <span class="n">event</span><span class="o">.</span><span class="n">js_name</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">js_id</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">hat</span><span class="p">,</span>
                            <span class="n">event</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
                <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="n">sge</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">JoystickTrackballMove</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">event_paused_joystick_trackball_move</span><span class="p">(</span>
                        <span class="n">event</span><span class="o">.</span><span class="n">js_name</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">js_id</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">ball</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">x</span><span class="p">,</span>
                        <span class="n">event</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">current_room</span><span class="o">.</span><span class="n">event_paused_joystick_trackball_move</span><span class="p">(</span>
                        <span class="n">event</span><span class="o">.</span><span class="n">js_name</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">js_id</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">ball</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">x</span><span class="p">,</span>
                        <span class="n">event</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_room</span><span class="o">.</span><span class="n">objects</span><span class="p">:</span>
                        <span class="n">obj</span><span class="o">.</span><span class="n">event_paused_joystick_trackball_move</span><span class="p">(</span>
                            <span class="n">event</span><span class="o">.</span><span class="n">js_name</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">js_id</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">ball</span><span class="p">,</span>
                            <span class="n">event</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
                <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="n">sge</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">JoystickButtonPress</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">event_paused_joystick_button_press</span><span class="p">(</span>
                        <span class="n">event</span><span class="o">.</span><span class="n">js_name</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">js_id</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">button</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">current_room</span><span class="o">.</span><span class="n">event_paused_joystick_button_press</span><span class="p">(</span>
                        <span class="n">event</span><span class="o">.</span><span class="n">js_name</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">js_id</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">button</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_room</span><span class="o">.</span><span class="n">objects</span><span class="p">:</span>
                        <span class="n">obj</span><span class="o">.</span><span class="n">event_paused_joystick_button_press</span><span class="p">(</span>
                            <span class="n">event</span><span class="o">.</span><span class="n">js_name</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">js_id</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">button</span><span class="p">)</span>
                <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="n">sge</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">JoystickButtonRelease</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">event_paused_joystick_button_release</span><span class="p">(</span>
                        <span class="n">event</span><span class="o">.</span><span class="n">js_name</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">js_id</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">button</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">current_room</span><span class="o">.</span><span class="n">event_paused_joystick_button_release</span><span class="p">(</span>
                        <span class="n">event</span><span class="o">.</span><span class="n">js_name</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">js_id</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">button</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_room</span><span class="o">.</span><span class="n">objects</span><span class="p">:</span>
                        <span class="n">obj</span><span class="o">.</span><span class="n">event_paused_joystick_button_release</span><span class="p">(</span>
                            <span class="n">event</span><span class="o">.</span><span class="n">js_name</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">js_id</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">button</span><span class="p">)</span>
                <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="n">sge</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">JoystickEvent</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">event_paused_joystick</span><span class="p">(</span>
                        <span class="n">event</span><span class="o">.</span><span class="n">js_name</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">js_id</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">input_type</span><span class="p">,</span>
                        <span class="n">event</span><span class="o">.</span><span class="n">input_id</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">current_room</span><span class="o">.</span><span class="n">event_paused_joystick</span><span class="p">(</span>
                        <span class="n">event</span><span class="o">.</span><span class="n">js_name</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">js_id</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">input_type</span><span class="p">,</span>
                        <span class="n">event</span><span class="o">.</span><span class="n">input_id</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">r</span><span class="o">.</span><span class="n">_active_objects</span><span class="o">.</span><span class="n">copy</span><span class="p">():</span>
                        <span class="n">obj</span><span class="o">.</span><span class="n">event_paused_joystick</span><span class="p">(</span>
                            <span class="n">event</span><span class="o">.</span><span class="n">js_name</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">js_id</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">input_type</span><span class="p">,</span>
                            <span class="n">event</span><span class="o">.</span><span class="n">input_id</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
                <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="n">sge</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">KeyboardFocusGain</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">event_paused_gain_keyboard_focus</span><span class="p">()</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">current_room</span><span class="o">.</span><span class="n">event_paused_gain_keyboard_focus</span><span class="p">()</span>
                <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="n">sge</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">KeyboardFocusLose</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">event_paused_lose_keyboard_focus</span><span class="p">()</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">current_room</span><span class="o">.</span><span class="n">event_paused_lose_keyboard_focus</span><span class="p">()</span>
                <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="n">sge</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">MouseFocusGain</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">event_paused_gain_mouse_focus</span><span class="p">()</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">current_room</span><span class="o">.</span><span class="n">event_paused_gain_mouse_focus</span><span class="p">()</span>
                <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="n">sge</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">MouseFocusLose</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">event_paused_lose_mouse_focus</span><span class="p">()</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">current_room</span><span class="o">.</span><span class="n">event_paused_lose_mouse_focus</span><span class="p">()</span>
                <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="n">sge</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">QuitRequest</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">current_room</span><span class="o">.</span><span class="n">event_paused_close</span><span class="p">()</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">event_paused_close</span><span class="p">()</span>

            <span class="c1"># Regulate speed</span>
            <span class="n">time_passed</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">regulate_speed</span><span class="p">()</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">delta</span><span class="p">:</span>
                <span class="n">t</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">time_passed</span><span class="p">,</span> <span class="mi">1000</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">delta_min</span><span class="p">)</span>
                <span class="n">delta_mult</span> <span class="o">=</span> <span class="n">t</span> <span class="o">/</span> <span class="p">(</span><span class="mi">1000</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">fps</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">delta_mult</span> <span class="o">=</span> <span class="mi">1</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">event_paused_step</span><span class="p">(</span><span class="n">time_passed</span><span class="p">,</span> <span class="n">delta_mult</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">current_room</span><span class="o">.</span><span class="n">event_paused_step</span><span class="p">(</span><span class="n">time_passed</span><span class="p">,</span> <span class="n">delta_mult</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_room</span><span class="o">.</span><span class="n">objects</span><span class="p">[:]:</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">event_paused_step</span><span class="p">(</span><span class="n">time_passed</span><span class="p">,</span> <span class="n">delta_mult</span><span class="p">)</span>

            <span class="c1"># Project sprite</span>
            <span class="n">x</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">-</span> <span class="n">sprite</span><span class="o">.</span><span class="n">width</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span>
            <span class="n">y</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">-</span> <span class="n">sprite</span><span class="o">.</span><span class="n">height</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">project_sprite</span><span class="p">(</span><span class="n">sprite</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>

            <span class="c1"># Refresh</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">pump_input</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">input_events</span> <span class="o">=</span> <span class="p">[]</span></div>

<div class="viewcode-block" id="Game.unpause"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Game.unpause">[docs]</a>    <span class="k">def</span> <span class="nf">unpause</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Unpause the game.&quot;&quot;&quot;</span>
        <span class="n">r</span><span class="o">.</span><span class="n">game_paused</span> <span class="o">=</span> <span class="bp">False</span></div>

<div class="viewcode-block" id="Game.pump_input"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Game.pump_input">[docs]</a>    <span class="k">def</span> <span class="nf">pump_input</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Cause the SGE to recieve input from the OS.</span>

<span class="sd">        This method needs to be called periodically for the SGE to</span>
<span class="sd">        recieve events from the OS, such as key presses and mouse</span>
<span class="sd">        movement, as well as to assure the OS that the program is not</span>
<span class="sd">        locked up.</span>

<span class="sd">        Upon calling this, each event is translated into the appropriate</span>
<span class="sd">        class in :mod:`sge.input` and the resulting object is appended</span>
<span class="sd">        to :attr:`input_events`.</span>

<span class="sd">        You normally don&#39;t need to use this function directly.  It is</span>
<span class="sd">        called automatically in each frame of the SGE&#39;s main loop.  You</span>
<span class="sd">        only need to use this function directly if you take control away</span>
<span class="sd">        from the SGE&#39;s main loop, e.g. to create your own loop.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">event</span> <span class="ow">in</span> <span class="n">pygame</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">get</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">pygame</span><span class="o">.</span><span class="n">KEYDOWN</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">k</span> <span class="o">=</span> <span class="n">sge</span><span class="o">.</span><span class="n">KEY_NAMES</span><span class="p">[</span><span class="n">event</span><span class="o">.</span><span class="n">key</span><span class="p">]</span>
                <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                    <span class="n">k</span> <span class="o">=</span> <span class="s2">&quot;undef_{}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">key</span><span class="p">)</span>

                <span class="n">input_event</span> <span class="o">=</span> <span class="n">sge</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">KeyPress</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">unicode</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">input_events</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">input_event</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">pygame</span><span class="o">.</span><span class="n">KEYUP</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">k</span> <span class="o">=</span> <span class="n">sge</span><span class="o">.</span><span class="n">KEY_NAMES</span><span class="p">[</span><span class="n">event</span><span class="o">.</span><span class="n">key</span><span class="p">]</span>
                <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                    <span class="n">k</span> <span class="o">=</span> <span class="s2">&quot;undef_{}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">key</span><span class="p">)</span>

                <span class="n">input_event</span> <span class="o">=</span> <span class="n">sge</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">KeyRelease</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">input_events</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">input_event</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">pygame</span><span class="o">.</span><span class="n">MOUSEMOTION</span><span class="p">:</span>
                <span class="n">input_event</span> <span class="o">=</span> <span class="n">sge</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">MouseMove</span><span class="p">(</span><span class="o">*</span><span class="n">event</span><span class="o">.</span><span class="n">rel</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">input_events</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">input_event</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">pygame</span><span class="o">.</span><span class="n">MOUSEBUTTONDOWN</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">b</span> <span class="o">=</span> <span class="n">sge</span><span class="o">.</span><span class="n">MOUSE_BUTTON_NAMES</span><span class="p">[</span><span class="n">event</span><span class="o">.</span><span class="n">button</span><span class="p">]</span>
                <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                    <span class="n">w</span> <span class="o">=</span> <span class="s2">&quot;Don&#39;t know how to handle mouse button {}.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                        <span class="n">event</span><span class="o">.</span><span class="n">button</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">input_event</span> <span class="o">=</span> <span class="n">sge</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">MouseButtonPress</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">input_events</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">input_event</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">pygame</span><span class="o">.</span><span class="n">MOUSEBUTTONUP</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">b</span> <span class="o">=</span> <span class="n">sge</span><span class="o">.</span><span class="n">MOUSE_BUTTON_NAMES</span><span class="p">[</span><span class="n">event</span><span class="o">.</span><span class="n">button</span><span class="p">]</span>
                <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                    <span class="n">w</span> <span class="o">=</span> <span class="s2">&quot;Don&#39;t know how to handle mouse button {}.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                        <span class="n">event</span><span class="o">.</span><span class="n">button</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">input_event</span> <span class="o">=</span> <span class="n">sge</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">MouseButtonRelease</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">input_events</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">input_event</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">pygame</span><span class="o">.</span><span class="n">JOYAXISMOTION</span><span class="p">:</span>
                <span class="n">jsname</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">game_js_names</span><span class="p">[</span><span class="n">event</span><span class="o">.</span><span class="n">joy</span><span class="p">]</span>
                <span class="n">value</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">))</span>
                <span class="n">a</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">value</span><span class="p">))</span>
                <span class="n">b</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
                <span class="n">z</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="nb">abs</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

                <span class="n">axis_id</span> <span class="o">=</span> <span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">joy</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">axis</span><span class="p">)</span>
                <span class="n">valuep</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">_prev_axes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">axis_id</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
                <span class="n">r</span><span class="o">.</span><span class="n">_prev_axes</span><span class="p">[</span><span class="n">axis_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
                <span class="n">ap</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">valuep</span><span class="p">))</span>
                <span class="n">bp</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">valuep</span><span class="p">)</span>
                <span class="n">zp</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="nb">abs</span><span class="p">(</span><span class="n">valuep</span><span class="p">)</span>

                <span class="n">input_event</span> <span class="o">=</span> <span class="n">sge</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">JoystickAxisMove</span><span class="p">(</span>
                    <span class="n">jsname</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">joy</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">axis</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">input_events</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">input_event</span><span class="p">)</span>

                <span class="k">if</span> <span class="n">a</span> <span class="o">!=</span> <span class="n">ap</span><span class="p">:</span>
                    <span class="n">input_event</span> <span class="o">=</span> <span class="n">sge</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">JoystickEvent</span><span class="p">(</span>
                        <span class="n">jsname</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">joy</span><span class="p">,</span> <span class="s2">&quot;axis-&quot;</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">axis</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">input_events</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">input_event</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">b</span> <span class="o">!=</span> <span class="n">bp</span><span class="p">:</span>
                    <span class="n">input_event</span> <span class="o">=</span> <span class="n">sge</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">JoystickEvent</span><span class="p">(</span>
                        <span class="n">jsname</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">joy</span><span class="p">,</span> <span class="s2">&quot;axis+&quot;</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">axis</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">input_events</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">input_event</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">z</span> <span class="o">!=</span> <span class="n">zp</span><span class="p">:</span>
                    <span class="n">input_event</span> <span class="o">=</span> <span class="n">sge</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">JoystickEvent</span><span class="p">(</span>
                        <span class="n">jsname</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">joy</span><span class="p">,</span> <span class="s2">&quot;axis0&quot;</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">axis</span><span class="p">,</span> <span class="n">z</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">input_events</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">input_event</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">pygame</span><span class="o">.</span><span class="n">JOYHATMOTION</span><span class="p">:</span>
                <span class="n">jsname</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">game_js_names</span><span class="p">[</span><span class="n">event</span><span class="o">.</span><span class="n">joy</span><span class="p">]</span>
                <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">value</span>
                <span class="n">y</span> <span class="o">*=</span> <span class="o">-</span><span class="mi">1</span>
                <span class="n">left</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">x</span><span class="p">))</span>
                <span class="n">right</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
                <span class="n">center_x</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="nb">abs</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
                <span class="n">up</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>
                <span class="n">down</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
                <span class="n">center_y</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="nb">abs</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>

                <span class="n">hat_id</span> <span class="o">=</span> <span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">joy</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">hat</span><span class="p">)</span>
                <span class="n">xp</span><span class="p">,</span> <span class="n">yp</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">_prev_hats</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">hat_id</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
                <span class="n">r</span><span class="o">.</span><span class="n">_prev_hats</span><span class="p">[</span><span class="n">hat_id</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
                <span class="n">leftp</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">xp</span><span class="p">))</span>
                <span class="n">rightp</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">xp</span><span class="p">)</span>
                <span class="n">center_xp</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="nb">abs</span><span class="p">(</span><span class="n">xp</span><span class="p">)</span>
                <span class="n">upp</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">yp</span><span class="p">))</span>
                <span class="n">downp</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">yp</span><span class="p">)</span>
                <span class="n">center_yp</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="nb">abs</span><span class="p">(</span><span class="n">yp</span><span class="p">)</span>

                <span class="n">input_event</span> <span class="o">=</span> <span class="n">sge</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">JoystickHatMove</span><span class="p">(</span>
                    <span class="n">jsname</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">joy</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">hat</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">input_events</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">input_event</span><span class="p">)</span>

                <span class="k">if</span> <span class="n">left</span> <span class="o">!=</span> <span class="n">leftp</span><span class="p">:</span>
                    <span class="n">input_event</span> <span class="o">=</span> <span class="n">sge</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">JoystickEvent</span><span class="p">(</span>
                        <span class="n">jsname</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">joy</span><span class="p">,</span> <span class="s2">&quot;hat_left&quot;</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">hat</span><span class="p">,</span> <span class="n">left</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">input_events</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">input_event</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">right</span> <span class="o">!=</span> <span class="n">rightp</span><span class="p">:</span>
                    <span class="n">input_event</span> <span class="o">=</span> <span class="n">sge</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">JoystickEvent</span><span class="p">(</span>
                        <span class="n">jsname</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">joy</span><span class="p">,</span> <span class="s2">&quot;hat_right&quot;</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">hat</span><span class="p">,</span> <span class="n">right</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">input_events</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">input_event</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">center_x</span> <span class="o">!=</span> <span class="n">center_xp</span><span class="p">:</span>
                    <span class="n">input_event</span> <span class="o">=</span> <span class="n">sge</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">JoystickEvent</span><span class="p">(</span>
                        <span class="n">jsname</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">joy</span><span class="p">,</span> <span class="s2">&quot;hat_center_x&quot;</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">hat</span><span class="p">,</span> <span class="n">center_x</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">input_events</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">input_event</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">up</span> <span class="o">!=</span> <span class="n">upp</span><span class="p">:</span>
                    <span class="n">input_event</span> <span class="o">=</span> <span class="n">sge</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">JoystickEvent</span><span class="p">(</span>
                        <span class="n">jsname</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">joy</span><span class="p">,</span> <span class="s2">&quot;hat_up&quot;</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">hat</span><span class="p">,</span> <span class="n">up</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">input_events</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">input_event</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">down</span> <span class="o">!=</span> <span class="n">downp</span><span class="p">:</span>
                    <span class="n">input_event</span> <span class="o">=</span> <span class="n">sge</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">JoystickEvent</span><span class="p">(</span>
                        <span class="n">jsname</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">joy</span><span class="p">,</span> <span class="s2">&quot;hat_down&quot;</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">hat</span><span class="p">,</span> <span class="n">down</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">input_events</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">input_event</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">center_y</span> <span class="o">!=</span> <span class="n">center_yp</span><span class="p">:</span>
                    <span class="n">input_event</span> <span class="o">=</span> <span class="n">sge</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">JoystickEvent</span><span class="p">(</span>
                        <span class="n">jsname</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">joy</span><span class="p">,</span> <span class="s2">&quot;hat_center_y&quot;</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">hat</span><span class="p">,</span> <span class="n">center_y</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">input_events</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">input_event</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">pygame</span><span class="o">.</span><span class="n">JOYBALLMOTION</span><span class="p">:</span>
                <span class="n">jsname</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">game_js_names</span><span class="p">[</span><span class="n">event</span><span class="o">.</span><span class="n">joy</span><span class="p">]</span>
                <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">rel</span>

                <span class="n">input_event</span> <span class="o">=</span> <span class="n">sge</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">JoystickTrackballMove</span><span class="p">(</span>
                    <span class="n">jsname</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">joy</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">ball</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">input_events</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">input_event</span><span class="p">)</span>

                <span class="k">if</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">input_event</span> <span class="o">=</span> <span class="n">sge</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">JoystickEvent</span><span class="p">(</span>
                        <span class="n">jsname</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">joy</span><span class="p">,</span> <span class="s2">&quot;trackball_left&quot;</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">ball</span><span class="p">,</span>
                        <span class="nb">abs</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">input_events</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">input_event</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">input_event</span> <span class="o">=</span> <span class="n">sge</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">JoystickEvent</span><span class="p">(</span>
                        <span class="n">jsname</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">joy</span><span class="p">,</span> <span class="s2">&quot;trackball_right&quot;</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">ball</span><span class="p">,</span>
                        <span class="nb">abs</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">input_events</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">input_event</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">y</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">input_event</span> <span class="o">=</span> <span class="n">sge</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">JoystickEvent</span><span class="p">(</span>
                        <span class="n">jsname</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">joy</span><span class="p">,</span> <span class="s2">&quot;trackball_up&quot;</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">ball</span><span class="p">,</span>
                        <span class="nb">abs</span><span class="p">(</span><span class="n">y</span><span class="p">))</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">input_events</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">input_event</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">y</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">input_event</span> <span class="o">=</span> <span class="n">sge</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">JoystickEvent</span><span class="p">(</span>
                        <span class="n">jsname</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">joy</span><span class="p">,</span> <span class="s2">&quot;trackball_down&quot;</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">ball</span><span class="p">,</span>
                        <span class="nb">abs</span><span class="p">(</span><span class="n">y</span><span class="p">))</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">input_events</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">input_event</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">pygame</span><span class="o">.</span><span class="n">JOYBUTTONDOWN</span><span class="p">:</span>
                <span class="n">jsname</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">game_js_names</span><span class="p">[</span><span class="n">event</span><span class="o">.</span><span class="n">joy</span><span class="p">]</span>

                <span class="n">input_event</span> <span class="o">=</span> <span class="n">sge</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">JoystickButtonPress</span><span class="p">(</span><span class="n">jsname</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">joy</span><span class="p">,</span>
                                                            <span class="n">event</span><span class="o">.</span><span class="n">button</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">input_events</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">input_event</span><span class="p">)</span>

                <span class="n">input_event</span> <span class="o">=</span> <span class="n">sge</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">JoystickEvent</span><span class="p">(</span>
                    <span class="n">jsname</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">joy</span><span class="p">,</span> <span class="s2">&quot;button&quot;</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">button</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">input_events</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">input_event</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">pygame</span><span class="o">.</span><span class="n">JOYBUTTONUP</span><span class="p">:</span>
                <span class="n">jsname</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">game_js_names</span><span class="p">[</span><span class="n">event</span><span class="o">.</span><span class="n">joy</span><span class="p">]</span>

                <span class="n">input_event</span> <span class="o">=</span> <span class="n">sge</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">JoystickButtonRelease</span><span class="p">(</span>
                    <span class="n">jsname</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">joy</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">button</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">input_events</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">input_event</span><span class="p">)</span>

                <span class="n">input_event</span> <span class="o">=</span> <span class="n">sge</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">JoystickEvent</span><span class="p">(</span>
                    <span class="n">jsname</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">joy</span><span class="p">,</span> <span class="s2">&quot;button&quot;</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">button</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">input_events</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">input_event</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">pygame</span><span class="o">.</span><span class="n">ACTIVEEVENT</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">gain</span><span class="p">:</span>
                    <span class="k">if</span> <span class="mi">2</span> <span class="o">&amp;</span> <span class="n">event</span><span class="o">.</span><span class="n">state</span><span class="p">:</span>
                        <span class="c1"># Gain keyboard focus</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">input_events</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sge</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">KeyboardFocusGain</span><span class="p">())</span>
                    <span class="k">if</span> <span class="mi">1</span> <span class="o">&amp;</span> <span class="n">event</span><span class="o">.</span><span class="n">state</span><span class="p">:</span>
                        <span class="c1"># Gain mouse focus</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">input_events</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sge</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">KeyboardFocusLose</span><span class="p">())</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="mi">2</span> <span class="o">&amp;</span> <span class="n">event</span><span class="o">.</span><span class="n">state</span><span class="p">:</span>
                        <span class="c1"># Lose keyboard focus</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">input_events</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sge</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">MouseFocusGain</span><span class="p">())</span>
                    <span class="k">if</span> <span class="mi">1</span> <span class="o">&amp;</span> <span class="n">event</span><span class="o">.</span><span class="n">state</span><span class="p">:</span>
                        <span class="c1"># Lose mouse focus</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">input_events</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sge</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">MouseFocusLose</span><span class="p">())</span>
            <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">pygame</span><span class="o">.</span><span class="n">QUIT</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">input_events</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sge</span><span class="o">.</span><span class="n">input</span><span class="o">.</span><span class="n">QuitRequest</span><span class="p">())</span>
            <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">pygame</span><span class="o">.</span><span class="n">VIDEORESIZE</span><span class="p">:</span>
                <span class="n">r</span><span class="o">.</span><span class="n">game_window_width</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">w</span>
                <span class="n">r</span><span class="o">.</span><span class="n">game_window_height</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">h</span>
                <span class="n">_set_mode</span><span class="p">()</span>
            <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">sge</span><span class="o">.</span><span class="n">MUSIC_END_EVENT</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">r</span><span class="o">.</span><span class="n">music_queue</span><span class="p">:</span>
                    <span class="n">music</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">music_queue</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                    <span class="n">music</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">play</span><span class="p">(</span><span class="o">*</span><span class="n">music</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span></div>

<div class="viewcode-block" id="Game.regulate_speed"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Game.regulate_speed">[docs]</a>    <span class="k">def</span> <span class="nf">regulate_speed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fps</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Regulate the SGE&#39;s running speed and return the time passed.</span>

<span class="sd">        Arguments:</span>

<span class="sd">        - ``fps`` -- The target frame rate in frames per second.  Set to</span>
<span class="sd">          :const:`None` to target the current value of :attr:`fps`.</span>

<span class="sd">        When this method is called, the program will sleep long enough</span>
<span class="sd">        so that the game runs at ``fps`` frames per second, then return</span>
<span class="sd">        the number of milliseconds that passed between the previous call</span>
<span class="sd">        and the current call of this method.</span>

<span class="sd">        You normally don&#39;t need to use this function directly.  It is</span>
<span class="sd">        called automatically in each frame of the SGE&#39;s main loop.  You</span>
<span class="sd">        only need to use this function directly if you want to create</span>
<span class="sd">        your own loop.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">fps</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">delta</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">delta_max</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="n">fps</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">delta_max</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">fps</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fps</span>

        <span class="n">tp</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">game_clock</span><span class="o">.</span><span class="n">tick</span><span class="p">(</span><span class="n">fps</span><span class="p">)</span>

        <span class="n">r</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">prune_time</span> <span class="o">+=</span> <span class="n">tp</span>
        <span class="k">if</span> <span class="n">r</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">prune_time</span> <span class="o">&gt;=</span> <span class="n">r</span><span class="o">.</span><span class="n">CACHE_PRUNE_TIME</span><span class="p">:</span>
            <span class="n">r</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">prune_time</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">r</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">prune</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">tp</span></div>

<div class="viewcode-block" id="Game.refresh"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Game.refresh">[docs]</a>    <span class="k">def</span> <span class="nf">refresh</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Refresh the screen.</span>

<span class="sd">        This method needs to be called for changes to the screen to be</span>
<span class="sd">        seen by the user.  It should be called every frame.</span>

<span class="sd">        You normally don&#39;t need to use this function directly.  It is</span>
<span class="sd">        called automatically in each frame of the SGE&#39;s main loop.  You</span>
<span class="sd">        only need to use this function directly if you take control away</span>
<span class="sd">        from the SGE&#39;s main loop, e.g. to create your own loop.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Music control</span>
        <span class="n">_handle_music</span><span class="p">()</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">game_x</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">r</span><span class="o">.</span><span class="n">game_y</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">r</span><span class="o">.</span><span class="n">game_xscale</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span>
                <span class="n">r</span><span class="o">.</span><span class="n">game_yscale</span> <span class="o">==</span> <span class="mi">1</span><span class="p">):</span>
            <span class="n">display_surface</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">game_window</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">display_surface</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">game_display_surface</span>

        <span class="c1"># Clear display surface</span>
        <span class="n">display_surface</span><span class="o">.</span><span class="n">fill</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>

        <span class="c1"># Draw views</span>
        <span class="k">for</span> <span class="n">view</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_room</span><span class="o">.</span><span class="n">views</span><span class="p">:</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">view</span><span class="o">.</span><span class="n">xport</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">view</span><span class="o">.</span><span class="n">yport</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span>
                    <span class="n">view</span><span class="o">.</span><span class="n">wport</span> <span class="o">==</span> <span class="n">view</span><span class="o">.</span><span class="n">width</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="ow">and</span>
                    <span class="n">view</span><span class="o">.</span><span class="n">hport</span> <span class="o">==</span> <span class="n">view</span><span class="o">.</span><span class="n">height</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span><span class="p">):</span>
                <span class="n">view_surf</span> <span class="o">=</span> <span class="n">display_surface</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">view_surf</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Surface</span><span class="p">((</span><span class="n">view</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="n">view</span><span class="o">.</span><span class="n">height</span><span class="p">))</span>
            <span class="n">view_surf</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="n">pygame</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">current_room</span><span class="o">.</span><span class="n">background</span><span class="o">.</span><span class="n">color</span><span class="p">))</span>
            <span class="n">view_x</span> <span class="o">=</span> <span class="n">view</span><span class="o">.</span><span class="n">x</span>
            <span class="n">view_y</span> <span class="o">=</span> <span class="n">view</span><span class="o">.</span><span class="n">y</span>
            <span class="n">view_width</span> <span class="o">=</span> <span class="n">view</span><span class="o">.</span><span class="n">width</span>
            <span class="n">view_height</span> <span class="o">=</span> <span class="n">view</span><span class="o">.</span><span class="n">height</span>
            <span class="n">vx</span> <span class="o">=</span> <span class="n">view_x</span> <span class="o">-</span> <span class="n">sge</span><span class="o">.</span><span class="n">game</span><span class="o">.</span><span class="n">current_room</span><span class="o">.</span><span class="n">background_x</span>
            <span class="n">vy</span> <span class="o">=</span> <span class="n">view_y</span> <span class="o">-</span> <span class="n">sge</span><span class="o">.</span><span class="n">game</span><span class="o">.</span><span class="n">current_room</span><span class="o">.</span><span class="n">background_y</span>

            <span class="n">images</span> <span class="o">=</span> <span class="p">[]</span>

            <span class="k">for</span> <span class="n">layer</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_room</span><span class="o">.</span><span class="n">background</span><span class="o">.</span><span class="n">layers</span><span class="p">:</span>
                <span class="n">img</span> <span class="o">=</span> <span class="n">bl_get_image</span><span class="p">(</span><span class="n">layer</span><span class="p">)</span>
                <span class="n">x</span> <span class="o">=</span> <span class="n">layer</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">vx</span> <span class="o">*</span> <span class="n">layer</span><span class="o">.</span><span class="n">xscroll_rate</span>
                <span class="n">y</span> <span class="o">=</span> <span class="n">layer</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">vy</span> <span class="o">*</span> <span class="n">layer</span><span class="o">.</span><span class="n">yscroll_rate</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">sge</span><span class="o">.</span><span class="n">gfx</span><span class="o">.</span><span class="n">TileGrid</span><span class="p">):</span>
                    <span class="n">img_w</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">img</span><span class="o">.</span><span class="n">width</span><span class="p">)</span>
                    <span class="n">img_h</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">img</span><span class="o">.</span><span class="n">height</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">img_w</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">img</span><span class="o">.</span><span class="n">get_width</span><span class="p">())</span>
                    <span class="n">img_h</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">img</span><span class="o">.</span><span class="n">get_height</span><span class="p">())</span>

                <span class="c1"># Apply the origin so the positions are as expected.</span>
                <span class="n">x</span> <span class="o">-=</span> <span class="n">layer</span><span class="o">.</span><span class="n">sprite</span><span class="o">.</span><span class="n">origin_x</span>
                <span class="n">y</span> <span class="o">-=</span> <span class="n">layer</span><span class="o">.</span><span class="n">sprite</span><span class="o">.</span><span class="n">origin_y</span>

                <span class="c1"># Move to the best position for what we want to do</span>
                <span class="k">if</span> <span class="n">layer</span><span class="o">.</span><span class="n">repeat_right</span> <span class="ow">and</span> <span class="p">(</span><span class="n">layer</span><span class="o">.</span><span class="n">repeat_left</span> <span class="ow">or</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">):</span>
                    <span class="n">x</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span> <span class="o">%</span> <span class="n">img_w</span><span class="p">)</span> <span class="o">-</span> <span class="n">img_w</span>
                <span class="k">elif</span> <span class="n">layer</span><span class="o">.</span><span class="n">repeat_left</span> <span class="ow">and</span> <span class="n">x</span> <span class="o">+</span> <span class="n">img_w</span> <span class="o">&gt;</span> <span class="n">view_width</span><span class="p">:</span>
                    <span class="n">x</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span> <span class="o">%</span> <span class="n">img_w</span><span class="p">)</span> <span class="o">+</span> <span class="n">img_w</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">view_width</span> <span class="o">/</span> <span class="n">img_w</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">layer</span><span class="o">.</span><span class="n">repeat_down</span> <span class="ow">and</span> <span class="p">(</span><span class="n">layer</span><span class="o">.</span><span class="n">repeat_up</span> <span class="ow">or</span> <span class="n">y</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">):</span>
                    <span class="n">y</span> <span class="o">=</span> <span class="p">(</span><span class="n">y</span> <span class="o">%</span> <span class="n">img_h</span><span class="p">)</span> <span class="o">-</span> <span class="n">img_h</span>
                <span class="k">elif</span> <span class="n">layer</span><span class="o">.</span><span class="n">repeat_up</span> <span class="ow">and</span> <span class="n">y</span> <span class="o">+</span> <span class="n">img_h</span> <span class="o">&gt;</span> <span class="n">view_height</span><span class="p">:</span>
                    <span class="n">y</span> <span class="o">=</span> <span class="p">(</span><span class="n">y</span> <span class="o">%</span> <span class="n">img_h</span><span class="p">)</span> <span class="o">+</span> <span class="n">img_h</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">view_height</span> <span class="o">/</span> <span class="n">img_h</span><span class="p">)</span>

                <span class="k">if</span> <span class="n">layer</span><span class="o">.</span><span class="n">repeat_right</span> <span class="ow">and</span> <span class="p">(</span><span class="n">layer</span><span class="o">.</span><span class="n">repeat_left</span> <span class="ow">or</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="n">view_width</span><span class="p">):</span>
                    <span class="n">hrange</span> <span class="o">=</span> <span class="n">six</span><span class="o">.</span><span class="n">moves</span><span class="o">.</span><span class="n">range</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">x</span><span class="p">)),</span>
                                             <span class="nb">int</span><span class="p">(</span><span class="n">view</span><span class="o">.</span><span class="n">width</span> <span class="o">+</span> <span class="n">img_w</span><span class="p">),</span> <span class="n">img_w</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">layer</span><span class="o">.</span><span class="n">repeat_left</span> <span class="ow">and</span> <span class="n">x</span> <span class="o">+</span> <span class="n">img_w</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">hrange</span> <span class="o">=</span> <span class="n">six</span><span class="o">.</span><span class="n">moves</span><span class="o">.</span><span class="n">range</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">x</span><span class="p">)),</span> <span class="o">-</span><span class="n">img_w</span><span class="p">,</span> <span class="o">-</span><span class="n">img_w</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">hrange</span> <span class="o">=</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">x</span><span class="p">))]</span>

                <span class="k">if</span> <span class="n">layer</span><span class="o">.</span><span class="n">repeat_down</span> <span class="ow">and</span> <span class="p">(</span><span class="n">layer</span><span class="o">.</span><span class="n">repeat_up</span> <span class="ow">or</span> <span class="n">y</span> <span class="o">&lt;</span> <span class="n">view_height</span><span class="p">):</span>
                    <span class="n">vrange</span> <span class="o">=</span> <span class="n">six</span><span class="o">.</span><span class="n">moves</span><span class="o">.</span><span class="n">range</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">y</span><span class="p">)),</span>
                                             <span class="nb">int</span><span class="p">(</span><span class="n">view_height</span> <span class="o">+</span> <span class="n">img_h</span><span class="p">),</span> <span class="n">img_h</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">layer</span><span class="o">.</span><span class="n">repeat_up</span> <span class="ow">and</span> <span class="n">y</span> <span class="o">+</span> <span class="n">img_h</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">vrange</span> <span class="o">=</span> <span class="n">six</span><span class="o">.</span><span class="n">moves</span><span class="o">.</span><span class="n">range</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">y</span><span class="p">)),</span> <span class="o">-</span><span class="n">img_h</span><span class="p">,</span> <span class="o">-</span><span class="n">img_h</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">vrange</span> <span class="o">=</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">y</span><span class="p">))]</span>

                <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">vrange</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">hrange</span><span class="p">:</span>
                        <span class="n">images</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">img</span><span class="p">,</span> <span class="n">x</span> <span class="o">+</span> <span class="n">math</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">view_x</span><span class="p">),</span>
                                       <span class="n">y</span> <span class="o">+</span> <span class="n">math</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">view_y</span><span class="p">),</span> <span class="n">layer</span><span class="o">.</span><span class="n">z</span><span class="p">,</span> <span class="bp">None</span><span class="p">))</span>

            <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_room</span><span class="o">.</span><span class="n">get_objects_at</span><span class="p">(</span>
                    <span class="n">view_x</span><span class="p">,</span> <span class="n">view_y</span><span class="p">,</span> <span class="n">view_width</span><span class="p">,</span> <span class="n">view_height</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">visible</span> <span class="ow">and</span> <span class="n">obj</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">mouse</span><span class="p">:</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">sprite</span><span class="p">,</span> <span class="n">sge</span><span class="o">.</span><span class="n">gfx</span><span class="o">.</span><span class="n">Sprite</span><span class="p">):</span>
                        <span class="n">img</span> <span class="o">=</span> <span class="n">s_get_image</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">sprite</span><span class="p">,</span> <span class="n">obj</span><span class="o">.</span><span class="n">image_index</span><span class="p">,</span>
                                          <span class="n">obj</span><span class="o">.</span><span class="n">image_xscale</span><span class="p">,</span> <span class="n">obj</span><span class="o">.</span><span class="n">image_yscale</span><span class="p">,</span>
                                          <span class="n">obj</span><span class="o">.</span><span class="n">image_rotation</span><span class="p">,</span> <span class="n">obj</span><span class="o">.</span><span class="n">image_alpha</span><span class="p">,</span>
                                          <span class="n">obj</span><span class="o">.</span><span class="n">image_blend</span><span class="p">,</span>
                                          <span class="n">obj</span><span class="o">.</span><span class="n">image_blend_mode</span><span class="p">)</span>
                        <span class="n">w</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">get_width</span><span class="p">()</span>
                        <span class="n">h</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">get_height</span><span class="p">()</span>
                        <span class="n">x</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">obj</span><span class="o">.</span><span class="n">image_origin_x</span>
                        <span class="n">y</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">obj</span><span class="o">.</span><span class="n">image_origin_y</span>
                        <span class="k">if</span> <span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">w</span> <span class="o">&gt;=</span> <span class="n">view_x</span> <span class="ow">and</span> <span class="n">x</span> <span class="o">&lt;=</span> <span class="n">view_x</span> <span class="o">+</span> <span class="n">view_width</span> <span class="ow">and</span>
                                <span class="n">y</span> <span class="o">+</span> <span class="n">h</span> <span class="o">&gt;=</span> <span class="n">view_y</span> <span class="ow">and</span> <span class="n">y</span> <span class="o">&lt;=</span> <span class="n">view_y</span> <span class="o">+</span> <span class="n">view_height</span><span class="p">):</span>
                            <span class="n">nimg</span> <span class="o">=</span> <span class="n">s_get_image</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">sprite</span><span class="p">,</span> <span class="n">obj</span><span class="o">.</span><span class="n">image_index</span><span class="p">,</span>
                                               <span class="n">obj</span><span class="o">.</span><span class="n">image_xscale</span><span class="p">,</span>
                                               <span class="n">obj</span><span class="o">.</span><span class="n">image_yscale</span><span class="p">)</span>
                            <span class="n">nw</span> <span class="o">=</span> <span class="n">nimg</span><span class="o">.</span><span class="n">get_width</span><span class="p">()</span>
                            <span class="n">nh</span> <span class="o">=</span> <span class="n">nimg</span><span class="o">.</span><span class="n">get_height</span><span class="p">()</span>
                            <span class="n">xoff</span> <span class="o">=</span> <span class="p">(</span><span class="n">w</span> <span class="o">-</span> <span class="n">nw</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span>
                            <span class="n">yoff</span> <span class="o">=</span> <span class="p">(</span><span class="n">h</span> <span class="o">-</span> <span class="n">nh</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span>
                            <span class="n">images</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">img</span><span class="p">,</span> <span class="n">x</span> <span class="o">-</span> <span class="n">xoff</span><span class="p">,</span> <span class="n">y</span> <span class="o">-</span> <span class="n">yoff</span><span class="p">,</span>
                                           <span class="n">obj</span><span class="o">.</span><span class="n">z</span><span class="p">,</span> <span class="bp">None</span><span class="p">))</span>
                    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">sprite</span><span class="p">,</span> <span class="n">sge</span><span class="o">.</span><span class="n">gfx</span><span class="o">.</span><span class="n">TileGrid</span><span class="p">):</span>
                        <span class="n">x</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">obj</span><span class="o">.</span><span class="n">image_origin_x</span>
                        <span class="n">y</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">obj</span><span class="o">.</span><span class="n">image_origin_y</span>
                        <span class="n">images</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">obj</span><span class="o">.</span><span class="n">sprite</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">obj</span><span class="o">.</span><span class="n">z</span><span class="p">,</span> <span class="bp">None</span><span class="p">))</span>

            <span class="n">images</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">current_room</span><span class="o">.</span><span class="n">rd</span><span class="p">[</span><span class="s2">&quot;projections&quot;</span><span class="p">])</span>

            <span class="n">images</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">img</span><span class="p">:</span> <span class="n">img</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>

            <span class="k">for</span> <span class="n">img</span> <span class="ow">in</span> <span class="n">images</span><span class="p">:</span>
                <span class="n">surf</span> <span class="o">=</span> <span class="n">img</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">x</span> <span class="o">=</span> <span class="n">img</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">view</span><span class="o">.</span><span class="n">x</span>
                <span class="n">y</span> <span class="o">=</span> <span class="n">img</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">view</span><span class="o">.</span><span class="n">y</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">surf</span><span class="p">,</span> <span class="n">sge</span><span class="o">.</span><span class="n">gfx</span><span class="o">.</span><span class="n">TileGrid</span><span class="p">):</span>
                    <span class="n">tg_blit</span><span class="p">(</span><span class="n">surf</span><span class="p">,</span> <span class="n">view_surf</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">blend_mode</span> <span class="o">=</span> <span class="n">img</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
                    <span class="k">if</span> <span class="n">blend_mode</span> <span class="o">==</span> <span class="n">sge</span><span class="o">.</span><span class="n">BLEND_RGB_SCREEN</span><span class="p">:</span>
                        <span class="n">_screen_blend</span><span class="p">(</span><span class="n">view_surf</span><span class="p">,</span> <span class="n">surf</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="n">blend_mode</span> <span class="o">==</span> <span class="n">sge</span><span class="o">.</span><span class="n">BLEND_RGBA_SCREEN</span><span class="p">:</span>
                        <span class="n">_screen_blend</span><span class="p">(</span><span class="n">view_surf</span><span class="p">,</span> <span class="n">surf</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">flags</span> <span class="o">=</span> <span class="n">_get_blend_flags</span><span class="p">(</span><span class="n">blend_mode</span><span class="p">)</span>
                        <span class="n">view_surf</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">surf</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="nb">int</span><span class="p">(</span><span class="n">y</span><span class="p">)),</span> <span class="bp">None</span><span class="p">,</span> <span class="n">flags</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">view_surf</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">display_surface</span><span class="p">:</span>
                <span class="n">display_surface</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span>
                    <span class="n">_scale</span><span class="p">(</span><span class="n">view_surf</span><span class="p">,</span> <span class="n">view</span><span class="o">.</span><span class="n">wport</span><span class="p">,</span> <span class="n">view</span><span class="o">.</span><span class="n">hport</span><span class="p">),</span>
                    <span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">view</span><span class="o">.</span><span class="n">xport</span><span class="p">),</span> <span class="nb">int</span><span class="p">(</span><span class="n">view</span><span class="o">.</span><span class="n">yport</span><span class="p">)))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">current_room</span><span class="o">.</span><span class="n">rd</span><span class="p">[</span><span class="s2">&quot;projections&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="c1"># Window projections</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mouse</span><span class="o">.</span><span class="n">project_cursor</span><span class="p">()</span>
        <span class="n">r</span><span class="o">.</span><span class="n">game_window_projections</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">img</span><span class="p">:</span> <span class="n">img</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
        <span class="k">for</span> <span class="n">projection</span> <span class="ow">in</span> <span class="n">r</span><span class="o">.</span><span class="n">game_window_projections</span><span class="p">:</span>
            <span class="n">image</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">blend_mode</span> <span class="o">=</span> <span class="n">projection</span>
            <span class="n">x</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
            <span class="n">y</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">sge</span><span class="o">.</span><span class="n">gfx</span><span class="o">.</span><span class="n">TileGrid</span><span class="p">):</span>
                <span class="n">tg_blit</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">display_surface</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">blend_mode</span> <span class="o">==</span> <span class="n">sge</span><span class="o">.</span><span class="n">BLEND_RGB_SCREEN</span><span class="p">:</span>
                    <span class="n">_screen_blend</span><span class="p">(</span><span class="n">display_surface</span><span class="p">,</span> <span class="n">image</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">blend_mode</span> <span class="o">==</span> <span class="n">sge</span><span class="o">.</span><span class="n">BLEND_RGBA_SCREEN</span><span class="p">:</span>
                    <span class="n">_screen_blend</span><span class="p">(</span><span class="n">display_surface</span><span class="p">,</span> <span class="n">image</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">flags</span> <span class="o">=</span> <span class="n">_get_blend_flags</span><span class="p">(</span><span class="n">blend_mode</span><span class="p">)</span>
                    <span class="n">display_surface</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">),</span> <span class="bp">None</span><span class="p">,</span> <span class="n">flags</span><span class="p">)</span>

        <span class="n">r</span><span class="o">.</span><span class="n">game_window_projections</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="c1"># Scale/blit display surface</span>
        <span class="k">if</span> <span class="n">display_surface</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">r</span><span class="o">.</span><span class="n">game_window</span><span class="p">:</span>
            <span class="n">r</span><span class="o">.</span><span class="n">game_window</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span>
                <span class="n">_scale</span><span class="p">(</span><span class="n">display_surface</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">*</span> <span class="n">r</span><span class="o">.</span><span class="n">game_xscale</span><span class="p">,</span>
                       <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">*</span> <span class="n">r</span><span class="o">.</span><span class="n">game_yscale</span><span class="p">),</span> <span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">game_x</span><span class="p">),</span>
                       <span class="nb">int</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">game_y</span><span class="p">)))</span>

        <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">flip</span><span class="p">()</span></div>

<div class="viewcode-block" id="Game.project_dot"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Game.project_dot">[docs]</a>    <span class="k">def</span> <span class="nf">project_dot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">color</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">blend_mode</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Project a single-pixel dot onto the game window.</span>

<span class="sd">        Arguments:</span>

<span class="sd">        - ``x`` -- The horizontal location relative to the window to</span>
<span class="sd">          project the dot.</span>
<span class="sd">        - ``y`` -- The vertical location relative to the window to</span>
<span class="sd">          project the dot.</span>
<span class="sd">        - ``z`` -- The Z-axis position of the projection in relation to</span>
<span class="sd">          other window projections.</span>

<span class="sd">        Window projections are projections made directly onto the game</span>
<span class="sd">        window, independent of the room or any views.</span>

<span class="sd">        .. note:: The Z-axis position of a window projection does not</span>
<span class="sd">           correlate with the Z-axis position of anything positioned</span>
<span class="sd">           within the room, such as room projections and</span>
<span class="sd">           :class:`sge.dsp.Object` objects.  Window projections are</span>
<span class="sd">           always positioned in front of such things.</span>

<span class="sd">        See the documentation for :meth:`sge.gfx.Sprite.draw_dot` for</span>
<span class="sd">        more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_check_color</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>
        <span class="n">sprite</span> <span class="o">=</span> <span class="n">_get_dot_sprite</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">project_sprite</span><span class="p">(</span><span class="n">sprite</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">blend_mode</span><span class="p">)</span></div>

<div class="viewcode-block" id="Game.project_line"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Game.project_line">[docs]</a>    <span class="k">def</span> <span class="nf">project_line</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="n">color</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">thickness</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                     <span class="n">anti_alias</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">blend_mode</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Project a line segment onto the game window.</span>

<span class="sd">        Arguments:</span>

<span class="sd">        - ``x1`` -- The horizontal location relative to the window of</span>
<span class="sd">          the first endpoint of the projected line segment.</span>
<span class="sd">        - ``y1`` -- The vertical location relative to the window of the</span>
<span class="sd">          first endpoint of the projected line segment.</span>
<span class="sd">        - ``x2`` -- The horizontal location relative to the window of</span>
<span class="sd">          the second endpoint of the projected line segment.</span>
<span class="sd">        - ``y2`` -- The vertical location relative to the window of the</span>
<span class="sd">          second endpoint of the projected line segment.</span>
<span class="sd">        - ``z`` -- The Z-axis position of the projection in relation to</span>
<span class="sd">          other window projections.</span>

<span class="sd">        See the documentation for :meth:`sge.gfx.Sprite.draw_line` and</span>
<span class="sd">        :meth:`sge.dsp.Game.project_dot` for more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_check_color</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>

        <span class="n">thickness</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">thickness</span><span class="p">)</span>
        <span class="n">x</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">x2</span><span class="p">)</span> <span class="o">-</span> <span class="n">thickness</span> <span class="o">//</span> <span class="mi">2</span>
        <span class="n">y</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">y1</span><span class="p">,</span> <span class="n">y2</span><span class="p">)</span> <span class="o">-</span> <span class="n">thickness</span> <span class="o">//</span> <span class="mi">2</span>
        <span class="n">x1</span> <span class="o">-=</span> <span class="n">x</span>
        <span class="n">y1</span> <span class="o">-=</span> <span class="n">y</span>
        <span class="n">x2</span> <span class="o">-=</span> <span class="n">x</span>
        <span class="n">y2</span> <span class="o">-=</span> <span class="n">y</span>

        <span class="n">sprite</span> <span class="o">=</span> <span class="n">_get_line_sprite</span><span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="n">color</span><span class="p">,</span> <span class="n">thickness</span><span class="p">,</span> <span class="n">anti_alias</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">project_sprite</span><span class="p">(</span><span class="n">sprite</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">blend_mode</span><span class="p">)</span></div>

<div class="viewcode-block" id="Game.project_rectangle"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Game.project_rectangle">[docs]</a>    <span class="k">def</span> <span class="nf">project_rectangle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                          <span class="n">outline</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">outline_thickness</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">blend_mode</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Project a rectangle onto the game window.</span>

<span class="sd">        Arguments:</span>

<span class="sd">        - ``x`` -- The horizontal location relative to the window to</span>
<span class="sd">          project the rectangle.</span>
<span class="sd">        - ``y`` -- The vertical location relative to the window to</span>
<span class="sd">          project the rectangle.</span>
<span class="sd">        - ``z`` -- The Z-axis position of the projection in relation to</span>
<span class="sd">          other window projections.</span>

<span class="sd">        See the documentation for :meth:`sge.gfx.Sprite.draw_rectangle`</span>
<span class="sd">        and :meth:`sge.dsp.Game.project_dot` for more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_check_color</span><span class="p">(</span><span class="n">fill</span><span class="p">)</span>
        <span class="n">_check_color</span><span class="p">(</span><span class="n">outline</span><span class="p">)</span>
        <span class="n">outline_thickness</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">outline_thickness</span><span class="p">)</span>
        <span class="n">draw_x</span> <span class="o">=</span> <span class="n">outline_thickness</span> <span class="o">//</span> <span class="mi">2</span>
        <span class="n">draw_y</span> <span class="o">=</span> <span class="n">outline_thickness</span> <span class="o">//</span> <span class="mi">2</span>
        <span class="n">x</span> <span class="o">-=</span> <span class="n">draw_x</span>
        <span class="n">y</span> <span class="o">-=</span> <span class="n">draw_y</span>
        <span class="n">sprite</span> <span class="o">=</span> <span class="n">_get_rectangle_sprite</span><span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">fill</span><span class="p">,</span> <span class="n">outline</span><span class="p">,</span>
                                       <span class="n">outline_thickness</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">project_sprite</span><span class="p">(</span><span class="n">sprite</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">blend_mode</span><span class="p">)</span></div>

<div class="viewcode-block" id="Game.project_ellipse"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Game.project_ellipse">[docs]</a>    <span class="k">def</span> <span class="nf">project_ellipse</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                        <span class="n">outline</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">outline_thickness</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">anti_alias</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                        <span class="n">blend_mode</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Project an ellipse onto the game window.</span>

<span class="sd">        Arguments:</span>

<span class="sd">        - ``x`` -- The horizontal location relative to the window to</span>
<span class="sd">          position the imaginary rectangle containing the ellipse.</span>
<span class="sd">        - ``y`` -- The vertical location relative to the window to</span>
<span class="sd">          position the imaginary rectangle containing the ellipse.</span>
<span class="sd">        - ``z`` -- The Z-axis position of the projection in relation to</span>
<span class="sd">          other window projections.</span>
<span class="sd">        - ``width`` -- The width of the ellipse.</span>
<span class="sd">        - ``height`` -- The height of the ellipse.</span>
<span class="sd">        - ``outline_thickness`` -- The thickness of the outline of the</span>
<span class="sd">          ellipse.</span>
<span class="sd">        - ``anti_alias`` -- Whether or not anti-aliasing should be used.</span>

<span class="sd">        See the documentation for :meth:`sge.gfx.Sprite.draw_ellipse`</span>
<span class="sd">        and :meth:`sge.dsp.Game.project_dot` for more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">fill</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fill</span><span class="p">,</span> <span class="n">gfx</span><span class="o">.</span><span class="n">Color</span><span class="p">):</span>
            <span class="n">e</span> <span class="o">=</span> <span class="s2">&quot;`{}` is not a Color object.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">fill</span><span class="p">))</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">outline</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">outline</span><span class="p">,</span> <span class="n">gfx</span><span class="o">.</span><span class="n">Color</span><span class="p">):</span>
            <span class="n">e</span> <span class="o">=</span> <span class="s2">&quot;`{}` is not a Color object.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">outline</span><span class="p">))</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

        <span class="n">outline_thickness</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">outline_thickness</span><span class="p">)</span>
        <span class="n">draw_x</span> <span class="o">=</span> <span class="n">outline_thickness</span> <span class="o">//</span> <span class="mi">2</span>
        <span class="n">draw_y</span> <span class="o">=</span> <span class="n">outline_thickness</span> <span class="o">//</span> <span class="mi">2</span>
        <span class="n">x</span> <span class="o">-=</span> <span class="n">draw_x</span>
        <span class="n">y</span> <span class="o">-=</span> <span class="n">draw_y</span>
        <span class="n">sprite</span> <span class="o">=</span> <span class="n">_get_ellipse_sprite</span><span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">fill</span><span class="p">,</span> <span class="n">outline</span><span class="p">,</span>
                                     <span class="n">outline_thickness</span><span class="p">,</span> <span class="n">anti_alias</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">project_sprite</span><span class="p">(</span><span class="n">sprite</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">blend_mode</span><span class="p">)</span></div>

<div class="viewcode-block" id="Game.project_circle"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Game.project_circle">[docs]</a>    <span class="k">def</span> <span class="nf">project_circle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">radius</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">outline</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                       <span class="n">outline_thickness</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">anti_alias</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">blend_mode</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Project a circle onto the game window.</span>

<span class="sd">        Arguments:</span>

<span class="sd">        - ``x`` -- The horizontal location relative to the window to</span>
<span class="sd">          position the center of the circle.</span>
<span class="sd">        - ``y`` -- The vertical location relative to the window to</span>
<span class="sd">          position the center of the circle.</span>
<span class="sd">        - ``z`` -- The Z-axis position of the projection in relation to</span>
<span class="sd">          other window projections.</span>

<span class="sd">        See the documentation for :meth:`sge.gfx.Sprite.draw_circle` and</span>
<span class="sd">        :meth:`sge.dsp.Game.project_dot` for more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_check_color</span><span class="p">(</span><span class="n">fill</span><span class="p">)</span>
        <span class="n">_check_color</span><span class="p">(</span><span class="n">outline</span><span class="p">)</span>
        <span class="n">sprite</span> <span class="o">=</span> <span class="n">_get_circle_sprite</span><span class="p">(</span><span class="n">radius</span><span class="p">,</span> <span class="n">fill</span><span class="p">,</span> <span class="n">outline</span><span class="p">,</span> <span class="n">outline_thickness</span><span class="p">,</span>
                                    <span class="n">anti_alias</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">project_sprite</span><span class="p">(</span><span class="n">sprite</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">x</span> <span class="o">-</span> <span class="n">radius</span><span class="p">,</span> <span class="n">y</span> <span class="o">-</span> <span class="n">radius</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">blend_mode</span><span class="p">)</span></div>

<div class="viewcode-block" id="Game.project_polygon"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Game.project_polygon">[docs]</a>    <span class="k">def</span> <span class="nf">project_polygon</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">outline</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                        <span class="n">outline_thickness</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">anti_alias</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">blend_mode</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Draw a polygon on the sprite.</span>

<span class="sd">        Arguments:</span>

<span class="sd">        - ``points`` -- A list of points relative to the room to</span>
<span class="sd">          position each of the polygon&#39;s angles.  Each point should be a</span>
<span class="sd">          tuple in the form ``(x, y)``, where x is the horizontal</span>
<span class="sd">          location and y is the vertical location.</span>
<span class="sd">        - ``z`` -- The Z-axis position of the projection in relation to</span>
<span class="sd">          other window projections.</span>

<span class="sd">        See the documentation for :meth:`sge.gfx.Sprite.draw_polygon`</span>
<span class="sd">        and :meth:`sge.dsp.Game.project_dot` for more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_check_color</span><span class="p">(</span><span class="n">fill</span><span class="p">)</span>
        <span class="n">_check_color</span><span class="p">(</span><span class="n">outline</span><span class="p">)</span>

        <span class="n">xlist</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">ylist</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">point</span> <span class="ow">in</span> <span class="n">points</span><span class="p">:</span>
            <span class="n">xlist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">point</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="n">ylist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">point</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">x</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">xlist</span><span class="p">)</span>
        <span class="n">y</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">ylist</span><span class="p">)</span>

        <span class="n">sprite</span> <span class="o">=</span> <span class="n">_get_polygon_sprite</span><span class="p">(</span><span class="n">points</span><span class="p">,</span> <span class="n">fill</span><span class="p">,</span> <span class="n">outline</span><span class="p">,</span> <span class="n">outline_thickness</span><span class="p">,</span>
                                     <span class="n">anti_alias</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">project_sprite</span><span class="p">(</span><span class="n">sprite</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">blend_mode</span><span class="p">)</span></div>

<div class="viewcode-block" id="Game.project_sprite"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Game.project_sprite">[docs]</a>    <span class="k">def</span> <span class="nf">project_sprite</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sprite</span><span class="p">,</span> <span class="n">image</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">blend_mode</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Project a sprite onto the game window.</span>

<span class="sd">        Arguments:</span>

<span class="sd">        - ``x`` -- The horizontal location relative to the window to</span>
<span class="sd">          project ``sprite``.</span>
<span class="sd">        - ``y`` -- The vertical location relative to the window to</span>
<span class="sd">          project ``sprite``.</span>
<span class="sd">        - ``z`` -- The Z-axis position of the projection in relation to</span>
<span class="sd">          other window projections.</span>

<span class="sd">        See the documentation for :meth:`sge.gfx.Sprite.draw_sprite` and</span>
<span class="sd">        :meth:`sge.dsp.Game.project_dot` for more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">img</span> <span class="o">=</span> <span class="n">s_get_image</span><span class="p">(</span><span class="n">sprite</span><span class="p">,</span> <span class="n">image</span><span class="p">)</span>
        <span class="n">x</span> <span class="o">-=</span> <span class="n">sprite</span><span class="o">.</span><span class="n">origin_x</span>
        <span class="n">y</span> <span class="o">-=</span> <span class="n">sprite</span><span class="o">.</span><span class="n">origin_y</span>
        <span class="n">r</span><span class="o">.</span><span class="n">game_window_projections</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">img</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">blend_mode</span><span class="p">))</span></div>

<div class="viewcode-block" id="Game.project_text"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Game.project_text">[docs]</a>    <span class="k">def</span> <span class="nf">project_text</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">font</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                    <span class="n">color</span><span class="o">=</span><span class="n">gfx</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span><span class="s2">&quot;white&quot;</span><span class="p">),</span> <span class="n">halign</span><span class="o">=</span><span class="s2">&quot;left&quot;</span><span class="p">,</span>
                    <span class="n">valign</span><span class="o">=</span><span class="s2">&quot;top&quot;</span><span class="p">,</span> <span class="n">anti_alias</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">blend_mode</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Project text onto the game window.</span>

<span class="sd">        Arguments:</span>

<span class="sd">        - ``x`` -- The horizontal location relative to the window to</span>
<span class="sd">          project the text.</span>
<span class="sd">        - ``y`` -- The vertical location relative to the window to</span>
<span class="sd">          project the text.</span>
<span class="sd">        - ``z`` -- The Z-axis position of the projection in relation to</span>
<span class="sd">          other window projections.</span>

<span class="sd">        See the documentation for :meth:`sge.gfx.Sprite.draw_text` and</span>
<span class="sd">        :meth:`sge.dsp.Game.project_dot` for more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_check_color</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>
        <span class="n">sprite</span> <span class="o">=</span> <span class="n">s_from_text</span><span class="p">(</span><span class="n">gfx</span><span class="o">.</span><span class="n">Sprite</span><span class="p">,</span> <span class="n">font</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">color</span><span class="p">,</span>
                             <span class="n">halign</span><span class="p">,</span> <span class="n">valign</span><span class="p">,</span> <span class="n">anti_alias</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">project_sprite</span><span class="p">(</span><span class="n">sprite</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">blend_mode</span><span class="p">)</span></div>

<div class="viewcode-block" id="Game.event_step"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Game.event_step">[docs]</a>    <span class="k">def</span> <span class="nf">event_step</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">time_passed</span><span class="p">,</span> <span class="n">delta_mult</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Called once each frame.</span>

<span class="sd">        Arguments:</span>

<span class="sd">        - ``time_passed`` -- The number of milliseconds that have passed</span>
<span class="sd">          during the last frame.</span>
<span class="sd">        - ``delta_mult`` -- What speed and movement should be multiplied</span>
<span class="sd">          by this frame due to delta timing.  If :attr:`delta` is</span>
<span class="sd">          :const:`False`, this is always ``1``.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Game.event_alarm"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Game.event_alarm">[docs]</a>    <span class="k">def</span> <span class="nf">event_alarm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">alarm_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Called when the value of an alarm reaches 0.</span>

<span class="sd">        See the documentation for :attr:`sge.dsp.Game.alarms` for more</span>
<span class="sd">        information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Game.event_key_press"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Game.event_key_press">[docs]</a>    <span class="k">def</span> <span class="nf">event_key_press</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">char</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for :class:`sge.input.KeyPress` for more</span>
<span class="sd">        information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Game.event_key_release"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Game.event_key_release">[docs]</a>    <span class="k">def</span> <span class="nf">event_key_release</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for :class:`sge.input.KeyRelease` for more</span>
<span class="sd">        information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Game.event_mouse_move"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Game.event_mouse_move">[docs]</a>    <span class="k">def</span> <span class="nf">event_mouse_move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for :class:`sge.input.MouseMove` for more</span>
<span class="sd">        information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Game.event_mouse_button_press"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Game.event_mouse_button_press">[docs]</a>    <span class="k">def</span> <span class="nf">event_mouse_button_press</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">button</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for :class:`sge.input.MouseButtonPress`</span>
<span class="sd">        for more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Game.event_mouse_button_release"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Game.event_mouse_button_release">[docs]</a>    <span class="k">def</span> <span class="nf">event_mouse_button_release</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">button</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for :class:`sge.input.MouseButtonRelease`</span>
<span class="sd">        for more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Game.event_joystick_axis_move"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Game.event_joystick_axis_move">[docs]</a>    <span class="k">def</span> <span class="nf">event_joystick_axis_move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">js_name</span><span class="p">,</span> <span class="n">js_id</span><span class="p">,</span> <span class="n">axis</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for :class:`sge.input.JoystickAxisMove`</span>
<span class="sd">        for more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Game.event_joystick_hat_move"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Game.event_joystick_hat_move">[docs]</a>    <span class="k">def</span> <span class="nf">event_joystick_hat_move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">js_name</span><span class="p">,</span> <span class="n">js_id</span><span class="p">,</span> <span class="n">hat</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for :class:`sge.input.JoystickHatMove`</span>
<span class="sd">        for more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Game.event_joystick_trackball_move"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Game.event_joystick_trackball_move">[docs]</a>    <span class="k">def</span> <span class="nf">event_joystick_trackball_move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">js_name</span><span class="p">,</span> <span class="n">js_id</span><span class="p">,</span> <span class="n">ball</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for</span>
<span class="sd">        :class:`sge.input.JoystickTrackballMove` for more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Game.event_joystick_button_press"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Game.event_joystick_button_press">[docs]</a>    <span class="k">def</span> <span class="nf">event_joystick_button_press</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">js_name</span><span class="p">,</span> <span class="n">js_id</span><span class="p">,</span> <span class="n">button</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for :class:`sge.input.JoystickButtonPress`</span>
<span class="sd">        for more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Game.event_joystick_button_release"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Game.event_joystick_button_release">[docs]</a>    <span class="k">def</span> <span class="nf">event_joystick_button_release</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">js_name</span><span class="p">,</span> <span class="n">js_id</span><span class="p">,</span> <span class="n">button</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for</span>
<span class="sd">        :class:`sge.input.JoystickButtonRelease` for more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Game.event_joystick"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Game.event_joystick">[docs]</a>    <span class="k">def</span> <span class="nf">event_joystick</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">js_name</span><span class="p">,</span> <span class="n">js_id</span><span class="p">,</span> <span class="n">input_type</span><span class="p">,</span> <span class="n">input_id</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for :class:`sge.input.JoystickEvent` for</span>
<span class="sd">        more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Game.event_gain_keyboard_focus"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Game.event_gain_keyboard_focus">[docs]</a>    <span class="k">def</span> <span class="nf">event_gain_keyboard_focus</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for :class:`sge.input.KeyboardFocusGain`</span>
<span class="sd">        for more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Game.event_lose_keyboard_focus"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Game.event_lose_keyboard_focus">[docs]</a>    <span class="k">def</span> <span class="nf">event_lose_keyboard_focus</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for :class:`sge.input.KeyboardFocusLose`</span>
<span class="sd">        for more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Game.event_gain_mouse_focus"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Game.event_gain_mouse_focus">[docs]</a>    <span class="k">def</span> <span class="nf">event_gain_mouse_focus</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for :class:`sge.input.MouseFocusGain` for</span>
<span class="sd">        more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Game.event_lose_mouse_focus"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Game.event_lose_mouse_focus">[docs]</a>    <span class="k">def</span> <span class="nf">event_lose_mouse_focus</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for :class:`sge.input.MouseFocusLose` for</span>
<span class="sd">        more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Game.event_close"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Game.event_close">[docs]</a>    <span class="k">def</span> <span class="nf">event_close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for :class:`sge.input.QuitRequest` for</span>
<span class="sd">        more information.</span>

<span class="sd">        This is always called after any :meth:`sge.dsp.Room.event_close`</span>
<span class="sd">        occurring at the same time.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Game.event_mouse_collision"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Game.event_mouse_collision">[docs]</a>    <span class="k">def</span> <span class="nf">event_mouse_collision</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">xdirection</span><span class="p">,</span> <span class="n">ydirection</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Proxy for :meth:`sge.game.mouse.event_collision`.  See the</span>
<span class="sd">        documentation for :meth:`sge.dsp.Object.event_collision` for</span>
<span class="sd">        more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Game.event_paused_step"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Game.event_paused_step">[docs]</a>    <span class="k">def</span> <span class="nf">event_paused_step</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">time_passed</span><span class="p">,</span> <span class="n">delta_mult</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for :meth:`sge.dsp.Game.event_step` for</span>
<span class="sd">        more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Game.event_paused_key_press"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Game.event_paused_key_press">[docs]</a>    <span class="k">def</span> <span class="nf">event_paused_key_press</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">char</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for :class:`sge.input.KeyPress` for more</span>
<span class="sd">        information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Game.event_paused_key_release"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Game.event_paused_key_release">[docs]</a>    <span class="k">def</span> <span class="nf">event_paused_key_release</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for :class:`sge.input.KeyRelease` for more</span>
<span class="sd">        information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Game.event_paused_mouse_move"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Game.event_paused_mouse_move">[docs]</a>    <span class="k">def</span> <span class="nf">event_paused_mouse_move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for :class:`sge.input.MouseMove` for more</span>
<span class="sd">        information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Game.event_paused_mouse_button_press"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Game.event_paused_mouse_button_press">[docs]</a>    <span class="k">def</span> <span class="nf">event_paused_mouse_button_press</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">button</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for :class:`sge.input.MouseButtonPress`</span>
<span class="sd">        for more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Game.event_paused_mouse_button_release"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Game.event_paused_mouse_button_release">[docs]</a>    <span class="k">def</span> <span class="nf">event_paused_mouse_button_release</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">button</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for :class:`sge.input.MouseButtonRelease`</span>
<span class="sd">        for more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Game.event_paused_joystick_axis_move"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Game.event_paused_joystick_axis_move">[docs]</a>    <span class="k">def</span> <span class="nf">event_paused_joystick_axis_move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">js_name</span><span class="p">,</span> <span class="n">js_id</span><span class="p">,</span> <span class="n">axis</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for :class:`sge.input.JoystickAxisMove`</span>
<span class="sd">        for more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Game.event_paused_joystick_hat_move"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Game.event_paused_joystick_hat_move">[docs]</a>    <span class="k">def</span> <span class="nf">event_paused_joystick_hat_move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">js_name</span><span class="p">,</span> <span class="n">js_id</span><span class="p">,</span> <span class="n">hat</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for :class:`sge.input.JoystickHatMove` for</span>
<span class="sd">        more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Game.event_paused_joystick_trackball_move"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Game.event_paused_joystick_trackball_move">[docs]</a>    <span class="k">def</span> <span class="nf">event_paused_joystick_trackball_move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">js_name</span><span class="p">,</span> <span class="n">js_id</span><span class="p">,</span> <span class="n">ball</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for</span>
<span class="sd">        :class:`sge.input.JoystickTrackballMove` for more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Game.event_paused_joystick_button_press"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Game.event_paused_joystick_button_press">[docs]</a>    <span class="k">def</span> <span class="nf">event_paused_joystick_button_press</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">js_name</span><span class="p">,</span> <span class="n">js_id</span><span class="p">,</span> <span class="n">button</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for :class:`sge.input.JoystickButtonPress`</span>
<span class="sd">        for more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Game.event_paused_joystick_button_release"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Game.event_paused_joystick_button_release">[docs]</a>    <span class="k">def</span> <span class="nf">event_paused_joystick_button_release</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">js_name</span><span class="p">,</span> <span class="n">js_id</span><span class="p">,</span> <span class="n">button</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for</span>
<span class="sd">        :class:`sge.input.JoystickButtonRelease` for more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Game.event_paused_joystick"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Game.event_paused_joystick">[docs]</a>    <span class="k">def</span> <span class="nf">event_paused_joystick</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">js_name</span><span class="p">,</span> <span class="n">js_id</span><span class="p">,</span> <span class="n">input_type</span><span class="p">,</span> <span class="n">input_id</span><span class="p">,</span>
                              <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for :class:`sge.input.JoystickEvent` for</span>
<span class="sd">        more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Game.event_paused_gain_keyboard_focus"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Game.event_paused_gain_keyboard_focus">[docs]</a>    <span class="k">def</span> <span class="nf">event_paused_gain_keyboard_focus</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for :class:`sge.input.KeyboardFocusGain`</span>
<span class="sd">        for more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Game.event_paused_lose_keyboard_focus"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Game.event_paused_lose_keyboard_focus">[docs]</a>    <span class="k">def</span> <span class="nf">event_paused_lose_keyboard_focus</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for :class:`sge.input.KeyboardFocusLose`</span>
<span class="sd">        for more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Game.event_paused_gain_mouse_focus"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Game.event_paused_gain_mouse_focus">[docs]</a>    <span class="k">def</span> <span class="nf">event_paused_gain_mouse_focus</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for :class:`sge.input.MouseFocusGain` for</span>
<span class="sd">        more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Game.event_paused_lose_mouse_focus"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Game.event_paused_lose_mouse_focus">[docs]</a>    <span class="k">def</span> <span class="nf">event_paused_lose_mouse_focus</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for :class:`sge.input.MouseFocusLose` for</span>
<span class="sd">        more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Game.event_paused_close"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Game.event_paused_close">[docs]</a>    <span class="k">def</span> <span class="nf">event_paused_close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for :meth:`sge.dsp.Game.event_close` for</span>
<span class="sd">        more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div></div>


<div class="viewcode-block" id="Room"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Room">[docs]</a><span class="k">class</span> <span class="nc">Room</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This class stores the settings and objects found in a room.  Rooms</span>
<span class="sd">    are used to create separate parts of the game, such as levels and</span>
<span class="sd">    menu screens.</span>

<span class="sd">    .. attribute:: width</span>

<span class="sd">       The width of the room in pixels.  If set to :const:`None`,</span>
<span class="sd">       :attr:`sge.game.width` is used.</span>

<span class="sd">    .. attribute:: height</span>

<span class="sd">       The height of the room in pixels.  If set to :const:`None`,</span>
<span class="sd">       :attr:`sge.game.height` is used.</span>

<span class="sd">    .. attribute:: views</span>

<span class="sd">       A list containing all :class:`sge.dsp.View` objects in the room.</span>

<span class="sd">    .. attribute:: background</span>

<span class="sd">       The :class:`sge.gfx.Background` object used.</span>

<span class="sd">    .. attribute:: background_x</span>

<span class="sd">       The horizontal position of the background in the room.</span>

<span class="sd">    .. attribute:: background_y</span>

<span class="sd">       The vertical position of the background in the room.</span>

<span class="sd">    .. attribute:: object_area_width</span>

<span class="sd">       The width of this room&#39;s object areas in pixels.  If set to</span>
<span class="sd">       :const:`None`, :attr:`sge.game.width` is used.  For optimum</span>
<span class="sd">       performance, this should generally be about the average width of</span>
<span class="sd">       objects in the room which check for collisions.</span>

<span class="sd">    .. attribute:: object_area_height</span>

<span class="sd">       The height of this room&#39;s object areas in pixels.  If set to</span>
<span class="sd">       :const:`None`, :attr:`sge.game.height` is used.  For optimum</span>
<span class="sd">       performance, this should generally be about the average height of</span>
<span class="sd">       objects in the room which check for collisions.</span>

<span class="sd">    .. attribute:: alarms</span>

<span class="sd">       A dictionary containing the alarms of the room.  Each value</span>
<span class="sd">       decreases by 1 each frame (adjusted for delta timing if it is</span>
<span class="sd">       enabled).  When a value is at or below 0,</span>
<span class="sd">       :meth:`event_alarm` is executed with ``alarm_id`` set to the</span>
<span class="sd">       respective key, and the item is deleted from this dictionary.</span>

<span class="sd">    .. attribute:: objects</span>

<span class="sd">       A list containing all :class:`sge.dsp.Object` objects in the</span>
<span class="sd">       room.  (Read-only)</span>

<span class="sd">    .. attribute:: object_areas</span>

<span class="sd">       A 2-dimensional list of object areas, indexed in the following</span>
<span class="sd">       way::</span>

<span class="sd">           object_areas[x][y]</span>

<span class="sd">       Where ``x`` is the horizontal location of the left edge of the</span>
<span class="sd">       area in the room divided by :attr:`object_area_width`, and ``y``</span>
<span class="sd">       is the vertical location of the top edge of the area in the room</span>
<span class="sd">       divided by :attr:`object_area_height`.</span>

<span class="sd">       For example, if :attr:`object_area_width` is ``32`` and</span>
<span class="sd">       :attr:`object_area_height` is ``48``, then</span>
<span class="sd">       ``object_areas[2][4]`` indicates the object area with an x</span>
<span class="sd">       location of 64 and a y location of 192.</span>

<span class="sd">       Each object area is a set containing :class:`sge.dsp.Object`</span>
<span class="sd">       objects whose sprites or bounding boxes reside within the object</span>
<span class="sd">       area.</span>

<span class="sd">       Object areas are only created within the room, i.e. the</span>
<span class="sd">       horizontal location of an object area will always be less than</span>
<span class="sd">       :attr:`width`, and the vertical location of an object area will</span>
<span class="sd">       always be less than :attr:`height`.  Depending on the size of</span>
<span class="sd">       collision areas and the size of the room, however, the last row</span>
<span class="sd">       and/or the last column of collision areas may partially reside</span>
<span class="sd">       outside of the room.</span>

<span class="sd">       .. note::</span>

<span class="sd">          It is generally easier to use :meth:`get_objects_at` than to</span>
<span class="sd">          access this list directly.</span>

<span class="sd">    .. attribute:: object_area_void</span>

<span class="sd">       A set containing :class:`sge.dsp.Object` objects whose sprites or</span>
<span class="sd">       bounding boxes reside within any area not covered by the room&#39;s</span>
<span class="sd">       object area.</span>

<span class="sd">       .. note::</span>

<span class="sd">          Depending on the size of object areas and the size of the</span>
<span class="sd">          room, the &quot;void&quot; area may not include the entirety of the</span>
<span class="sd">          outside of the room.  There may be some space to the right of</span>
<span class="sd">          and/or below the room which is covered by collision areas.</span>

<span class="sd">    .. attribute:: rd</span>

<span class="sd">       Reserved dictionary for internal use by the SGE.  (Read-only)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">object_area_width</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__object_area_width</span>

    <span class="nd">@object_area_width.setter</span>
    <span class="k">def</span> <span class="nf">object_area_width</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">sge</span><span class="o">.</span><span class="n">game</span><span class="o">.</span><span class="n">width</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__object_area_width</span> <span class="o">=</span> <span class="n">value</span>
        <span class="n">r_set_object_areas</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">object_area_height</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__object_area_height</span>

    <span class="nd">@object_area_height.setter</span>
    <span class="k">def</span> <span class="nf">object_area_height</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">sge</span><span class="o">.</span><span class="n">game</span><span class="o">.</span><span class="n">height</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__object_area_height</span> <span class="o">=</span> <span class="n">value</span>
        <span class="n">r_set_object_areas</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

<div class="viewcode-block" id="Room.__init__"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Room.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">objects</span><span class="o">=</span><span class="p">(),</span> <span class="n">width</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">views</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="n">background</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">background_x</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">background_y</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                 <span class="n">object_area_width</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">object_area_height</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Arguments:</span>

<span class="sd">        - ``views`` -- A list containing all :class:`sge.dsp.View`</span>
<span class="sd">          objects in the room.  If set to :const:`None`, a new view will</span>
<span class="sd">          be created with ``x=0``, ``y=0``, and all other arguments</span>
<span class="sd">          unspecified, which will become the first view of the room.</span>
<span class="sd">        - ``background`` -- The :class:`sge.gfx.Background` object used.</span>
<span class="sd">          If set to :const:`None`, a new background will be created with</span>
<span class="sd">          no layers and the color set to black.</span>

<span class="sd">        All other arguments set the respective initial attributes of the</span>
<span class="sd">        room.  See the documentation for :class:`sge.dsp.Room` for more</span>
<span class="sd">        information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rd</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="n">width</span> <span class="k">if</span> <span class="n">width</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="k">else</span> <span class="n">sge</span><span class="o">.</span><span class="n">game</span><span class="o">.</span><span class="n">width</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="n">height</span> <span class="k">if</span> <span class="n">height</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="k">else</span> <span class="n">sge</span><span class="o">.</span><span class="n">game</span><span class="o">.</span><span class="n">height</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rd</span><span class="p">[</span><span class="s2">&quot;swidth&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rd</span><span class="p">[</span><span class="s2">&quot;sheight&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span>

        <span class="k">if</span> <span class="n">object_area_width</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">object_area_width</span> <span class="o">=</span> <span class="n">sge</span><span class="o">.</span><span class="n">game</span><span class="o">.</span><span class="n">width</span>
        <span class="k">if</span> <span class="n">object_area_height</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">object_area_height</span> <span class="o">=</span> <span class="n">sge</span><span class="o">.</span><span class="n">game</span><span class="o">.</span><span class="n">height</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__object_area_width</span> <span class="o">=</span> <span class="n">object_area_width</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__object_area_height</span> <span class="o">=</span> <span class="n">object_area_height</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">background_x</span> <span class="o">=</span> <span class="n">background_x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">background_y</span> <span class="o">=</span> <span class="n">background_y</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">alarms</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rd</span><span class="p">[</span><span class="s2">&quot;new_objects&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rd</span><span class="p">[</span><span class="s2">&quot;projections&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">if</span> <span class="n">views</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">views</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">views</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">views</span> <span class="o">=</span> <span class="p">[</span><span class="n">View</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)]</span>

        <span class="k">if</span> <span class="n">background</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">background</span> <span class="o">=</span> <span class="n">background</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">background</span> <span class="o">=</span> <span class="n">gfx</span><span class="o">.</span><span class="n">Background</span><span class="p">([],</span> <span class="n">gfx</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span><span class="s2">&quot;black&quot;</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">rd</span><span class="p">[</span><span class="s2">&quot;started&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">False</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">objects</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">r_set_object_areas</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">sge</span><span class="o">.</span><span class="n">game</span><span class="o">.</span><span class="n">mouse</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">objects</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span></div>

<div class="viewcode-block" id="Room.add"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Room.add">[docs]</a>    <span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add an object to the room.</span>

<span class="sd">        Arguments:</span>

<span class="sd">        - ``obj`` -- The :class:`sge.dsp.Object` object to add.</span>

<span class="sd">        .. warning::</span>

<span class="sd">           This method modifies the contents of :attr:`objects`.  Do not</span>
<span class="sd">           call this method during a loop through :attr:`objects`; doing</span>
<span class="sd">           so may cause problems with the loop. To get around this, you</span>
<span class="sd">           can create a shallow copy of :attr:`objects` to iterate</span>
<span class="sd">           through instead, e.g.::</span>

<span class="sd">               for obj in self.objects[:]:</span>
<span class="sd">                   self.add(obj.friend)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">obj</span><span class="o">.</span><span class="n">alive</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="k">if</span> <span class="n">obj</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">objects</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span> <span class="ow">is</span> <span class="n">sge</span><span class="o">.</span><span class="n">game</span><span class="o">.</span><span class="n">current_room</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">rd</span><span class="p">[</span><span class="s2">&quot;started&quot;</span><span class="p">]:</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">event_create</span><span class="p">()</span>
                <span class="n">obj</span><span class="o">.</span><span class="n">rd</span><span class="p">[</span><span class="s2">&quot;object_areas&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
                <span class="n">o_update_object_areas</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
                <span class="n">o_update_collision_lists</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">active</span><span class="p">:</span>
                    <span class="n">r</span><span class="o">.</span><span class="n">_active_objects</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">rd</span><span class="p">[</span><span class="s2">&quot;new_objects&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span></div>

<div class="viewcode-block" id="Room.remove"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Room.remove">[docs]</a>    <span class="k">def</span> <span class="nf">remove</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Remove an object from the room.</span>

<span class="sd">        Arguments:</span>

<span class="sd">        - ``obj`` -- The :class:`sge.dsp.Object` object to remove.</span>

<span class="sd">        .. warning::</span>

<span class="sd">           This method modifies the contents of :attr:`objects`.  Do not</span>
<span class="sd">           call this method during a loop through :attr:`objects`; doing</span>
<span class="sd">           so may cause problems with the loop. To get around this, you</span>
<span class="sd">           can create a shallow copy of :attr:`objects` to iterate</span>
<span class="sd">           through instead, e.g.::</span>

<span class="sd">               for obj in self.objects[:]:</span>
<span class="sd">                   self.remove(obj)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">while</span> <span class="n">obj</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">objects</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>

        <span class="k">while</span> <span class="n">obj</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">rd</span><span class="p">[</span><span class="s2">&quot;new_objects&quot;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rd</span><span class="p">[</span><span class="s2">&quot;new_objects&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span> <span class="ow">is</span> <span class="n">sge</span><span class="o">.</span><span class="n">game</span><span class="o">.</span><span class="n">current_room</span><span class="p">:</span>
            <span class="n">o_update_object_areas</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
            <span class="n">o_update_collision_lists</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
            <span class="n">r</span><span class="o">.</span><span class="n">_active_objects</span><span class="o">.</span><span class="n">discard</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
            <span class="n">obj</span><span class="o">.</span><span class="n">event_destroy</span><span class="p">()</span></div>

<div class="viewcode-block" id="Room.start"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Room.start">[docs]</a>    <span class="k">def</span> <span class="nf">start</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">transition</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">transition_time</span><span class="o">=</span><span class="mi">1500</span><span class="p">,</span>
              <span class="n">transition_arg</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Start the room.</span>

<span class="sd">        Arguments:</span>

<span class="sd">        - ``transition`` -- The type of transition to use.  Should be</span>
<span class="sd">          one of the following:</span>

<span class="sd">          - :const:`None` (no transition)</span>
<span class="sd">          - ``&quot;fade&quot;`` (fade to black)</span>
<span class="sd">          - ``&quot;dissolve&quot;``</span>
<span class="sd">          - ``&quot;pixelate&quot;``</span>
<span class="sd">          - ``&quot;wipe_left&quot;`` (wipe right to left)</span>
<span class="sd">          - ``&quot;wipe_right&quot;`` (wipe left to right)</span>
<span class="sd">          - ``&quot;wipe_up&quot;`` (wipe bottom to top)</span>
<span class="sd">          - ``&quot;wipe_down&quot;`` (wipe top to bottom)</span>
<span class="sd">          - ``&quot;wipe_upleft&quot;`` (wipe bottom-right to top-left)</span>
<span class="sd">          - ``&quot;wipe_upright&quot;`` (wipe bottom-left to top-right)</span>
<span class="sd">          - ``&quot;wipe_downleft&quot;`` (wipe top-right to bottom-left)</span>
<span class="sd">          - ``&quot;wipe_downright&quot;`` (wipe top-left to bottom-right)</span>
<span class="sd">          - ``&quot;wipe_matrix&quot;``</span>
<span class="sd">          - ``&quot;iris_in&quot;``</span>
<span class="sd">          - ``&quot;iris_out&quot;``</span>

<span class="sd">          If an unsupported value is given, default to :const:`None`.</span>

<span class="sd">        - ``transition_time`` -- The time the transition should take in</span>
<span class="sd">          milliseconds.  Has no effect if ``transition`` is</span>
<span class="sd">          :const:`None`.</span>

<span class="sd">        - ``transition_arg`` -- An arbitrary argument that can be used</span>
<span class="sd">          by the following transitions:</span>

<span class="sd">          - ``&quot;wipe_matrix&quot;`` -- The size of each square in the matrix</span>
<span class="sd">            transition as a tuple in the form ``(w, h)``, where ``w`` is</span>
<span class="sd">            the width and ``h`` is the height.  Default is ``(4, 4)``.</span>
<span class="sd">          - ``&quot;iris_in&quot;`` and ``&quot;iris_out&quot;`` -- The position of the</span>
<span class="sd">            center of the iris as a tuple in the form ``(x, y)``, where</span>
<span class="sd">            ``x`` is the horizontal location relative to the window and</span>
<span class="sd">            ``y`` is the vertical location relative to the window.</span>
<span class="sd">            Default is the center of the window.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">transitions</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;fade&quot;</span><span class="p">:</span> <span class="n">r_update_fade</span><span class="p">,</span> <span class="s2">&quot;dissolve&quot;</span><span class="p">:</span> <span class="n">r_update_dissolve</span><span class="p">,</span>
            <span class="s2">&quot;pixelate&quot;</span><span class="p">:</span> <span class="n">r_update_pixelate</span><span class="p">,</span> <span class="s2">&quot;wipe_left&quot;</span><span class="p">:</span> <span class="n">r_update_wipe_left</span><span class="p">,</span>
            <span class="s2">&quot;wipe_right&quot;</span><span class="p">:</span> <span class="n">r_update_wipe_right</span><span class="p">,</span> <span class="s2">&quot;wipe_up&quot;</span><span class="p">:</span> <span class="n">r_update_wipe_up</span><span class="p">,</span>
            <span class="s2">&quot;wipe_down&quot;</span><span class="p">:</span> <span class="n">r_update_wipe_down</span><span class="p">,</span>
            <span class="s2">&quot;wipe_upleft&quot;</span><span class="p">:</span> <span class="n">r_update_wipe_upleft</span><span class="p">,</span>
            <span class="s2">&quot;wipe_upright&quot;</span><span class="p">:</span> <span class="n">r_update_wipe_upright</span><span class="p">,</span>
            <span class="s2">&quot;wipe_downleft&quot;</span><span class="p">:</span> <span class="n">r_update_wipe_downleft</span><span class="p">,</span>
            <span class="s2">&quot;wipe_downright&quot;</span><span class="p">:</span> <span class="n">r_update_wipe_downright</span><span class="p">,</span>
            <span class="s2">&quot;wipe_matrix&quot;</span><span class="p">:</span> <span class="n">r_update_wipe_matrix</span><span class="p">,</span>
            <span class="s2">&quot;iris_in&quot;</span><span class="p">:</span> <span class="n">r_update_iris_in</span><span class="p">,</span> <span class="s2">&quot;iris_out&quot;</span><span class="p">:</span> <span class="n">r_update_iris_out</span><span class="p">}</span>

        <span class="k">if</span> <span class="n">transition</span> <span class="ow">in</span> <span class="n">transitions</span> <span class="ow">and</span> <span class="n">transition_time</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rd</span><span class="p">[</span><span class="s2">&quot;t_update&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">transitions</span><span class="p">[</span><span class="n">transition</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rd</span><span class="p">[</span><span class="s2">&quot;t_sprite&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">gfx</span><span class="o">.</span><span class="n">Sprite</span><span class="o">.</span><span class="n">from_screenshot</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rd</span><span class="p">[</span><span class="s2">&quot;t_duration&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">transition_time</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rd</span><span class="p">[</span><span class="s2">&quot;t_arg&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">transition_arg</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rd</span><span class="p">[</span><span class="s2">&quot;t_time_passed&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rd</span><span class="p">[</span><span class="s2">&quot;t_complete_last&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rd</span><span class="p">[</span><span class="s2">&quot;t_matrix_remaining&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rd</span><span class="p">[</span><span class="s2">&quot;t_update&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span>

        <span class="n">r</span><span class="o">.</span><span class="n">game_new_room</span> <span class="o">=</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="Room.get_objects_at"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Room.get_objects_at">[docs]</a>    <span class="k">def</span> <span class="nf">get_objects_at</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return a set of objects near a particular area.</span>

<span class="sd">        Arguments:</span>

<span class="sd">        - ``x`` -- The horizontal location relative to the room of the</span>
<span class="sd">          left edge of the area.</span>
<span class="sd">        - ``y`` -- The vertical location relative to the room of the</span>
<span class="sd">          top edge of the area.</span>
<span class="sd">        - ``width`` -- The width of the area in pixels.</span>
<span class="sd">        - ``height`` -- The height of the area in pixels.</span>

<span class="sd">        .. note::</span>

<span class="sd">           This function does not ensure that objects returned are</span>
<span class="sd">           actually *within* the given area.  It simply combines all</span>
<span class="sd">           object areas that need to be checked into a single set.  To</span>
<span class="sd">           ensure that an object is actually within the area, you must</span>
<span class="sd">           check the object manually, or use</span>
<span class="sd">           :func:`sge.collision.rectangle` instead.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">area</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">r_get_rectangle_object_areas</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">a</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                <span class="n">area</span> <span class="o">|=</span> <span class="bp">self</span><span class="o">.</span><span class="n">object_area_void</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">area</span> <span class="o">|=</span> <span class="bp">self</span><span class="o">.</span><span class="n">object_areas</span><span class="p">[</span><span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]][</span><span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span>

        <span class="k">return</span> <span class="n">area</span></div>
            

<div class="viewcode-block" id="Room.project_dot"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Room.project_dot">[docs]</a>    <span class="k">def</span> <span class="nf">project_dot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">color</span><span class="p">,</span> <span class="n">blend_mode</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Project a single-pixel dot onto the room.</span>

<span class="sd">        Arguments:</span>

<span class="sd">        - ``x`` -- The horizontal location relative to the room to</span>
<span class="sd">          project the dot.</span>
<span class="sd">        - ``y`` -- The vertical location relative to the room to project</span>
<span class="sd">          the dot.</span>
<span class="sd">        - ``z`` -- The Z-axis position of the projection in the room.</span>

<span class="sd">        See the documentation for :meth:`sge.gfx.Sprite.draw_dot` for</span>
<span class="sd">        more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_check_color</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>
        <span class="n">sprite</span> <span class="o">=</span> <span class="n">_get_dot_sprite</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">project_sprite</span><span class="p">(</span><span class="n">sprite</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">blend_mode</span><span class="p">)</span></div>

<div class="viewcode-block" id="Room.project_line"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Room.project_line">[docs]</a>    <span class="k">def</span> <span class="nf">project_line</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">color</span><span class="p">,</span> <span class="n">thickness</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                     <span class="n">anti_alias</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">blend_mode</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Project a line segment onto the room.</span>

<span class="sd">        Arguments:</span>

<span class="sd">        - ``x1`` -- The horizontal location relative to the room of the</span>
<span class="sd">          first endpoint of the projected line segment.</span>
<span class="sd">        - ``y1`` -- The vertical location relative to the room of the</span>
<span class="sd">          first endpoint of the projected line segment.</span>
<span class="sd">        - ``x2`` -- The horizontal location relative to the room of the</span>
<span class="sd">          second endpoint of the projected line segment.</span>
<span class="sd">        - ``y2`` -- The vertical location relative to the room of the</span>
<span class="sd">          second endpoint of the projected line segment.</span>
<span class="sd">        - ``z`` -- The Z-axis position of the projection in the room.</span>

<span class="sd">        See the documentation for :meth:`sge.gfx.Sprite.draw_line` for</span>
<span class="sd">        more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_check_color</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>

        <span class="n">thickness</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">thickness</span><span class="p">)</span>
        <span class="n">x</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">x2</span><span class="p">)</span> <span class="o">-</span> <span class="n">thickness</span> <span class="o">//</span> <span class="mi">2</span>
        <span class="n">y</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">y1</span><span class="p">,</span> <span class="n">y2</span><span class="p">)</span> <span class="o">-</span> <span class="n">thickness</span> <span class="o">//</span> <span class="mi">2</span>
        <span class="n">x1</span> <span class="o">-=</span> <span class="n">x</span>
        <span class="n">y1</span> <span class="o">-=</span> <span class="n">y</span>
        <span class="n">x2</span> <span class="o">-=</span> <span class="n">x</span>
        <span class="n">y2</span> <span class="o">-=</span> <span class="n">y</span>

        <span class="n">sprite</span> <span class="o">=</span> <span class="n">_get_line_sprite</span><span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="n">color</span><span class="p">,</span> <span class="n">thickness</span><span class="p">,</span> <span class="n">anti_alias</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">project_sprite</span><span class="p">(</span><span class="n">sprite</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">blend_mode</span><span class="p">)</span></div>

<div class="viewcode-block" id="Room.project_rectangle"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Room.project_rectangle">[docs]</a>    <span class="k">def</span> <span class="nf">project_rectangle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                          <span class="n">outline</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">outline_thickness</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">blend_mode</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Project a rectangle onto the room.</span>

<span class="sd">        Arguments:</span>

<span class="sd">        - ``x`` -- The horizontal location relative to the room to</span>
<span class="sd">          project the rectangle.</span>
<span class="sd">        - ``y`` -- The vertical location relative to the room to project</span>
<span class="sd">          the rectangle.</span>
<span class="sd">        - ``z`` -- The Z-axis position of the projection in the room.</span>

<span class="sd">        See the documentation for :meth:`sge.gfx.Sprite.draw_rectangle`</span>
<span class="sd">        for more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_check_color</span><span class="p">(</span><span class="n">fill</span><span class="p">)</span>
        <span class="n">_check_color</span><span class="p">(</span><span class="n">outline</span><span class="p">)</span>
        <span class="n">outline_thickness</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">outline_thickness</span><span class="p">)</span>
        <span class="n">draw_x</span> <span class="o">=</span> <span class="n">outline_thickness</span> <span class="o">//</span> <span class="mi">2</span>
        <span class="n">draw_y</span> <span class="o">=</span> <span class="n">outline_thickness</span> <span class="o">//</span> <span class="mi">2</span>
        <span class="n">x</span> <span class="o">-=</span> <span class="n">draw_x</span>
        <span class="n">y</span> <span class="o">-=</span> <span class="n">draw_y</span>
        <span class="n">sprite</span> <span class="o">=</span> <span class="n">_get_rectangle_sprite</span><span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">fill</span><span class="p">,</span> <span class="n">outline</span><span class="p">,</span>
                                       <span class="n">outline_thickness</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">project_sprite</span><span class="p">(</span><span class="n">sprite</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">blend_mode</span><span class="p">)</span></div>

<div class="viewcode-block" id="Room.project_ellipse"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Room.project_ellipse">[docs]</a>    <span class="k">def</span> <span class="nf">project_ellipse</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                        <span class="n">outline</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">outline_thickness</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">anti_alias</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                        <span class="n">blend_mode</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Project an ellipse onto the room.</span>

<span class="sd">        Arguments:</span>

<span class="sd">        - ``x`` -- The horizontal location relative to the room to</span>
<span class="sd">          position the imaginary rectangle containing the ellipse.</span>
<span class="sd">        - ``y`` -- The vertical location relative to the room to</span>
<span class="sd">          position the imaginary rectangle containing the ellipse.</span>
<span class="sd">        - ``z`` -- The Z-axis position of the projection in the room.</span>
<span class="sd">        - ``width`` -- The width of the ellipse.</span>
<span class="sd">        - ``height`` -- The height of the ellipse.</span>
<span class="sd">        - ``outline_thickness`` -- The thickness of the outline of the</span>
<span class="sd">          ellipse.</span>
<span class="sd">        - ``anti_alias`` -- Whether or not anti-aliasing should be used.</span>

<span class="sd">        See the documentation for :meth:`sge.gfx.Sprite.draw_ellipse`</span>
<span class="sd">        for more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_check_color</span><span class="p">(</span><span class="n">fill</span><span class="p">)</span>
        <span class="n">_check_color</span><span class="p">(</span><span class="n">outline</span><span class="p">)</span>
        <span class="n">outline_thickness</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">outline_thickness</span><span class="p">)</span>
        <span class="n">draw_x</span> <span class="o">=</span> <span class="n">outline_thickness</span> <span class="o">//</span> <span class="mi">2</span>
        <span class="n">draw_y</span> <span class="o">=</span> <span class="n">outline_thickness</span> <span class="o">//</span> <span class="mi">2</span>
        <span class="n">x</span> <span class="o">-=</span> <span class="n">draw_x</span>
        <span class="n">y</span> <span class="o">-=</span> <span class="n">draw_y</span>
        <span class="n">sprite</span> <span class="o">=</span> <span class="n">_get_ellipse_sprite</span><span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">fill</span><span class="p">,</span> <span class="n">outline</span><span class="p">,</span>
                                     <span class="n">outline_thickness</span><span class="p">,</span> <span class="n">anti_alias</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">project_sprite</span><span class="p">(</span><span class="n">sprite</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">blend_mode</span><span class="p">)</span></div>

<div class="viewcode-block" id="Room.project_circle"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Room.project_circle">[docs]</a>    <span class="k">def</span> <span class="nf">project_circle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">radius</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">outline</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                       <span class="n">outline_thickness</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">anti_alias</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">blend_mode</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Project a circle onto the room.</span>

<span class="sd">        Arguments:</span>

<span class="sd">        - ``x`` -- The horizontal location relative to the room to</span>
<span class="sd">          position the center of the circle.</span>
<span class="sd">        - ``y`` -- The vertical location relative to the room to</span>
<span class="sd">          position the center of the circle.</span>
<span class="sd">        - ``z`` -- The Z-axis position of the projection in the room.</span>

<span class="sd">        See the documentation for :meth:`sge.gfx.Sprite.draw_circle` for</span>
<span class="sd">        more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_check_color</span><span class="p">(</span><span class="n">fill</span><span class="p">)</span>
        <span class="n">_check_color</span><span class="p">(</span><span class="n">outline</span><span class="p">)</span>
        <span class="n">sprite</span> <span class="o">=</span> <span class="n">_get_circle_sprite</span><span class="p">(</span><span class="n">radius</span><span class="p">,</span> <span class="n">fill</span><span class="p">,</span> <span class="n">outline</span><span class="p">,</span> <span class="n">outline_thickness</span><span class="p">,</span>
                                    <span class="n">anti_alias</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">project_sprite</span><span class="p">(</span><span class="n">sprite</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">x</span> <span class="o">-</span> <span class="n">radius</span><span class="p">,</span> <span class="n">y</span> <span class="o">-</span> <span class="n">radius</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">blend_mode</span><span class="p">)</span></div>

<div class="viewcode-block" id="Room.project_polygon"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Room.project_polygon">[docs]</a>    <span class="k">def</span> <span class="nf">project_polygon</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">outline</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                        <span class="n">outline_thickness</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">anti_alias</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">blend_mode</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Draw a polygon on the sprite.</span>

<span class="sd">        Arguments:</span>

<span class="sd">        - ``points`` -- A list of points relative to the room to</span>
<span class="sd">          position each of the polygon&#39;s angles.  Each point should be a</span>
<span class="sd">          tuple in the form ``(x, y)``, where x is the horizontal</span>
<span class="sd">          location and y is the vertical location.</span>
<span class="sd">        - ``z`` -- The Z-axis position of the projection in the room.</span>

<span class="sd">        See the documentation for :meth:`sge.gfx.Sprite.draw_polygon`</span>
<span class="sd">        for more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_check_color</span><span class="p">(</span><span class="n">fill</span><span class="p">)</span>
        <span class="n">_check_color</span><span class="p">(</span><span class="n">outline</span><span class="p">)</span>

        <span class="n">xlist</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">ylist</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">point</span> <span class="ow">in</span> <span class="n">points</span><span class="p">:</span>
            <span class="n">xlist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">point</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="n">ylist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">point</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">x</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">xlist</span><span class="p">)</span>
        <span class="n">y</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">ylist</span><span class="p">)</span>

        <span class="n">sprite</span> <span class="o">=</span> <span class="n">_get_polygon_sprite</span><span class="p">(</span><span class="n">points</span><span class="p">,</span> <span class="n">fill</span><span class="p">,</span> <span class="n">outline</span><span class="p">,</span> <span class="n">outline_thickness</span><span class="p">,</span>
                                     <span class="n">anti_alias</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">project_sprite</span><span class="p">(</span><span class="n">sprite</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">blend_mode</span><span class="p">)</span></div>

<div class="viewcode-block" id="Room.project_sprite"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Room.project_sprite">[docs]</a>    <span class="k">def</span> <span class="nf">project_sprite</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sprite</span><span class="p">,</span> <span class="n">image</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">blend_mode</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Project a sprite onto the room.</span>

<span class="sd">        Arguments:</span>

<span class="sd">        - ``x`` -- The horizontal location relative to the room to</span>
<span class="sd">          project ``sprite``.</span>
<span class="sd">        - ``y`` -- The vertical location relative to the room to project</span>
<span class="sd">          ``sprite``.</span>
<span class="sd">        - ``z`` -- The Z-axis position of the projection in the room.</span>

<span class="sd">        See the documentation for :meth:`sge.gfx.Sprite.draw_sprite` for</span>
<span class="sd">        more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">img</span> <span class="o">=</span> <span class="n">s_get_image</span><span class="p">(</span><span class="n">sprite</span><span class="p">,</span> <span class="n">image</span><span class="p">)</span>
        <span class="n">x</span> <span class="o">-=</span> <span class="n">sprite</span><span class="o">.</span><span class="n">origin_x</span>
        <span class="n">y</span> <span class="o">-=</span> <span class="n">sprite</span><span class="o">.</span><span class="n">origin_y</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rd</span><span class="p">[</span><span class="s2">&quot;projections&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">img</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">blend_mode</span><span class="p">))</span></div>

<div class="viewcode-block" id="Room.project_text"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Room.project_text">[docs]</a>    <span class="k">def</span> <span class="nf">project_text</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">font</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                    <span class="n">color</span><span class="o">=</span><span class="n">sge</span><span class="o">.</span><span class="n">gfx</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span><span class="s2">&quot;white&quot;</span><span class="p">),</span> <span class="n">halign</span><span class="o">=</span><span class="s2">&quot;left&quot;</span><span class="p">,</span>
                    <span class="n">valign</span><span class="o">=</span><span class="s2">&quot;top&quot;</span><span class="p">,</span> <span class="n">anti_alias</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">blend_mode</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Project text onto the room.</span>

<span class="sd">        Arguments:</span>

<span class="sd">        - ``x`` -- The horizontal location relative to the room to</span>
<span class="sd">          project the text.</span>
<span class="sd">        - ``y`` -- The vertical location relative to the room to project</span>
<span class="sd">          the text.</span>
<span class="sd">        - ``z`` -- The Z-axis position of the projection in the room.</span>

<span class="sd">        See the documentation for :meth:`sge.gfx.Sprite.draw_text` for</span>
<span class="sd">        more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_check_color</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>
        <span class="n">sprite</span> <span class="o">=</span> <span class="n">s_from_text</span><span class="p">(</span><span class="n">gfx</span><span class="o">.</span><span class="n">Sprite</span><span class="p">,</span> <span class="n">font</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">color</span><span class="p">,</span>
                             <span class="n">halign</span><span class="p">,</span> <span class="n">valign</span><span class="p">,</span> <span class="n">anti_alias</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">project_sprite</span><span class="p">(</span><span class="n">sprite</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">blend_mode</span><span class="p">)</span></div>

<div class="viewcode-block" id="Room.event_room_start"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Room.event_room_start">[docs]</a>    <span class="k">def</span> <span class="nf">event_room_start</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Called when the room is started for the first time.  It is</span>
<span class="sd">        always called after any :meth:`sge.dsp.Game.event_game_start`</span>
<span class="sd">        and before any :class:`sge.dsp.Object.event_create` occurring at</span>
<span class="sd">        the same time.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Room.event_room_resume"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Room.event_room_resume">[docs]</a>    <span class="k">def</span> <span class="nf">event_room_resume</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Called when the room is started after it has already previously</span>
<span class="sd">        been started.  It is always called before any</span>
<span class="sd">        :meth:`sge.dsp.Object.event_create` occurring at the same time.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Room.event_room_end"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Room.event_room_end">[docs]</a>    <span class="k">def</span> <span class="nf">event_room_end</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Called when another room is started or the game ends while this</span>
<span class="sd">        room is the current room.  It is always called before any</span>
<span class="sd">        :meth:`sge.dsp.Game.event_game_end` occurring at the same time.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Room.event_step"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Room.event_step">[docs]</a>    <span class="k">def</span> <span class="nf">event_step</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">time_passed</span><span class="p">,</span> <span class="n">delta_mult</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for :meth:`sge.dsp.Game.event_step` for</span>
<span class="sd">        more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Room.event_alarm"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Room.event_alarm">[docs]</a>    <span class="k">def</span> <span class="nf">event_alarm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">alarm_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for :attr:`sge.dsp.Room.alarms` for more</span>
<span class="sd">        information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Room.event_key_press"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Room.event_key_press">[docs]</a>    <span class="k">def</span> <span class="nf">event_key_press</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">char</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for :class:`sge.input.KeyPress` for more</span>
<span class="sd">        information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Room.event_key_release"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Room.event_key_release">[docs]</a>    <span class="k">def</span> <span class="nf">event_key_release</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for :class:`sge.input.KeyRelease` for more</span>
<span class="sd">        information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Room.event_mouse_move"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Room.event_mouse_move">[docs]</a>    <span class="k">def</span> <span class="nf">event_mouse_move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for :class:`sge.input.MouseMove` for more</span>
<span class="sd">        information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Room.event_mouse_button_press"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Room.event_mouse_button_press">[docs]</a>    <span class="k">def</span> <span class="nf">event_mouse_button_press</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">button</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Mouse button press event.</span>

<span class="sd">        See the documentation for :class:`sge.input.MouseButtonPress`</span>
<span class="sd">        for more information.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Room.event_mouse_button_release"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Room.event_mouse_button_release">[docs]</a>    <span class="k">def</span> <span class="nf">event_mouse_button_release</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">button</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for :class:`sge.input.MouseButtonRelease`</span>
<span class="sd">        for more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Room.event_joystick_axis_move"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Room.event_joystick_axis_move">[docs]</a>    <span class="k">def</span> <span class="nf">event_joystick_axis_move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">js_name</span><span class="p">,</span> <span class="n">js_id</span><span class="p">,</span> <span class="n">axis</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for :class:`sge.input.JoystickAxisMove`</span>
<span class="sd">        for more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Room.event_joystick_hat_move"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Room.event_joystick_hat_move">[docs]</a>    <span class="k">def</span> <span class="nf">event_joystick_hat_move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">js_name</span><span class="p">,</span> <span class="n">js_id</span><span class="p">,</span> <span class="n">hat</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for :class:`sge.input.JoystickHatMove` for</span>
<span class="sd">        more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Room.event_joystick_trackball_move"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Room.event_joystick_trackball_move">[docs]</a>    <span class="k">def</span> <span class="nf">event_joystick_trackball_move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">js_name</span><span class="p">,</span> <span class="n">js_id</span><span class="p">,</span> <span class="n">ball</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for</span>
<span class="sd">        :class:`sge.input.JoystickTrackballMove` for more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Room.event_joystick_button_press"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Room.event_joystick_button_press">[docs]</a>    <span class="k">def</span> <span class="nf">event_joystick_button_press</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">js_name</span><span class="p">,</span> <span class="n">js_id</span><span class="p">,</span> <span class="n">button</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for :class:`sge.input.JoystickButtonPress`</span>
<span class="sd">        for more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Room.event_joystick_button_release"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Room.event_joystick_button_release">[docs]</a>    <span class="k">def</span> <span class="nf">event_joystick_button_release</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">js_name</span><span class="p">,</span> <span class="n">js_id</span><span class="p">,</span> <span class="n">button</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for</span>
<span class="sd">        :class:`sge.input.JoystickButtonRelease` for more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Room.event_joystick"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Room.event_joystick">[docs]</a>    <span class="k">def</span> <span class="nf">event_joystick</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">js_name</span><span class="p">,</span> <span class="n">js_id</span><span class="p">,</span> <span class="n">input_type</span><span class="p">,</span> <span class="n">input_id</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for :class:`sge.input.JoystickEvent` for</span>
<span class="sd">        more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Room.event_gain_keyboard_focus"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Room.event_gain_keyboard_focus">[docs]</a>    <span class="k">def</span> <span class="nf">event_gain_keyboard_focus</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for :class:`sge.input.KeyboardFocusGain`</span>
<span class="sd">        for more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Room.event_lose_keyboard_focus"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Room.event_lose_keyboard_focus">[docs]</a>    <span class="k">def</span> <span class="nf">event_lose_keyboard_focus</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for :class:`sge.input.KeyboardFocusLose`</span>
<span class="sd">        for more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Room.event_gain_mouse_focus"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Room.event_gain_mouse_focus">[docs]</a>    <span class="k">def</span> <span class="nf">event_gain_mouse_focus</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for :class:`sge.input.MouseFocusGain` for</span>
<span class="sd">        more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Room.event_lose_mouse_focus"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Room.event_lose_mouse_focus">[docs]</a>    <span class="k">def</span> <span class="nf">event_lose_mouse_focus</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for :class:`sge.input.MouseFocusLose` for</span>
<span class="sd">        more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Room.event_close"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Room.event_close">[docs]</a>    <span class="k">def</span> <span class="nf">event_close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This is always called before any</span>
<span class="sd">        :meth:`sge.dsp.Game.event_close` occurring at the same time.</span>

<span class="sd">        See the documentation for :class:`sge.input.QuitRequest` for</span>
<span class="sd">        more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Room.event_paused_step"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Room.event_paused_step">[docs]</a>    <span class="k">def</span> <span class="nf">event_paused_step</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">time_passed</span><span class="p">,</span> <span class="n">delta_mult</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for :meth:`sge.dsp.Game.event_step` for</span>
<span class="sd">        more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Room.event_paused_key_press"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Room.event_paused_key_press">[docs]</a>    <span class="k">def</span> <span class="nf">event_paused_key_press</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">char</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for :class:`sge.input.KeyPress` for more</span>
<span class="sd">        information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Room.event_paused_key_release"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Room.event_paused_key_release">[docs]</a>    <span class="k">def</span> <span class="nf">event_paused_key_release</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for :class:`sge.input.KeyRelease` for more</span>
<span class="sd">        information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Room.event_paused_mouse_move"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Room.event_paused_mouse_move">[docs]</a>    <span class="k">def</span> <span class="nf">event_paused_mouse_move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for :class:`sge.input.MouseMove` for more</span>
<span class="sd">        information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Room.event_paused_mouse_button_press"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Room.event_paused_mouse_button_press">[docs]</a>    <span class="k">def</span> <span class="nf">event_paused_mouse_button_press</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">button</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for :class:`sge.input.MouseButtonPress`</span>
<span class="sd">        for more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Room.event_paused_mouse_button_release"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Room.event_paused_mouse_button_release">[docs]</a>    <span class="k">def</span> <span class="nf">event_paused_mouse_button_release</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">button</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for :class:`sge.input.MouseButtonRelease`</span>
<span class="sd">        for more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Room.event_paused_joystick_axis_move"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Room.event_paused_joystick_axis_move">[docs]</a>    <span class="k">def</span> <span class="nf">event_paused_joystick_axis_move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">js_name</span><span class="p">,</span> <span class="n">js_id</span><span class="p">,</span> <span class="n">axis</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for :class:`sge.input.JoystickAxisMove`</span>
<span class="sd">        for more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Room.event_paused_joystick_hat_move"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Room.event_paused_joystick_hat_move">[docs]</a>    <span class="k">def</span> <span class="nf">event_paused_joystick_hat_move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">js_name</span><span class="p">,</span> <span class="n">js_id</span><span class="p">,</span> <span class="n">hat</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for :class:`sge.input.JoystickHatMove` for</span>
<span class="sd">        more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Room.event_paused_joystick_trackball_move"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Room.event_paused_joystick_trackball_move">[docs]</a>    <span class="k">def</span> <span class="nf">event_paused_joystick_trackball_move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">js_name</span><span class="p">,</span> <span class="n">js_id</span><span class="p">,</span> <span class="n">ball</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for</span>
<span class="sd">        :class:`sge.input.JoystickTrackballMove` for more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Room.event_paused_joystick_button_press"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Room.event_paused_joystick_button_press">[docs]</a>    <span class="k">def</span> <span class="nf">event_paused_joystick_button_press</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">js_name</span><span class="p">,</span> <span class="n">js_id</span><span class="p">,</span> <span class="n">button</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for :class:`sge.input.JoystickButtonPress`</span>
<span class="sd">        for more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Room.event_paused_joystick_button_release"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Room.event_paused_joystick_button_release">[docs]</a>    <span class="k">def</span> <span class="nf">event_paused_joystick_button_release</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">js_name</span><span class="p">,</span> <span class="n">js_id</span><span class="p">,</span> <span class="n">button</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for</span>
<span class="sd">        :class:`sge.input.JoystickButtonRelease` for more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Room.event_paused_joystick"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Room.event_paused_joystick">[docs]</a>    <span class="k">def</span> <span class="nf">event_paused_joystick</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">js_name</span><span class="p">,</span> <span class="n">js_id</span><span class="p">,</span> <span class="n">input_type</span><span class="p">,</span> <span class="n">input_id</span><span class="p">,</span>
                              <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for :class:`sge.input.JoystickEvent` for</span>
<span class="sd">        more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Room.event_paused_gain_keyboard_focus"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Room.event_paused_gain_keyboard_focus">[docs]</a>    <span class="k">def</span> <span class="nf">event_paused_gain_keyboard_focus</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for :class:`sge.input.KeyboardFocusGain`</span>
<span class="sd">        for more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Room.event_paused_lose_keyboard_focus"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Room.event_paused_lose_keyboard_focus">[docs]</a>    <span class="k">def</span> <span class="nf">event_paused_lose_keyboard_focus</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for :class:`sge.input.KeyboardFocusLose`</span>
<span class="sd">        for more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Room.event_paused_gain_mouse_focus"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Room.event_paused_gain_mouse_focus">[docs]</a>    <span class="k">def</span> <span class="nf">event_paused_gain_mouse_focus</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for :class:`sge.input.MouseFocusGain` for</span>
<span class="sd">        more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Room.event_paused_lose_mouse_focus"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Room.event_paused_lose_mouse_focus">[docs]</a>    <span class="k">def</span> <span class="nf">event_paused_lose_mouse_focus</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for :class:`sge.input.MouseFocusLose` for</span>
<span class="sd">        more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Room.event_paused_close"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Room.event_paused_close">[docs]</a>    <span class="k">def</span> <span class="nf">event_paused_close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for :meth:`sge.dsp.Room.event_close` for</span>
<span class="sd">        more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div></div>


<div class="viewcode-block" id="View"><a class="viewcode-back" href="../../dsp.html#sge.dsp.View">[docs]</a><span class="k">class</span> <span class="nc">View</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This class controls what the player sees in a room at any given</span>
<span class="sd">    time.  Multiple views can exist in a room, and this can be used to</span>
<span class="sd">    create a split-screen effect.</span>

<span class="sd">    .. attribute:: x</span>

<span class="sd">       The horizontal position of the view in the room.  When set, if it</span>
<span class="sd">       brings the view outside of the room it is in, it will be</span>
<span class="sd">       re-adjusted so that the view is completely inside the room.</span>

<span class="sd">    .. attribute:: y</span>

<span class="sd">       The vertical position of the view in the room.  When set, if it</span>
<span class="sd">       brings the view outside of the room it is in, it will be</span>
<span class="sd">       re-adjusted so that the view is completely inside the room.</span>

<span class="sd">    .. attribute:: xport</span>

<span class="sd">       The horizontal position of the view port on the window.</span>

<span class="sd">    .. attribute:: yport</span>

<span class="sd">       The vertical position of the view port on the window.</span>

<span class="sd">    .. attribute:: width</span>

<span class="sd">       The width of the view.  When set, if it results in the view being</span>
<span class="sd">       outside of the room it is in, :attr:`x` will be adjusted so that</span>
<span class="sd">       the view is completely inside the room.</span>

<span class="sd">    .. attribute:: height</span>

<span class="sd">       The height of the view.  When set, if it results in the view</span>
<span class="sd">       being outside the room it is in, :attr:`y` will be adjusted so</span>
<span class="sd">       that the view is completely inside the room.</span>

<span class="sd">    .. attribute:: wport</span>

<span class="sd">       The width of the view port.  Set to :const:`None` to make it the</span>
<span class="sd">       same as :attr:`width`.  If this value differs from :attr:`width`,</span>
<span class="sd">       the image will be horizontally scaled so that it fills the port.</span>

<span class="sd">    .. attribute:: hport</span>

<span class="sd">       The height of the view port.  Set to :const:`None` to make it the</span>
<span class="sd">       same as :attr:`height`.  If this value differs from</span>
<span class="sd">       :attr:`height`, the image will be vertically scaled so that it</span>
<span class="sd">       fills the port.</span>

<span class="sd">    .. attribute:: rd</span>

<span class="sd">       Reserved dictionary for internal use by the SGE.  (Read-only)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">x</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">rd</span><span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">]</span>

    <span class="nd">@x.setter</span>
    <span class="k">def</span> <span class="nf">x</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rd</span><span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="n">v_limit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">y</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">rd</span><span class="p">[</span><span class="s2">&quot;y&quot;</span><span class="p">]</span>

    <span class="nd">@y.setter</span>
    <span class="k">def</span> <span class="nf">y</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rd</span><span class="p">[</span><span class="s2">&quot;y&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="n">v_limit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">width</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__width</span>

    <span class="nd">@width.setter</span>
    <span class="k">def</span> <span class="nf">width</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__width</span> <span class="o">=</span> <span class="n">value</span>
        <span class="n">v_limit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">height</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__height</span>

    <span class="nd">@height.setter</span>
    <span class="k">def</span> <span class="nf">height</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__height</span> <span class="o">=</span> <span class="n">value</span>
        <span class="n">v_limit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">wport</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__wport</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__wport</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span>

    <span class="nd">@wport.setter</span>
    <span class="k">def</span> <span class="nf">wport</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__wport</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">hport</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__hport</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__hport</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span>

    <span class="nd">@hport.setter</span>
    <span class="k">def</span> <span class="nf">hport</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__hport</span> <span class="o">=</span> <span class="n">value</span>

<div class="viewcode-block" id="View.__init__"><a class="viewcode-back" href="../../dsp.html#sge.dsp.View.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">xport</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">yport</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="n">wport</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">hport</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Arguments:</span>

<span class="sd">        - ``width`` -- The width of the view.  If set to :const:`None`,</span>
<span class="sd">          it will become ``sge.game.width - xport``.</span>
<span class="sd">        - ``height`` -- The height of the view.  If set to</span>
<span class="sd">          :const:`None`, it will become ``sge.game.height - yport``.</span>

<span class="sd">        All other arugments set the respective initial attributes of the</span>
<span class="sd">        view.  See the documentation for :class:`sge.dsp.View` for more</span>
<span class="sd">        information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rd</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rd</span><span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rd</span><span class="p">[</span><span class="s2">&quot;y&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">y</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xport</span> <span class="o">=</span> <span class="n">xport</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">yport</span> <span class="o">=</span> <span class="n">yport</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__width</span> <span class="o">=</span> <span class="n">width</span> <span class="k">if</span> <span class="n">width</span> <span class="k">else</span> <span class="n">sge</span><span class="o">.</span><span class="n">game</span><span class="o">.</span><span class="n">width</span> <span class="o">-</span> <span class="n">xport</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__height</span> <span class="o">=</span> <span class="n">height</span> <span class="k">if</span> <span class="n">height</span> <span class="k">else</span> <span class="n">sge</span><span class="o">.</span><span class="n">game</span><span class="o">.</span><span class="n">height</span> <span class="o">-</span> <span class="n">yport</span>
        <span class="n">v_limit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wport</span> <span class="o">=</span> <span class="n">wport</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hport</span> <span class="o">=</span> <span class="n">hport</span></div></div>


<div class="viewcode-block" id="Object"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Object">[docs]</a><span class="k">class</span> <span class="nc">Object</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This class is used for game objects, such as the player, enemies,</span>
<span class="sd">    bullets, and the HUD.  Generally, each type of object has its own</span>
<span class="sd">    subclass of :class:`sge.dsp.Object`.</span>

<span class="sd">    .. attribute:: x</span>

<span class="sd">       The horizontal position of the object in the room.</span>

<span class="sd">    .. attribute:: y</span>

<span class="sd">       The vertical position of the object in the room.</span>

<span class="sd">    .. attribute:: z</span>

<span class="sd">       The Z-axis position of the object in the room.</span>

<span class="sd">    .. attribute:: sprite</span>

<span class="sd">       The sprite currently in use by this object.  Can be either a</span>
<span class="sd">       :class:`sge.gfx.Sprite` object or a :class:`sge.gfx.TileGrid`</span>
<span class="sd">       object.  Set to :const:`None` for no sprite.</span>

<span class="sd">    .. attribute:: visible</span>

<span class="sd">       Whether or not the object&#39;s sprite should be projected onto the</span>
<span class="sd">       screen.</span>

<span class="sd">    .. attribute:: active</span>

<span class="sd">       Indicates whether the object is active (:const:`True`) or</span>
<span class="sd">       inactive (:const:`False`).  While the object is active, it will</span>
<span class="sd">       exhibit normal behavior; events will be executed normally as will</span>
<span class="sd">       any other automatic functionality, such as adding</span>
<span class="sd">       :attr:`xvelocity` and :attr:`yvelocity`</span>
<span class="sd">       to :attr:`x` and :attr:`y`.  If :attr:`active` is :const:`False`,</span>
<span class="sd">       automatic functionality and normal events will be disabled.</span>

<span class="sd">       .. note::</span>

<span class="sd">          Inactive :class:`sge.dsp.Object` objects are still visible</span>
<span class="sd">          by default and continue to be involved in collisions.  In</span>
<span class="sd">          addition, collision events and destroy events still occur even</span>
<span class="sd">          if the object is inactive.  If you wish for the object to not</span>
<span class="sd">          be visible, set :attr:`visible` to :const:`False`.  If you</span>
<span class="sd">          wish for the object to not perform collision events, set</span>
<span class="sd">          :attr:`tangible` to :const:`False`.</span>

<span class="sd">    .. attribute:: checks_collisions</span>

<span class="sd">       Whether or not the object should check for collisions</span>
<span class="sd">       automatically and cause collision events.  If an object is not</span>
<span class="sd">       using collision events, setting this to :const:`False` will give</span>
<span class="sd">       a boost in performance.</span>

<span class="sd">       .. note::</span>

<span class="sd">          This will not prevent automatic collision detection by other</span>
<span class="sd">          objects from detecting this object, and it will also not</span>
<span class="sd">          prevent this object&#39;s collision events from being executed.</span>
<span class="sd">          If you wish to disable collision detection entirely, set</span>
<span class="sd">          :attr:`tangible` to :const:`False`.</span>

<span class="sd">    .. attribute:: tangible</span>

<span class="sd">       Whether or not collisions involving the object can be detected.</span>
<span class="sd">       Setting this to :const:`False` can improve performance if the</span>
<span class="sd">       object doesn&#39;t need to be involved in collisions.</span>

<span class="sd">       Depending on the game, a useful strategy to boost performance can</span>
<span class="sd">       be to exclude an object from collision detection while it is</span>
<span class="sd">       outside the view.  If you do this, you likely want to set</span>
<span class="sd">       :attr:`active` to :const:`False` as well so that the object</span>
<span class="sd">       doesn&#39;t move in undesireable ways (e.g. through walls).</span>

<span class="sd">       .. note::</span>

<span class="sd">          If this is :const:`False`, :attr:`checks_collisions` is</span>
<span class="sd">          implied to be :const:`False` as well regardless of its actual</span>
<span class="sd">          value.  This is because checking for collisions which can&#39;t be</span>
<span class="sd">          detected is meaningless.</span>

<span class="sd">    .. attribute:: bbox_x</span>

<span class="sd">       The horizontal location of the bounding box relative to the</span>
<span class="sd">       object&#39;s position.  If set to :const:`None`, the value</span>
<span class="sd">       recommended by the sprite is used.</span>

<span class="sd">    .. attribute:: bbox_y</span>

<span class="sd">       The vertical location of the bounding box relative to the</span>
<span class="sd">       object&#39;s position.  If set to :const:`None`, the value</span>
<span class="sd">       recommended by the sprite is used.</span>

<span class="sd">    .. attribute:: bbox_width</span>

<span class="sd">       The width of the bounding box in pixels.  If set to</span>
<span class="sd">       :const:`None`, the value recommended by the sprite is used.</span>

<span class="sd">    .. attribute:: bbox_height</span>

<span class="sd">       The height of the bounding box in pixels.  If set to</span>
<span class="sd">       :const:`None`, the value recommended by the sprite is used.</span>

<span class="sd">    .. attribute:: regulate_origin</span>

<span class="sd">       If set to :const:`True`, the origin is automatically adjusted to</span>
<span class="sd">       be the location of the pixel recommended by the sprite after</span>
<span class="sd">       transformation.  This will cause rotation to be about the origin</span>
<span class="sd">       rather than being about the center of the image.</span>

<span class="sd">       .. note::</span>

<span class="sd">          The value of this attribute has no effect on the bounding box.</span>
<span class="sd">          If you wish for the bounding box to be adjusted as well, you</span>
<span class="sd">          must do so manually.  As an alternative, you may want to</span>
<span class="sd">          consider using precise collision detection instead.</span>

<span class="sd">    .. attribute:: collision_ellipse</span>

<span class="sd">       Whether or not an ellipse (rather than a rectangle) should be</span>
<span class="sd">       used for collision detection.</span>

<span class="sd">    .. attribute:: collision_precise</span>

<span class="sd">       Whether or not precise (pixel-perfect) collision detection should</span>
<span class="sd">       be used.  Note that this can be inefficient and does not work</span>
<span class="sd">       well with animated sprites.</span>

<span class="sd">    .. attribute:: bbox_left</span>

<span class="sd">       The position of the left side of the bounding box in the room</span>
<span class="sd">       (same as :attr:`x` + :attr:`bbox_x`).</span>

<span class="sd">    .. attribute:: bbox_right</span>

<span class="sd">       The position of the right side of the bounding box in the room</span>
<span class="sd">       (same as :attr:`bbox_left` + :attr:`bbox_width`).</span>

<span class="sd">    .. attribute:: bbox_top</span>

<span class="sd">       The position of the top side of the bounding box in the room</span>
<span class="sd">       (same as :attr:`y` + :attr:`bbox_y`).</span>

<span class="sd">    .. attribute:: bbox_bottom</span>

<span class="sd">       The position of the bottom side of the bounding box in the room</span>
<span class="sd">       (same as :attr:`bbox_top` + :attr:`bbox_height`).</span>

<span class="sd">    .. attribute:: xvelocity</span>

<span class="sd">       The velocity of the object toward the right in pixels per frame.</span>

<span class="sd">    .. attribute:: yvelocity</span>

<span class="sd">       The velocity of the object toward the bottom in pixels per frame.</span>

<span class="sd">    .. attribute:: speed</span>

<span class="sd">       The total (directional) speed of the object in pixels per frame.</span>

<span class="sd">    .. attribute:: move_direction</span>

<span class="sd">       The direction of the object&#39;s movement in degrees, with ``0``</span>
<span class="sd">       being directly to the right and rotation in a positive direction</span>
<span class="sd">       being clockwise.</span>

<span class="sd">    .. attribute:: xacceleration</span>

<span class="sd">       The acceleration of the object to the right in pixels per frame.</span>
<span class="sd">       If non-zero, movement as a result of :attr:`xvelocity` will be</span>
<span class="sd">       adjusted based on the kinematic equation,</span>
<span class="sd">       ``v[f]^2 = v[i]^2 + 2*a*d``.</span>

<span class="sd">    .. attribute:: yacceleration</span>

<span class="sd">       The acceleration of the object downward in pixels per frame.  If</span>
<span class="sd">       non-zero, movement as a result of :attr:`yvelocity` will be</span>
<span class="sd">       adjusted based on the kinematic equation,</span>
<span class="sd">       ``v[f]^2 = v[i]^2 + 2*a*d``.</span>

<span class="sd">    .. attribute:: xdeceleration</span>

<span class="sd">       Like :attr:`xacceleration`, but its sign is ignored and it always</span>
<span class="sd">       causes the absolute value of :attr:`xvelocity` to decrease.</span>

<span class="sd">    .. attribute:: ydeceleration</span>

<span class="sd">       Like :attr:`yacceleration`, but its sign is ignored and it always</span>
<span class="sd">       causes the absolute value of :attr:`yvelocity` to decrease.</span>

<span class="sd">    .. attribute:: image_index</span>

<span class="sd">       The animation frame currently being displayed, with ``0`` being</span>
<span class="sd">       the first one.</span>

<span class="sd">    .. attribute:: image_origin_x</span>

<span class="sd">       The horizontal location of the origin relative to the left edge</span>
<span class="sd">       of the images.  If set to :const:`None`, the value recommended by</span>
<span class="sd">       the sprite is used.</span>

<span class="sd">    .. attribute:: image_origin_y</span>

<span class="sd">       The vertical location of the origin relative to the top edge of</span>
<span class="sd">       the images.  If set to :const:`None`, the value recommended by</span>
<span class="sd">       the sprite is used.</span>

<span class="sd">    .. attribute:: image_fps</span>

<span class="sd">       The animation rate in frames per second.  Can be negative, in</span>
<span class="sd">       which case animation will be reversed.  If set to :const:`None`,</span>
<span class="sd">       the value recommended by the sprite is used.</span>

<span class="sd">    .. attribute:: image_speed</span>

<span class="sd">       The animation rate as a factor of :attr:`sge.game.fps`.  Can be</span>
<span class="sd">       negative, in which case animation will be reversed.  If set to</span>
<span class="sd">       :const:`None`, the value recommended by the sprite is used.</span>

<span class="sd">    .. attribute:: image_xscale</span>

<span class="sd">       The horizontal scale factor of the sprite.  If this is negative,</span>
<span class="sd">       the sprite will also be mirrored horizontally.</span>

<span class="sd">    .. attribute:: image_yscale</span>

<span class="sd">       The vertical scale factor of the sprite.  If this is negative,</span>
<span class="sd">       the sprite will also be flipped vertically.</span>

<span class="sd">    .. attribute:: image_rotation</span>

<span class="sd">       The rotation of the sprite in degrees, with rotation in a</span>
<span class="sd">       positive direction being clockwise.</span>

<span class="sd">       If :attr:`regulate_origin` is :const:`True`, the image is rotated</span>
<span class="sd">       about the origin.  Otherwise, the image is rotated about its</span>
<span class="sd">       center.</span>

<span class="sd">    .. attribute:: image_alpha</span>

<span class="sd">       The alpha value applied to the entire image, where ``255`` is the</span>
<span class="sd">       original image, ``128`` is half the opacity of the original</span>
<span class="sd">       image, ``0`` is fully transparent, etc.</span>

<span class="sd">    .. attribute:: image_blend</span>

<span class="sd">       A :class:`sge.gfx.Color` object representing the color to blend</span>
<span class="sd">       with the sprite (using RGBA Multiply blending).  Set to</span>
<span class="sd">       :const:`None` for no color blending.</span>

<span class="sd">    .. attribute:: image_blend_mode</span>

<span class="sd">       The blend mode to use with :attr:`image_blend`.  Possible blend</span>
<span class="sd">       modes are:</span>

<span class="sd">       - :data:`sge.BLEND_NORMAL`</span>
<span class="sd">       - :data:`sge.BLEND_RGBA_ADD`</span>
<span class="sd">       - :data:`sge.BLEND_RGBA_SUBTRACT`</span>
<span class="sd">       - :data:`sge.BLEND_RGBA_MULTIPLY`</span>
<span class="sd">       - :data:`sge.BLEND_RGBA_SCREEN`</span>
<span class="sd">       - :data:`sge.BLEND_RGBA_MINIMUM`</span>
<span class="sd">       - :data:`sge.BLEND_RGBA_MAXIMUM`</span>
<span class="sd">       - :data:`sge.BLEND_RGB_ADD`</span>
<span class="sd">       - :data:`sge.BLEND_RGB_SUBTRACT`</span>
<span class="sd">       - :data:`sge.BLEND_RGB_MULTIPLY`</span>
<span class="sd">       - :data:`sge.BLEND_RGB_SCREEN`</span>
<span class="sd">       - :data:`sge.BLEND_RGB_MINIMUM`</span>
<span class="sd">       - :data:`sge.BLEND_RGB_MAXIMUM`</span>

<span class="sd">       :const:`None` is treated as :data:`sge.BLEND_RGB_MULTIPLY`.</span>

<span class="sd">    .. attribute:: image_left</span>

<span class="sd">       The horizontal position of the left edge of the object&#39;s sprite</span>
<span class="sd">       in the room.</span>

<span class="sd">    .. attribute:: image_right</span>

<span class="sd">       The horizontal position of the right edge of the object&#39;s sprite</span>
<span class="sd">       in the room.</span>

<span class="sd">    .. attribute:: image_xcenter</span>

<span class="sd">       The horizontal position of the center of the object&#39;s sprite in</span>
<span class="sd">       the room.</span>

<span class="sd">    .. attribute:: image_top</span>

<span class="sd">       The vertical position of the top edge of the object&#39;s sprite in</span>
<span class="sd">       the room.</span>

<span class="sd">    .. attribute:: image_bottom</span>

<span class="sd">       The vertical position of the bottom edge of the object&#39;s sprite</span>
<span class="sd">       in the room.</span>

<span class="sd">    .. attribute:: image_ycenter</span>

<span class="sd">       The vertical position of the center of the object&#39;s sprite in the</span>
<span class="sd">       room.</span>

<span class="sd">    .. attribute:: alarms</span>

<span class="sd">       A dictionary containing the alarms of the object.  Each value</span>
<span class="sd">       decreases by 1 each frame (adjusted for delta timing if it is</span>
<span class="sd">       enabled).  When a value is at or below 0, :meth:`event_alarm` is</span>
<span class="sd">       executed with ``alarm_id`` set to the respective key, and the</span>
<span class="sd">       item is deleted from this dictionary.</span>

<span class="sd">    .. attribute:: image_width</span>

<span class="sd">       The total width of the object&#39;s displayed image as it appears on</span>
<span class="sd">       the screen, including the effects of scaling and rotation.</span>
<span class="sd">       (Read-only)</span>

<span class="sd">    .. attribute:: image_height</span>

<span class="sd">       The total height of the object&#39;s displayed image as it appears on</span>
<span class="sd">       the screen, including the effects of scaling and rotation.</span>
<span class="sd">       (Read-only)</span>

<span class="sd">    .. attribute:: mask</span>

<span class="sd">       The current mask used for non-rectangular collision detection.</span>
<span class="sd">       See the documentation for :func:`sge.collision.masks_collide` for</span>
<span class="sd">       more information.  (Read-only)</span>

<span class="sd">    .. attribute:: xstart</span>

<span class="sd">       The initial value of :attr:`x` when the object was created.</span>
<span class="sd">       (Read-only)</span>

<span class="sd">    .. attribute:: ystart</span>

<span class="sd">       The initial value of :attr:`y` when the object was created.</span>
<span class="sd">       (Read-only)</span>

<span class="sd">    .. attribute:: xprevious</span>

<span class="sd">       The value of :attr:`x` at the end of the previous frame.</span>
<span class="sd">       (Read-only)</span>

<span class="sd">    .. attribute:: yprevious</span>

<span class="sd">       The value of :attr:`y` at the end of the previous frame.</span>
<span class="sd">       (Read-only)</span>

<span class="sd">    .. attribute:: mask_x</span>

<span class="sd">       The horizontal location of the mask in the room.  (Read-only)</span>

<span class="sd">    .. attribute:: mask_y</span>

<span class="sd">       The vertical location of the mask in the room.  (Read-only)</span>

<span class="sd">    .. attribute:: rd</span>

<span class="sd">       Reserved dictionary for internal use by the SGE.  (Read-only)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">x</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__x</span>

    <span class="nd">@x.setter</span>
    <span class="k">def</span> <span class="nf">x</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__x</span> <span class="o">!=</span> <span class="n">value</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__x</span> <span class="o">=</span> <span class="n">value</span>
            <span class="n">o_update_object_areas</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">y</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__y</span>

    <span class="nd">@y.setter</span>
    <span class="k">def</span> <span class="nf">y</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__y</span> <span class="o">!=</span> <span class="n">value</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__y</span> <span class="o">=</span> <span class="n">value</span>
            <span class="n">o_update_object_areas</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">sprite</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">rd</span><span class="p">[</span><span class="s2">&quot;sprite&quot;</span><span class="p">]</span>

    <span class="nd">@sprite.setter</span>
    <span class="k">def</span> <span class="nf">sprite</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">rd</span><span class="p">[</span><span class="s2">&quot;sprite&quot;</span><span class="p">]</span> <span class="o">!=</span> <span class="n">value</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rd</span><span class="p">[</span><span class="s2">&quot;sprite&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
            <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">image_index</span> <span class="o">%=</span> <span class="n">value</span><span class="o">.</span><span class="n">frames</span>
            <span class="n">o_update_object_areas</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">active</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__active</span>

    <span class="nd">@active.setter</span>
    <span class="k">def</span> <span class="nf">active</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__active</span> <span class="o">!=</span> <span class="n">value</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__active</span> <span class="o">=</span> <span class="n">value</span>
            <span class="k">if</span> <span class="n">value</span><span class="p">:</span>
                <span class="n">r</span><span class="o">.</span><span class="n">_active_objects</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">r</span><span class="o">.</span><span class="n">_active_objects</span><span class="o">.</span><span class="n">discard</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">checks_collisions</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__checks_collisions</span>

    <span class="nd">@checks_collisions.setter</span>
    <span class="k">def</span> <span class="nf">checks_collisions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__checks_collisions</span> <span class="o">!=</span> <span class="n">value</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__checks_collisions</span> <span class="o">=</span> <span class="n">value</span>
            <span class="n">o_update_collision_lists</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">tangible</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">rd</span><span class="p">[</span><span class="s2">&quot;tangible&quot;</span><span class="p">]</span>

    <span class="nd">@tangible.setter</span>
    <span class="k">def</span> <span class="nf">tangible</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">rd</span><span class="p">[</span><span class="s2">&quot;tangible&quot;</span><span class="p">]</span> <span class="o">!=</span> <span class="n">value</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rd</span><span class="p">[</span><span class="s2">&quot;tangible&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
            <span class="n">o_update_collision_lists</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">bbox_x</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__bbox_x</span>

    <span class="nd">@bbox_x.setter</span>
    <span class="k">def</span> <span class="nf">bbox_x</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__bbox_x</span> <span class="o">!=</span> <span class="n">value</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__bbox_x</span> <span class="o">=</span> <span class="n">value</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">sprite</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__bbox_x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sprite</span><span class="o">.</span><span class="n">bbox_x</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__bbox_x</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">o_update_object_areas</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">bbox_y</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__bbox_y</span>

    <span class="nd">@bbox_y.setter</span>
    <span class="k">def</span> <span class="nf">bbox_y</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__bbox_y</span> <span class="o">!=</span> <span class="n">value</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__bbox_y</span> <span class="o">=</span> <span class="n">value</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">sprite</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__bbox_y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sprite</span><span class="o">.</span><span class="n">bbox_y</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__bbox_y</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">o_update_object_areas</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">bbox_width</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__bbox_width</span>

    <span class="nd">@bbox_width.setter</span>
    <span class="k">def</span> <span class="nf">bbox_width</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__bbox_width</span> <span class="o">!=</span> <span class="n">value</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__bbox_width</span> <span class="o">=</span> <span class="n">value</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">sprite</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__bbox_width</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sprite</span><span class="o">.</span><span class="n">bbox_width</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__bbox_width</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="n">o_update_object_areas</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">bbox_height</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__bbox_height</span>

    <span class="nd">@bbox_height.setter</span>
    <span class="k">def</span> <span class="nf">bbox_height</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__bbox_height</span> <span class="o">!=</span> <span class="n">value</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__bbox_height</span> <span class="o">=</span> <span class="n">value</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">sprite</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__bbox_height</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sprite</span><span class="o">.</span><span class="n">bbox_height</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__bbox_height</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="n">o_update_object_areas</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">bbox_left</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbox_x</span>

    <span class="nd">@bbox_left.setter</span>
    <span class="k">def</span> <span class="nf">bbox_left</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">value</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbox_x</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">bbox_right</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbox_x</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbox_width</span>

    <span class="nd">@bbox_right.setter</span>
    <span class="k">def</span> <span class="nf">bbox_right</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">value</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbox_width</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbox_x</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">bbox_top</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbox_y</span>

    <span class="nd">@bbox_top.setter</span>
    <span class="k">def</span> <span class="nf">bbox_top</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">value</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbox_y</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">bbox_bottom</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbox_y</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbox_height</span>

    <span class="nd">@bbox_bottom.setter</span>
    <span class="k">def</span> <span class="nf">bbox_bottom</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">value</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbox_height</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbox_y</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">xvelocity</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">rd</span><span class="p">[</span><span class="s2">&quot;xv&quot;</span><span class="p">]</span>

    <span class="nd">@xvelocity.setter</span>
    <span class="k">def</span> <span class="nf">xvelocity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">rd</span><span class="p">[</span><span class="s2">&quot;xv&quot;</span><span class="p">]</span> <span class="o">!=</span> <span class="n">value</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rd</span><span class="p">[</span><span class="s2">&quot;xv&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
            <span class="n">o_set_speed</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">yvelocity</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">rd</span><span class="p">[</span><span class="s2">&quot;yv&quot;</span><span class="p">]</span>

    <span class="nd">@yvelocity.setter</span>
    <span class="k">def</span> <span class="nf">yvelocity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">rd</span><span class="p">[</span><span class="s2">&quot;yv&quot;</span><span class="p">]</span> <span class="o">!=</span> <span class="n">value</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rd</span><span class="p">[</span><span class="s2">&quot;yv&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
            <span class="n">o_set_speed</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">speed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">rd</span><span class="p">[</span><span class="s2">&quot;speed&quot;</span><span class="p">]</span>

    <span class="nd">@speed.setter</span>
    <span class="k">def</span> <span class="nf">speed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">rd</span><span class="p">[</span><span class="s2">&quot;speed&quot;</span><span class="p">]</span> <span class="o">!=</span> <span class="n">value</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rd</span><span class="p">[</span><span class="s2">&quot;speed&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rd</span><span class="p">[</span><span class="s2">&quot;xv&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rd</span><span class="p">[</span><span class="s2">&quot;mv_dir&quot;</span><span class="p">]))</span> <span class="o">*</span> <span class="n">value</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rd</span><span class="p">[</span><span class="s2">&quot;yv&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rd</span><span class="p">[</span><span class="s2">&quot;mv_dir&quot;</span><span class="p">]))</span> <span class="o">*</span> <span class="n">value</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">move_direction</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">rd</span><span class="p">[</span><span class="s2">&quot;mv_dir&quot;</span><span class="p">]</span>

    <span class="nd">@move_direction.setter</span>
    <span class="k">def</span> <span class="nf">move_direction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">rd</span><span class="p">[</span><span class="s2">&quot;mv_dir&quot;</span><span class="p">]</span> <span class="o">!=</span> <span class="n">value</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rd</span><span class="p">[</span><span class="s2">&quot;mv_dir&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rd</span><span class="p">[</span><span class="s2">&quot;xv&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="n">value</span><span class="p">))</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">rd</span><span class="p">[</span><span class="s2">&quot;speed&quot;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rd</span><span class="p">[</span><span class="s2">&quot;yv&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="n">value</span><span class="p">))</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">rd</span><span class="p">[</span><span class="s2">&quot;speed&quot;</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">image_index</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">rd</span><span class="p">[</span><span class="s2">&quot;image_index&quot;</span><span class="p">]</span>

    <span class="nd">@image_index.setter</span>
    <span class="k">def</span> <span class="nf">image_index</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">value</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rd</span><span class="p">[</span><span class="s2">&quot;image_index&quot;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rd</span><span class="p">[</span><span class="s2">&quot;image_index&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rd</span><span class="p">[</span><span class="s2">&quot;anim_count&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">image_origin_x</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">regulate_origin</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sprite</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">id_</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sprite</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sprite</span><span class="o">.</span><span class="n">height</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sprite</span><span class="o">.</span><span class="n">origin_x</span><span class="p">,</span>
                   <span class="bp">self</span><span class="o">.</span><span class="n">sprite</span><span class="o">.</span><span class="n">origin_y</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">image_xscale</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">image_yscale</span><span class="p">,</span>
                   <span class="bp">self</span><span class="o">.</span><span class="n">image_rotation</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">id_</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__origins_x</span><span class="p">:</span>
                <span class="n">x_offset</span><span class="p">,</span> <span class="n">y_offset</span> <span class="o">=</span> <span class="n">o_get_origin_offset</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__origins_x</span><span class="p">[</span><span class="n">id_</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sprite</span><span class="o">.</span><span class="n">origin_x</span> <span class="o">+</span> <span class="n">x_offset</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__origins_y</span><span class="p">[</span><span class="n">id_</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sprite</span><span class="o">.</span><span class="n">origin_y</span> <span class="o">+</span> <span class="n">y_offset</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">__image_origin_x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__origins_x</span><span class="p">[</span><span class="n">id_</span><span class="p">]</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__image_origin_x</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">sprite</span><span class="o">.</span><span class="n">origin_x</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">sprite</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="k">else</span> <span class="mi">0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__image_origin_x</span>

    <span class="nd">@image_origin_x.setter</span>
    <span class="k">def</span> <span class="nf">image_origin_x</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__image_origin_x</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">image_origin_y</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">regulate_origin</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sprite</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">id_</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sprite</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sprite</span><span class="o">.</span><span class="n">height</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sprite</span><span class="o">.</span><span class="n">origin_x</span><span class="p">,</span>
                   <span class="bp">self</span><span class="o">.</span><span class="n">sprite</span><span class="o">.</span><span class="n">origin_y</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">image_xscale</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">image_yscale</span><span class="p">,</span>
                   <span class="bp">self</span><span class="o">.</span><span class="n">image_rotation</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">id_</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__origins_y</span><span class="p">:</span>
                <span class="n">x_offset</span><span class="p">,</span> <span class="n">y_offset</span> <span class="o">=</span> <span class="n">o_get_origin_offset</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__origins_x</span><span class="p">[</span><span class="n">id_</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sprite</span><span class="o">.</span><span class="n">origin_x</span> <span class="o">+</span> <span class="n">x_offset</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__origins_y</span><span class="p">[</span><span class="n">id_</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sprite</span><span class="o">.</span><span class="n">origin_y</span> <span class="o">+</span> <span class="n">y_offset</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">__image_origin_y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__origins_y</span><span class="p">[</span><span class="n">id_</span><span class="p">]</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__image_origin_y</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">sprite</span><span class="o">.</span><span class="n">origin_y</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">sprite</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="k">else</span> <span class="mi">0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__image_origin_y</span>

    <span class="nd">@image_origin_y.setter</span>
    <span class="k">def</span> <span class="nf">image_origin_y</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__image_origin_y</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">image_fps</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__fps</span>

    <span class="nd">@image_fps.setter</span>
    <span class="k">def</span> <span class="nf">image_fps</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sprite</span><span class="o">.</span><span class="n">fps</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">sprite</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="k">else</span> <span class="mi">0</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__fps</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sprite</span><span class="p">,</span> <span class="n">sge</span><span class="o">.</span><span class="n">gfx</span><span class="o">.</span><span class="n">Sprite</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rd</span><span class="p">[</span><span class="s2">&quot;frame_time&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1000</span> <span class="o">/</span> <span class="n">value</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">rd</span><span class="p">[</span><span class="s2">&quot;frame_time&quot;</span><span class="p">]:</span>
                <span class="c1"># This would be caused by a round-off to 0 resulting</span>
                <span class="c1"># from a much too high frame rate.  It would cause a</span>
                <span class="c1"># division by 0 later, so this is meant to prevent that.</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">rd</span><span class="p">[</span><span class="s2">&quot;frame_time&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.000001</span>
                <span class="n">w</span> <span class="o">=</span> <span class="s2">&quot;Could not calculate timing for {:.2e} FPS.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="n">value</span><span class="p">)</span>
                <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rd</span><span class="p">[</span><span class="s2">&quot;frame_time&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">image_speed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">image_fps</span> <span class="o">/</span> <span class="n">sge</span><span class="o">.</span><span class="n">game</span><span class="o">.</span><span class="n">fps</span>

    <span class="nd">@image_speed.setter</span>
    <span class="k">def</span> <span class="nf">image_speed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sprite</span><span class="o">.</span><span class="n">speed</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">sprite</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="k">else</span> <span class="mi">0</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">image_fps</span> <span class="o">=</span> <span class="n">value</span> <span class="o">*</span> <span class="n">sge</span><span class="o">.</span><span class="n">game</span><span class="o">.</span><span class="n">fps</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">image_blend</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__image_blend</span>

    <span class="nd">@image_blend.setter</span>
    <span class="k">def</span> <span class="nf">image_blend</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="n">_check_color</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__image_blend</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">image_left</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">image_origin_x</span>

    <span class="nd">@image_left.setter</span>
    <span class="k">def</span> <span class="nf">image_left</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">value</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">image_origin_x</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">image_right</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">image_left</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">image_width</span>

    <span class="nd">@image_right.setter</span>
    <span class="k">def</span> <span class="nf">image_right</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">image_left</span> <span class="o">=</span> <span class="n">value</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">image_width</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">image_xcenter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">image_left</span> <span class="o">+</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">image_width</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>

    <span class="nd">@image_xcenter.setter</span>
    <span class="k">def</span> <span class="nf">image_xcenter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">image_left</span> <span class="o">=</span> <span class="n">value</span> <span class="o">-</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">image_width</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">image_top</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">image_origin_y</span>

    <span class="nd">@image_top.setter</span>
    <span class="k">def</span> <span class="nf">image_top</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">value</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">image_origin_y</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">image_bottom</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">image_top</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">image_height</span>

    <span class="nd">@image_bottom.setter</span>
    <span class="k">def</span> <span class="nf">image_bottom</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">image_top</span> <span class="o">=</span> <span class="n">value</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">image_height</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">image_ycenter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">image_top</span> <span class="o">+</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">image_height</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>

    <span class="nd">@image_ycenter.setter</span>
    <span class="k">def</span> <span class="nf">image_ycenter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">image_top</span> <span class="o">=</span> <span class="n">value</span> <span class="o">-</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">image_height</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">image_width</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">img</span> <span class="o">=</span> <span class="n">s_get_image</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sprite</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">image_index</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">image_xscale</span><span class="p">,</span>
                          <span class="bp">self</span><span class="o">.</span><span class="n">image_yscale</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">image_rotation</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">img</span><span class="o">.</span><span class="n">get_width</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">image_height</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">img</span> <span class="o">=</span> <span class="n">s_get_image</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sprite</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">image_index</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">image_xscale</span><span class="p">,</span>
                          <span class="bp">self</span><span class="o">.</span><span class="n">image_yscale</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">image_rotation</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">img</span><span class="o">.</span><span class="n">get_height</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">mask</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">collision_precise</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sprite</span><span class="p">,</span> <span class="n">sge</span><span class="o">.</span><span class="n">gfx</span><span class="o">.</span><span class="n">Sprite</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">s_get_precise_mask</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">sprite</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">image_index</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">image_xscale</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">image_yscale</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">image_rotation</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">i</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;o_mask&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">collision_ellipse</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbox_x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbox_y</span><span class="p">,</span>
                 <span class="bp">self</span><span class="o">.</span><span class="n">bbox_width</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbox_height</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">image_xscale</span><span class="p">,</span>
                 <span class="bp">self</span><span class="o">.</span><span class="n">image_yscale</span><span class="p">)</span>
            <span class="n">mask</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">mask</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">collision_ellipse</span><span class="p">:</span>
                    <span class="c1"># Elliptical mask based on bounding box.</span>
                    <span class="n">mask</span> <span class="o">=</span> <span class="p">[[</span><span class="bp">False</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">six</span><span class="o">.</span><span class="n">moves</span><span class="o">.</span><span class="n">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bbox_height</span><span class="p">)]</span>
                            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">six</span><span class="o">.</span><span class="n">moves</span><span class="o">.</span><span class="n">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bbox_width</span><span class="p">)]</span>
                    <span class="n">a</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">mask</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span>
                    <span class="n">b</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">mask</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="mi">2</span> <span class="k">if</span> <span class="n">mask</span> <span class="k">else</span> <span class="mi">0</span>

                    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">six</span><span class="o">.</span><span class="n">moves</span><span class="o">.</span><span class="n">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">mask</span><span class="p">)):</span>
                        <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">six</span><span class="o">.</span><span class="n">moves</span><span class="o">.</span><span class="n">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">mask</span><span class="p">[</span><span class="n">x</span><span class="p">])):</span>
                            <span class="k">if</span> <span class="p">((</span><span class="n">x</span> <span class="o">-</span> <span class="n">a</span><span class="p">)</span> <span class="o">/</span> <span class="n">a</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="p">((</span><span class="n">y</span> <span class="o">-</span> <span class="n">b</span><span class="p">)</span> <span class="o">/</span> <span class="n">b</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">:</span>
                                <span class="n">mask</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="c1"># Mask is all pixels in the bounding box.</span>
                    <span class="n">mask</span> <span class="o">=</span> <span class="p">[[</span><span class="bp">True</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">six</span><span class="o">.</span><span class="n">moves</span><span class="o">.</span><span class="n">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bbox_height</span><span class="p">)]</span>
                            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">six</span><span class="o">.</span><span class="n">moves</span><span class="o">.</span><span class="n">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bbox_width</span><span class="p">)]</span>

            <span class="n">r</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">mask</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">mask</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">mask_x</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">collision_precise</span><span class="p">:</span>
            <span class="k">if</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sprite</span><span class="p">,</span> <span class="n">sge</span><span class="o">.</span><span class="n">gfx</span><span class="o">.</span><span class="n">Sprite</span><span class="p">)</span> <span class="ow">and</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">image_rotation</span> <span class="o">%</span> <span class="mi">180</span><span class="p">):</span>
                <span class="n">origin_x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">image_origin_x</span>
                <span class="n">i</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;o_mask_x_offset&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sprite</span><span class="p">,</span> <span class="n">origin_x</span><span class="p">,</span>
                     <span class="bp">self</span><span class="o">.</span><span class="n">image_origin_y</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">image_xscale</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">image_yscale</span><span class="p">,</span>
                     <span class="bp">self</span><span class="o">.</span><span class="n">image_rotation</span><span class="p">)</span>
                <span class="n">offset</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">offset</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                    <span class="n">width</span> <span class="o">=</span> <span class="n">s_get_image</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sprite</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">image_index</span><span class="p">,</span>
                                        <span class="bp">self</span><span class="o">.</span><span class="n">image_xscale</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">image_yscale</span><span class="p">,</span>
                                        <span class="bp">self</span><span class="o">.</span><span class="n">image_rotation</span><span class="p">)</span><span class="o">.</span><span class="n">get_width</span><span class="p">()</span>
                    <span class="n">normal_width</span> <span class="o">=</span> <span class="n">s_get_image</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sprite</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">image_index</span><span class="p">,</span>
                                               <span class="bp">self</span><span class="o">.</span><span class="n">image_xscale</span><span class="p">,</span>
                                               <span class="bp">self</span><span class="o">.</span><span class="n">image_yscale</span><span class="p">)</span><span class="o">.</span><span class="n">get_width</span><span class="p">()</span>
                    <span class="n">offset</span> <span class="o">=</span> <span class="p">(</span><span class="n">width</span> <span class="o">-</span> <span class="n">normal_width</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span>

                <span class="n">r</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">offset</span><span class="p">)</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="p">(</span><span class="n">origin_x</span> <span class="o">+</span> <span class="n">offset</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">image_origin_x</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbox_left</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">mask_y</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">collision_precise</span><span class="p">:</span>
            <span class="k">if</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sprite</span><span class="p">,</span> <span class="n">sge</span><span class="o">.</span><span class="n">gfx</span><span class="o">.</span><span class="n">Sprite</span><span class="p">)</span> <span class="ow">and</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">image_rotation</span> <span class="o">%</span> <span class="mi">180</span><span class="p">):</span>
                <span class="n">origin_y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">image_origin_y</span>
                <span class="n">i</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;o_mask_y_offset&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sprite</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">image_origin_x</span><span class="p">,</span>
                     <span class="n">origin_y</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">image_xscale</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">image_yscale</span><span class="p">,</span>
                     <span class="bp">self</span><span class="o">.</span><span class="n">image_rotation</span><span class="p">)</span>
                <span class="n">offset</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">offset</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                    <span class="n">height</span> <span class="o">=</span> <span class="n">s_get_image</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sprite</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">image_index</span><span class="p">,</span>
                                         <span class="bp">self</span><span class="o">.</span><span class="n">image_xscale</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">image_yscale</span><span class="p">,</span>
                                         <span class="bp">self</span><span class="o">.</span><span class="n">image_rotation</span><span class="p">)</span><span class="o">.</span><span class="n">get_height</span><span class="p">()</span>
                    <span class="n">normal_height</span> <span class="o">=</span> <span class="n">s_get_image</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sprite</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">image_index</span><span class="p">,</span>
                                                <span class="bp">self</span><span class="o">.</span><span class="n">image_xscale</span><span class="p">,</span>
                                                <span class="bp">self</span><span class="o">.</span><span class="n">image_yscale</span><span class="p">)</span><span class="o">.</span><span class="n">get_height</span><span class="p">()</span>
                    <span class="n">offset</span> <span class="o">=</span> <span class="p">(</span><span class="n">height</span> <span class="o">-</span> <span class="n">normal_height</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span>

                <span class="n">r</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">offset</span><span class="p">)</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="p">(</span><span class="n">origin_y</span> <span class="o">+</span> <span class="n">offset</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">image_origin_y</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbox_top</span>

<div class="viewcode-block" id="Object.__init__"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Object.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sprite</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">visible</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">active</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                 <span class="n">checks_collisions</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">tangible</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">bbox_x</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="n">bbox_y</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">bbox_width</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">bbox_height</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="n">regulate_origin</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">collision_ellipse</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                 <span class="n">collision_precise</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">xvelocity</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">yvelocity</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                 <span class="n">xacceleration</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">yacceleration</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">xdeceleration</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                 <span class="n">ydeceleration</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">image_index</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">image_origin_x</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="n">image_origin_y</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">image_fps</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">image_xscale</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                 <span class="n">image_yscale</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">image_rotation</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">image_alpha</span><span class="o">=</span><span class="mi">255</span><span class="p">,</span>
                 <span class="n">image_blend</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">image_blend_mode</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Arugments set the respective initial attributes of the object.</span>
<span class="sd">        See the documentation for :class:`sge.dsp.Object` for more</span>
<span class="sd">        information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rd</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__x</span> <span class="o">=</span> <span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__y</span> <span class="o">=</span> <span class="n">y</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">z</span> <span class="o">=</span> <span class="n">z</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__active</span> <span class="o">=</span> <span class="n">active</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__checks_collisions</span> <span class="o">=</span> <span class="n">checks_collisions</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rd</span><span class="p">[</span><span class="s2">&quot;tangible&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">tangible</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">regulate_origin</span> <span class="o">=</span> <span class="n">regulate_origin</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">collision_ellipse</span> <span class="o">=</span> <span class="n">collision_ellipse</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">collision_precise</span> <span class="o">=</span> <span class="n">collision_precise</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rd</span><span class="p">[</span><span class="s2">&quot;xv&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">xvelocity</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rd</span><span class="p">[</span><span class="s2">&quot;yv&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">yvelocity</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rd</span><span class="p">[</span><span class="s2">&quot;mv_dir&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rd</span><span class="p">[</span><span class="s2">&quot;speed&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xacceleration</span> <span class="o">=</span> <span class="n">xacceleration</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">yacceleration</span> <span class="o">=</span> <span class="n">yacceleration</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xdeceleration</span> <span class="o">=</span> <span class="n">xdeceleration</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ydeceleration</span> <span class="o">=</span> <span class="n">ydeceleration</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rd</span><span class="p">[</span><span class="s2">&quot;image_index&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">image_index</span> <span class="o">=</span> <span class="n">image_index</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">image_origin_x</span> <span class="o">=</span> <span class="n">image_origin_x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">image_origin_y</span> <span class="o">=</span> <span class="n">image_origin_y</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">image_xscale</span> <span class="o">=</span> <span class="n">image_xscale</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">image_yscale</span> <span class="o">=</span> <span class="n">image_yscale</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">image_rotation</span> <span class="o">=</span> <span class="n">image_rotation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">image_alpha</span> <span class="o">=</span> <span class="n">image_alpha</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">image_blend</span> <span class="o">=</span> <span class="n">image_blend</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">image_blend_mode</span> <span class="o">=</span> <span class="n">image_blend_mode</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">alarms</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xstart</span> <span class="o">=</span> <span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ystart</span> <span class="o">=</span> <span class="n">y</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xprevious</span> <span class="o">=</span> <span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">yprevious</span> <span class="o">=</span> <span class="n">y</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rd</span><span class="p">[</span><span class="s2">&quot;anim_count&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__origins_x</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__origins_y</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rd</span><span class="p">[</span><span class="s2">&quot;object_areas&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rd</span><span class="p">[</span><span class="s2">&quot;colliders&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__masks</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">rd</span><span class="p">[</span><span class="s2">&quot;sprite&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sprite</span>
        <span class="k">if</span> <span class="n">sprite</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">image_index</span> <span class="o">%=</span> <span class="n">sprite</span><span class="o">.</span><span class="n">frames</span>
            <span class="n">sprite_bbox_x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sprite</span><span class="o">.</span><span class="n">bbox_x</span>
            <span class="n">sprite_bbox_y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sprite</span><span class="o">.</span><span class="n">bbox_y</span>
            <span class="n">sprite_bbox_width</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sprite</span><span class="o">.</span><span class="n">bbox_width</span>
            <span class="n">sprite_bbox_height</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sprite</span><span class="o">.</span><span class="n">bbox_height</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">sprite_bbox_x</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">sprite_bbox_y</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">sprite_bbox_width</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="n">sprite_bbox_height</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__bbox_x</span> <span class="o">=</span> <span class="n">bbox_x</span> <span class="k">if</span> <span class="n">bbox_x</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="k">else</span> <span class="n">sprite_bbox_x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__bbox_y</span> <span class="o">=</span> <span class="n">bbox_y</span> <span class="k">if</span> <span class="n">bbox_y</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="k">else</span> <span class="n">sprite_bbox_y</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__bbox_width</span> <span class="o">=</span> <span class="p">(</span><span class="n">bbox_width</span> <span class="k">if</span> <span class="n">bbox_width</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="k">else</span>
                             <span class="n">sprite_bbox_width</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__bbox_height</span> <span class="o">=</span> <span class="p">(</span><span class="n">bbox_height</span> <span class="k">if</span> <span class="n">bbox_height</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="k">else</span>
                              <span class="n">sprite_bbox_height</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">visible</span> <span class="o">=</span> <span class="n">visible</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">image_fps</span> <span class="o">=</span> <span class="n">image_fps</span>

        <span class="n">o_set_speed</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>

<div class="viewcode-block" id="Object.move_x"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Object.move_x">[docs]</a>    <span class="k">def</span> <span class="nf">move_x</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">move</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Move the object horizontally.  This method can be overridden to</span>
<span class="sd">        conveniently define a particular way movement should be handled.</span>
<span class="sd">        Currently, it is used in the default implementation of</span>
<span class="sd">        :meth:`event_update_position`.</span>

<span class="sd">        Arguments:</span>

<span class="sd">        - ``move`` -- The amount to add to :attr:`x`.</span>

<span class="sd">        The default behavior of this method is the following code::</span>

<span class="sd">            self.x += move</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">+=</span> <span class="n">move</span></div>

<div class="viewcode-block" id="Object.move_y"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Object.move_y">[docs]</a>    <span class="k">def</span> <span class="nf">move_y</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">move</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Move the object vertically.  This method can be overridden to</span>
<span class="sd">        conveniently define a particular way movement should be handled.</span>
<span class="sd">        Currently, it is used in the default implementation of</span>
<span class="sd">        :meth:`event_update_position`.</span>

<span class="sd">        Arguments:</span>

<span class="sd">        - ``move`` -- The amount to add to :attr:`y`.</span>

<span class="sd">        The default behavior of this method is the following code::</span>

<span class="sd">            self.y += move</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">+=</span> <span class="n">move</span></div>

<div class="viewcode-block" id="Object.collision"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Object.collision">[docs]</a>    <span class="k">def</span> <span class="nf">collision</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return a list of objects colliding with this object.</span>

<span class="sd">        Arguments:</span>

<span class="sd">        - ``other`` -- What to check for collisions with.  Can be one of</span>
<span class="sd">          the following:</span>

<span class="sd">          - A :class:`sge.dsp.Object` object.</span>
<span class="sd">          - A list of :class:`sge.dsp.Object` objects.</span>
<span class="sd">          - A class derived from :class:`sge.dsp.Object`.</span>
<span class="sd">          - :const:`None`: Check for collisions with all objects.</span>

<span class="sd">        - ``x`` -- The horizontal position to pretend this object is at</span>
<span class="sd">          for the purpose of the collision detection.  If set to</span>
<span class="sd">          :const:`None`, :attr:`x` will be used.</span>
<span class="sd">        - ``y`` -- The vertical position to pretend this object is at</span>
<span class="sd">          for the purpose of the collision detection.  If set to</span>
<span class="sd">          :const:`None`, :attr:`y` will be used.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">room</span> <span class="o">=</span> <span class="n">sge</span><span class="o">.</span><span class="n">game</span><span class="o">.</span><span class="n">current_room</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">tangible</span> <span class="ow">and</span> <span class="bp">self</span> <span class="ow">in</span> <span class="n">room</span><span class="o">.</span><span class="n">objects</span><span class="p">:</span>
            <span class="n">collisions</span> <span class="o">=</span> <span class="p">[]</span>

            <span class="c1"># Change x and y to be offset values; these are easier to use.</span>
            <span class="k">if</span> <span class="n">x</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="n">x</span> <span class="o">-=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>

            <span class="k">if</span> <span class="n">y</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="n">y</span> <span class="o">-=</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">y</span> <span class="o">=</span> <span class="mi">0</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">collision_precise</span><span class="p">:</span>
                <span class="n">ax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mask_x</span> <span class="o">+</span> <span class="n">x</span>
                <span class="n">ay</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mask_y</span> <span class="o">+</span> <span class="n">y</span>
                <span class="n">w</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mask</span><span class="p">)</span>
                <span class="n">h</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mask</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mask</span> <span class="k">else</span> <span class="mi">0</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">ax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbox_left</span> <span class="o">+</span> <span class="n">x</span>
                <span class="n">ay</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbox_top</span> <span class="o">+</span> <span class="n">y</span>
                <span class="n">w</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbox_width</span>
                <span class="n">h</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbox_height</span>

            <span class="n">others</span> <span class="o">=</span> <span class="n">room</span><span class="o">.</span><span class="n">get_objects_at</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">ay</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">others</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">obj</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">self</span> <span class="ow">and</span> <span class="n">obj</span><span class="o">.</span><span class="n">tangible</span> <span class="ow">and</span> <span class="n">o_is_other</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
                    <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">collision_precise</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">collision_ellipse</span> <span class="ow">or</span>
                            <span class="n">obj</span><span class="o">.</span><span class="n">collision_precise</span> <span class="ow">or</span> <span class="n">obj</span><span class="o">.</span><span class="n">collision_ellipse</span><span class="p">):</span>
                        <span class="c1"># Use masks.</span>
                        <span class="k">if</span> <span class="n">sge</span><span class="o">.</span><span class="n">collision</span><span class="o">.</span><span class="n">masks_collide</span><span class="p">(</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">mask_x</span> <span class="o">+</span> <span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">mask_y</span> <span class="o">+</span> <span class="n">y</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">mask</span><span class="p">,</span>
                                <span class="n">obj</span><span class="o">.</span><span class="n">mask_x</span><span class="p">,</span> <span class="n">obj</span><span class="o">.</span><span class="n">mask_y</span><span class="p">,</span> <span class="n">obj</span><span class="o">.</span><span class="n">mask</span><span class="p">):</span>
                            <span class="n">collisions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="c1"># Use bounding boxes.</span>
                        <span class="k">if</span> <span class="n">sge</span><span class="o">.</span><span class="n">collision</span><span class="o">.</span><span class="n">rectangles_collide</span><span class="p">(</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">bbox_left</span> <span class="o">+</span> <span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbox_top</span> <span class="o">+</span> <span class="n">y</span><span class="p">,</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">bbox_width</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbox_height</span><span class="p">,</span>
                                <span class="n">obj</span><span class="o">.</span><span class="n">bbox_left</span><span class="p">,</span> <span class="n">obj</span><span class="o">.</span><span class="n">bbox_top</span><span class="p">,</span> <span class="n">obj</span><span class="o">.</span><span class="n">bbox_width</span><span class="p">,</span>
                                <span class="n">obj</span><span class="o">.</span><span class="n">bbox_height</span><span class="p">):</span>
                            <span class="n">collisions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>

            <span class="k">return</span> <span class="n">collisions</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[]</span></div>

<div class="viewcode-block" id="Object.destroy"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Object.destroy">[docs]</a>    <span class="k">def</span> <span class="nf">destroy</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Remove the object from the current room.  ``foo.destroy()`` is</span>
<span class="sd">        identical to ``sge.game.current_room.remove(foo)``.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">sge</span><span class="o">.</span><span class="n">game</span><span class="o">.</span><span class="n">current_room</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>

<div class="viewcode-block" id="Object.event_create"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Object.event_create">[docs]</a>    <span class="k">def</span> <span class="nf">event_create</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Called in the following cases:</span>

<span class="sd">        - Right after the object is added to the current room.</span>
<span class="sd">        - Right after a room starts for the first time after the object</span>
<span class="sd">          was added to it, if and only if the object was added to the</span>
<span class="sd">          room while it was not the current room.  In this case, this</span>
<span class="sd">          event is called for each appropriate object after the</span>
<span class="sd">          respective room start event or room resume event, in the same</span>
<span class="sd">          order that the objects were added to the room.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Object.event_destroy"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Object.event_destroy">[docs]</a>    <span class="k">def</span> <span class="nf">event_destroy</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Called right after the object is removed from the current room.</span>

<span class="sd">        .. note::</span>

<span class="sd">           If the object is removed from a room while it is not the</span>
<span class="sd">           current room, this method will not be called.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

    <span class="k">def</span> <span class="nf">event_begin_step</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">time_passed</span><span class="p">,</span> <span class="n">delta_mult</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Called each frame before automatic updates to objects (such as</span>
<span class="sd">        the effects of the speed variables).</span>

<span class="sd">        See the documentation for :meth:`sge.dsp.Game.event_step` for</span>
<span class="sd">        more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>

<div class="viewcode-block" id="Object.event_step"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Object.event_step">[docs]</a>    <span class="k">def</span> <span class="nf">event_step</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">time_passed</span><span class="p">,</span> <span class="n">delta_mult</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Called each frame after automatic updates to objects (such as</span>
<span class="sd">        the effects of the speed variables), but before collision</span>
<span class="sd">        events.</span>

<span class="sd">        See the documentation for :meth:`sge.dsp.Game.event_step` for</span>
<span class="sd">        more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

    <span class="k">def</span> <span class="nf">event_end_step</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">time_passed</span><span class="p">,</span> <span class="n">delta_mult</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Called each frame after collision events.</span>

<span class="sd">        See the documentation for :meth:`sge.dsp.Game.event_step` for</span>
<span class="sd">        more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>

<div class="viewcode-block" id="Object.event_alarm"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Object.event_alarm">[docs]</a>    <span class="k">def</span> <span class="nf">event_alarm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">alarm_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for :attr:`sge.dsp.Object.alarms` for more</span>
<span class="sd">        information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Object.event_animation_end"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Object.event_animation_end">[docs]</a>    <span class="k">def</span> <span class="nf">event_animation_end</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Called when an animation cycle ends.&quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Object.event_key_press"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Object.event_key_press">[docs]</a>    <span class="k">def</span> <span class="nf">event_key_press</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">char</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for :class:`sge.input.KeyPress` for more</span>
<span class="sd">        information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Object.event_key_release"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Object.event_key_release">[docs]</a>    <span class="k">def</span> <span class="nf">event_key_release</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for :class:`sge.input.KeyRelease` for more</span>
<span class="sd">        information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Object.event_mouse_move"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Object.event_mouse_move">[docs]</a>    <span class="k">def</span> <span class="nf">event_mouse_move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for :class:`sge.input.MouseMove` for more</span>
<span class="sd">        information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Object.event_mouse_button_press"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Object.event_mouse_button_press">[docs]</a>    <span class="k">def</span> <span class="nf">event_mouse_button_press</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">button</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for :class:`sge.input.MouseButtonPress`</span>
<span class="sd">        for more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Object.event_mouse_button_release"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Object.event_mouse_button_release">[docs]</a>    <span class="k">def</span> <span class="nf">event_mouse_button_release</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">button</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for :class:`sge.input.MouseButtonRelease`</span>
<span class="sd">        for more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Object.event_joystick_axis_move"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Object.event_joystick_axis_move">[docs]</a>    <span class="k">def</span> <span class="nf">event_joystick_axis_move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">js_name</span><span class="p">,</span> <span class="n">js_id</span><span class="p">,</span> <span class="n">axis</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for :class:`sge.input.JoystickAxisMove`</span>
<span class="sd">        for more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Object.event_joystick_hat_move"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Object.event_joystick_hat_move">[docs]</a>    <span class="k">def</span> <span class="nf">event_joystick_hat_move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">js_name</span><span class="p">,</span> <span class="n">js_id</span><span class="p">,</span> <span class="n">hat</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for :class:`sge.input.JoystickHatMove` for</span>
<span class="sd">        more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Object.event_joystick_trackball_move"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Object.event_joystick_trackball_move">[docs]</a>    <span class="k">def</span> <span class="nf">event_joystick_trackball_move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">js_name</span><span class="p">,</span> <span class="n">js_id</span><span class="p">,</span> <span class="n">ball</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for</span>
<span class="sd">        :class:`sge.input.JoystickTrackballMove` for more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Object.event_joystick_button_press"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Object.event_joystick_button_press">[docs]</a>    <span class="k">def</span> <span class="nf">event_joystick_button_press</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">js_name</span><span class="p">,</span> <span class="n">js_id</span><span class="p">,</span> <span class="n">button</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for :class:`sge.input.JoystickButtonPress`</span>
<span class="sd">        for more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Object.event_joystick_button_release"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Object.event_joystick_button_release">[docs]</a>    <span class="k">def</span> <span class="nf">event_joystick_button_release</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">js_name</span><span class="p">,</span> <span class="n">js_id</span><span class="p">,</span> <span class="n">button</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for</span>
<span class="sd">        :class:`sge.input.JoystickButtonRelease` for more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Object.event_joystick"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Object.event_joystick">[docs]</a>    <span class="k">def</span> <span class="nf">event_joystick</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">js_name</span><span class="p">,</span> <span class="n">js_id</span><span class="p">,</span> <span class="n">input_type</span><span class="p">,</span> <span class="n">input_id</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for :class:`sge.input.JoystickEvent` for</span>
<span class="sd">        more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Object.event_update_position"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Object.event_update_position">[docs]</a>    <span class="k">def</span> <span class="nf">event_update_position</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">delta_mult</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Called when it&#39;s time to update the position of the object.</span>
<span class="sd">        This method handles this functionality, so defining this will</span>
<span class="sd">        override the default behavior and allow you to handle the speed</span>
<span class="sd">        variables in a special way.</span>

<span class="sd">        The default behavior of this method is the following code::</span>

<span class="sd">            if delta_mult:</span>
<span class="sd">                vi = self.xvelocity</span>
<span class="sd">                vf = vi + self.xacceleration * delta_mult</span>
<span class="sd">                dc = abs(self.xdeceleration) * delta_mult</span>
<span class="sd">                if abs(vf) &gt; dc:</span>
<span class="sd">                    vf -= math.copysign(dc, vf)</span>
<span class="sd">                else:</span>
<span class="sd">                    vf = 0</span>
<span class="sd">                self.xvelocity = vf</span>
<span class="sd">                self.move_x(((vi + vf) / 2) * delta_mult)</span>

<span class="sd">                vi = self.yvelocity</span>
<span class="sd">                vf = vi + self.yacceleration * delta_mult</span>
<span class="sd">                dc = abs(self.ydeceleration) * delta_mult</span>
<span class="sd">                if abs(vf) &gt; dc:</span>
<span class="sd">                    vf -= math.copysign(dc, vf)</span>
<span class="sd">                else:</span>
<span class="sd">                    vf = 0</span>
<span class="sd">                self.yvelocity = vf</span>
<span class="sd">                self.move_y(((vi + vf) / 2) * delta_mult)</span>

<span class="sd">        See the documentation for :meth:`sge.dsp.Game.event_step` for</span>
<span class="sd">        more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">delta_mult</span><span class="p">:</span>
            <span class="n">vi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xvelocity</span>
            <span class="n">vf</span> <span class="o">=</span> <span class="n">vi</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">xacceleration</span> <span class="o">*</span> <span class="n">delta_mult</span>
            <span class="n">dc</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xdeceleration</span><span class="p">)</span> <span class="o">*</span> <span class="n">delta_mult</span>
            <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">vf</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">dc</span><span class="p">:</span>
                <span class="n">vf</span> <span class="o">-=</span> <span class="n">math</span><span class="o">.</span><span class="n">copysign</span><span class="p">(</span><span class="n">dc</span><span class="p">,</span> <span class="n">vf</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">vf</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xvelocity</span> <span class="o">=</span> <span class="n">vf</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">move_x</span><span class="p">(((</span><span class="n">vi</span> <span class="o">+</span> <span class="n">vf</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">delta_mult</span><span class="p">)</span>

            <span class="n">vi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yvelocity</span>
            <span class="n">vf</span> <span class="o">=</span> <span class="n">vi</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">yacceleration</span> <span class="o">*</span> <span class="n">delta_mult</span>
            <span class="n">dc</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ydeceleration</span><span class="p">)</span> <span class="o">*</span> <span class="n">delta_mult</span>
            <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">vf</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">dc</span><span class="p">:</span>
                <span class="n">vf</span> <span class="o">-=</span> <span class="n">math</span><span class="o">.</span><span class="n">copysign</span><span class="p">(</span><span class="n">dc</span><span class="p">,</span> <span class="n">vf</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">vf</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">yvelocity</span> <span class="o">=</span> <span class="n">vf</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">move_y</span><span class="p">(((</span><span class="n">vi</span> <span class="o">+</span> <span class="n">vf</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">delta_mult</span><span class="p">)</span></div>

<div class="viewcode-block" id="Object.event_collision"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Object.event_collision">[docs]</a>    <span class="k">def</span> <span class="nf">event_collision</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">xdirection</span><span class="p">,</span> <span class="n">ydirection</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Called when this object collides with another object.</span>

<span class="sd">        Arguments:</span>

<span class="sd">        - ``other`` -- The other object which was collided with.</span>
<span class="sd">        - ``xdirection`` -- The horizontal direction of the collision</span>
<span class="sd">          from the perspective of this object.  Can be ``-1`` (left),</span>
<span class="sd">          ``1`` (right), or ``0`` (no horizontal direction).</span>
<span class="sd">        - ``ydirection`` -- The vertical direction of the collision from</span>
<span class="sd">          the perspective of this object.  Can be ``-1`` (up), ``1``</span>
<span class="sd">          (down), or ``0`` (no vertical direction).</span>

<span class="sd">        Directionless &quot;collisions&quot; (ones with both an xdirection and</span>
<span class="sd">        ydirection of ``0``) are possible.  These are typically</span>
<span class="sd">        collisions which were already occurring in the previous frame</span>
<span class="sd">        (continuous collisions).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Object.event_paused_step"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Object.event_paused_step">[docs]</a>    <span class="k">def</span> <span class="nf">event_paused_step</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">time_passed</span><span class="p">,</span> <span class="n">delta_mult</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for :meth:`sge.dsp.Game.event_step` for</span>
<span class="sd">        more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Object.event_paused_key_press"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Object.event_paused_key_press">[docs]</a>    <span class="k">def</span> <span class="nf">event_paused_key_press</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">char</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for :class:`sge.input.KeyPress` for more</span>
<span class="sd">        information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Object.event_paused_key_release"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Object.event_paused_key_release">[docs]</a>    <span class="k">def</span> <span class="nf">event_paused_key_release</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for :class:`sge.input.KeyRelease` for more</span>
<span class="sd">        information.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Object.event_paused_mouse_move"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Object.event_paused_mouse_move">[docs]</a>    <span class="k">def</span> <span class="nf">event_paused_mouse_move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for :class:`sge.input.MouseMove` for more</span>
<span class="sd">        information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Object.event_paused_mouse_button_press"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Object.event_paused_mouse_button_press">[docs]</a>    <span class="k">def</span> <span class="nf">event_paused_mouse_button_press</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">button</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for :class:`sge.input.MouseButtonPress`</span>
<span class="sd">        for more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Object.event_paused_mouse_button_release"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Object.event_paused_mouse_button_release">[docs]</a>    <span class="k">def</span> <span class="nf">event_paused_mouse_button_release</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">button</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for :class:`sge.input.MouseButtonRelease`</span>
<span class="sd">        for more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Object.event_paused_joystick_axis_move"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Object.event_paused_joystick_axis_move">[docs]</a>    <span class="k">def</span> <span class="nf">event_paused_joystick_axis_move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">js_name</span><span class="p">,</span> <span class="n">js_id</span><span class="p">,</span> <span class="n">axis</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for :class:`sge.input.JoystickAxisMove`</span>
<span class="sd">        for more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Object.event_paused_joystick_hat_move"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Object.event_paused_joystick_hat_move">[docs]</a>    <span class="k">def</span> <span class="nf">event_paused_joystick_hat_move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">js_name</span><span class="p">,</span> <span class="n">js_id</span><span class="p">,</span> <span class="n">hat</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for :class:`sge.input.JoystickHatMove` for</span>
<span class="sd">        more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Object.event_paused_joystick_trackball_move"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Object.event_paused_joystick_trackball_move">[docs]</a>    <span class="k">def</span> <span class="nf">event_paused_joystick_trackball_move</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">js_name</span><span class="p">,</span> <span class="n">js_id</span><span class="p">,</span> <span class="n">ball</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for</span>
<span class="sd">        :class:`sge.input.JoystickTrackballMove` for more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Object.event_paused_joystick_button_press"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Object.event_paused_joystick_button_press">[docs]</a>    <span class="k">def</span> <span class="nf">event_paused_joystick_button_press</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">js_name</span><span class="p">,</span> <span class="n">js_id</span><span class="p">,</span> <span class="n">button</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for :class:`sge.input.JoystickButtonPress`</span>
<span class="sd">        for more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Object.event_paused_joystick_button_release"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Object.event_paused_joystick_button_release">[docs]</a>    <span class="k">def</span> <span class="nf">event_paused_joystick_button_release</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">js_name</span><span class="p">,</span> <span class="n">js_id</span><span class="p">,</span> <span class="n">button</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for</span>
<span class="sd">        :class:`sge.input.JoystickButtonRelease` for more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Object.event_paused_joystick"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Object.event_paused_joystick">[docs]</a>    <span class="k">def</span> <span class="nf">event_paused_joystick</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">js_name</span><span class="p">,</span> <span class="n">js_id</span><span class="p">,</span> <span class="n">input_type</span><span class="p">,</span> <span class="n">input_id</span><span class="p">,</span>
                              <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        See the documentation for :class:`sge.input.JoystickEvent` for</span>
<span class="sd">        more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

    <span class="nd">@classmethod</span>
<div class="viewcode-block" id="Object.create"><a class="viewcode-back" href="../../dsp.html#sge.dsp.Object.create">[docs]</a>    <span class="k">def</span> <span class="nf">create</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create an object of this class and add it to the current room.</span>

<span class="sd">        ``args`` and ``kwargs`` are passed to the constructor method of</span>
<span class="sd">        ``cls`` as arguments.  Calling</span>
<span class="sd">        ``obj = cls.create(*args, **kwargs)`` is the same as::</span>

<span class="sd">            obj = cls(*args, **kwargs)</span>
<span class="sd">            sge.game.current_room.add(obj)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="n">cls</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">sge</span><span class="o">.</span><span class="n">game</span><span class="o">.</span><span class="n">current_room</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">obj</span></div></div>


<span class="k">class</span> <span class="nc">Mouse</span><span class="p">(</span><span class="n">Object</span><span class="p">):</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">x</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">sge</span><span class="o">.</span><span class="n">game</span><span class="o">.</span><span class="n">current_room</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span>
                <span class="p">(</span><span class="ow">not</span> <span class="n">sge</span><span class="o">.</span><span class="n">game</span><span class="o">.</span><span class="n">grab_input</span> <span class="ow">or</span> <span class="n">sge</span><span class="o">.</span><span class="n">game</span><span class="o">.</span><span class="n">mouse</span><span class="o">.</span><span class="n">visible</span><span class="p">)):</span>
            <span class="n">mouse_x</span> <span class="o">=</span> <span class="n">sge</span><span class="o">.</span><span class="n">mouse</span><span class="o">.</span><span class="n">get_x</span><span class="p">()</span>
            <span class="n">mouse_y</span> <span class="o">=</span> <span class="n">sge</span><span class="o">.</span><span class="n">mouse</span><span class="o">.</span><span class="n">get_y</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">view</span> <span class="ow">in</span> <span class="n">sge</span><span class="o">.</span><span class="n">game</span><span class="o">.</span><span class="n">current_room</span><span class="o">.</span><span class="n">views</span><span class="p">:</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">view</span><span class="o">.</span><span class="n">xport</span> <span class="o">&lt;=</span> <span class="n">mouse_x</span> <span class="o">&lt;</span> <span class="n">view</span><span class="o">.</span><span class="n">xport</span> <span class="o">+</span> <span class="n">view</span><span class="o">.</span><span class="n">wport</span> <span class="ow">and</span>
                        <span class="n">view</span><span class="o">.</span><span class="n">yport</span> <span class="o">&lt;=</span> <span class="n">mouse_y</span> <span class="o">&lt;</span> <span class="n">view</span><span class="o">.</span><span class="n">yport</span> <span class="o">+</span> <span class="n">view</span><span class="o">.</span><span class="n">hport</span><span class="p">):</span>
                    <span class="k">return</span> <span class="p">((</span><span class="n">mouse_x</span> <span class="o">-</span> <span class="n">view</span><span class="o">.</span><span class="n">xport</span><span class="p">)</span> <span class="o">*</span>
                            <span class="p">(</span><span class="n">view</span><span class="o">.</span><span class="n">width</span> <span class="o">/</span> <span class="n">view</span><span class="o">.</span><span class="n">wport</span><span class="p">)</span> <span class="o">+</span> <span class="n">view</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>

        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>

    <span class="nd">@x.setter</span>
    <span class="k">def</span> <span class="nf">x</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">y</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">sge</span><span class="o">.</span><span class="n">game</span><span class="o">.</span><span class="n">current_room</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span>
                <span class="p">(</span><span class="ow">not</span> <span class="n">sge</span><span class="o">.</span><span class="n">game</span><span class="o">.</span><span class="n">grab_input</span> <span class="ow">or</span> <span class="n">sge</span><span class="o">.</span><span class="n">game</span><span class="o">.</span><span class="n">mouse</span><span class="o">.</span><span class="n">visible</span><span class="p">)):</span>
            <span class="n">mouse_x</span> <span class="o">=</span> <span class="n">sge</span><span class="o">.</span><span class="n">mouse</span><span class="o">.</span><span class="n">get_x</span><span class="p">()</span>
            <span class="n">mouse_y</span> <span class="o">=</span> <span class="n">sge</span><span class="o">.</span><span class="n">mouse</span><span class="o">.</span><span class="n">get_y</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">view</span> <span class="ow">in</span> <span class="n">sge</span><span class="o">.</span><span class="n">game</span><span class="o">.</span><span class="n">current_room</span><span class="o">.</span><span class="n">views</span><span class="p">:</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">view</span><span class="o">.</span><span class="n">xport</span> <span class="o">&lt;=</span> <span class="n">mouse_x</span> <span class="o">&lt;=</span> <span class="n">view</span><span class="o">.</span><span class="n">xport</span> <span class="o">+</span> <span class="n">view</span><span class="o">.</span><span class="n">wport</span> <span class="ow">and</span>
                        <span class="n">view</span><span class="o">.</span><span class="n">yport</span> <span class="o">&lt;=</span> <span class="n">mouse_y</span> <span class="o">&lt;=</span> <span class="n">view</span><span class="o">.</span><span class="n">yport</span> <span class="o">+</span> <span class="n">view</span><span class="o">.</span><span class="n">hport</span><span class="p">):</span>
                    <span class="k">return</span> <span class="p">((</span><span class="n">mouse_y</span> <span class="o">-</span> <span class="n">view</span><span class="o">.</span><span class="n">yport</span><span class="p">)</span> <span class="o">*</span>
                            <span class="p">(</span><span class="n">view</span><span class="o">.</span><span class="n">height</span> <span class="o">/</span> <span class="n">view</span><span class="o">.</span><span class="n">hport</span><span class="p">)</span> <span class="o">+</span> <span class="n">view</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>

        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>

    <span class="nd">@y.setter</span>
    <span class="k">def</span> <span class="nf">y</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">sprite</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">rd</span><span class="p">[</span><span class="s2">&quot;sprite&quot;</span><span class="p">]</span>

    <span class="nd">@sprite.setter</span>
    <span class="k">def</span> <span class="nf">sprite</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rd</span><span class="p">[</span><span class="s2">&quot;sprite&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_cursor</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">visible</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__visible</span>

    <span class="nd">@visible.setter</span>
    <span class="k">def</span> <span class="nf">visible</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__visible</span> <span class="o">=</span> <span class="n">value</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_cursor</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">tangible</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">rd</span><span class="p">[</span><span class="s2">&quot;tangible&quot;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>

    <span class="nd">@tangible.setter</span>
    <span class="k">def</span> <span class="nf">tangible</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rd</span><span class="p">[</span><span class="s2">&quot;tangible&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__visible</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Mouse</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">10000</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">event_step</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">time_passed</span><span class="p">,</span> <span class="n">delta_mult</span><span class="p">):</span>
        <span class="n">o_update_object_areas</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">o_update_collision_lists</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">event_collision</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">xdirection</span><span class="p">,</span> <span class="n">ydirection</span><span class="p">):</span>
        <span class="n">sge</span><span class="o">.</span><span class="n">game</span><span class="o">.</span><span class="n">event_mouse_collision</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">xdirection</span><span class="p">,</span> <span class="n">ydirection</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_cursor</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Set the mouse cursor and visibility state.</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">sge</span><span class="o">.</span><span class="n">game</span><span class="o">.</span><span class="n">grab_input</span><span class="p">:</span>
            <span class="n">pygame</span><span class="o">.</span><span class="n">mouse</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">visible</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">sprite</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">pygame</span><span class="o">.</span><span class="n">mouse</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">project_cursor</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="n">sge</span><span class="o">.</span><span class="n">game</span><span class="o">.</span><span class="n">grab_input</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">visible</span> <span class="ow">and</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">sprite</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">):</span>
            <span class="n">img</span> <span class="o">=</span> <span class="n">s_get_image</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sprite</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">image_index</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">image_xscale</span><span class="p">,</span>
                              <span class="bp">self</span><span class="o">.</span><span class="n">image_yscale</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">image_rotation</span><span class="p">,</span>
                              <span class="bp">self</span><span class="o">.</span><span class="n">image_alpha</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">image_blend</span><span class="p">,</span>
                              <span class="bp">self</span><span class="o">.</span><span class="n">image_blend_mode</span><span class="p">)</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">sge</span><span class="o">.</span><span class="n">mouse</span><span class="o">.</span><span class="n">get_x</span><span class="p">()</span>
            <span class="n">y</span> <span class="o">=</span> <span class="n">sge</span><span class="o">.</span><span class="n">mouse</span><span class="o">.</span><span class="n">get_y</span><span class="p">()</span>

            <span class="k">if</span> <span class="n">x</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">y</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="n">x</span> <span class="o">-=</span> <span class="bp">self</span><span class="o">.</span><span class="n">image_origin_x</span>
                <span class="n">y</span> <span class="o">-=</span> <span class="bp">self</span><span class="o">.</span><span class="n">image_origin_y</span>
                <span class="n">r</span><span class="o">.</span><span class="n">game_window_projections</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">img</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">z</span><span class="p">,</span> <span class="bp">None</span><span class="p">))</span>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/sge_logo_alpha_black.png" alt="Logo"/>
            </a></p>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">SGE Game Engine 1.5 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Module code</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.6.
    </div>
  </body>
</html>